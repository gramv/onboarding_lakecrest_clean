import{j as e}from"./radixUI-MBKqlelr.js";import{a as t,f as B,j as R}from"./vendor-BQUE8CnD.js";import{u as H,A as w,b as C,B as h,L as M,S as k}from"./index-BX3Jf5rY.js";import{I as E}from"./input-C7n7UaRv.js";import{L as S}from"./label-BGHhm9HA.js";import{C as V,b as D,c as F,d as I,a as T}from"./card-0UsC1Hfx.js";import{B as q}from"./badge-DbL2e8Dt.js";import{U as z}from"./users-DJfJLhR6.js";import{B as $}from"./building-2-Ckg-FmN9.js";import"./utils-Co3JUx4V.js";function ae(){const[g,x]=t.useState(""),[p,b]=t.useState(""),[j,l]=t.useState(""),[i,o]=t.useState(!1),{login:A,user:d,isAuthenticated:N,returnUrl:r,setReturnUrl:c}=H(),n=B(),[y]=R(),P=y.get("role"),f=y.get("returnUrl");t.useEffect(()=>{f&&!r&&c(f)},[f,r,c]),t.useEffect(()=>{const a=m=>{var v;const u=(v=m.detail)==null?void 0:v.path;u&&n(u,{replace:!0})};return window.addEventListener("auth:navigate",a),()=>{window.removeEventListener("auth:navigate",a)}},[n]),t.useEffect(()=>{if(N&&d){const a=r||(d.role==="hr"?"/hr":d.role==="manager"?"/manager":"/");r&&c(null),n(a,{replace:!0})}},[N,d,n,r,c]);const s=(()=>{switch(P){case"hr":return{title:"HR Administrative Portal",description:"Access comprehensive property and employee management tools",icon:e.jsx(k,{className:"h-8 w-8 text-blue-600"}),badge:"HR Administrator",badgeVariant:"default",gradient:"from-blue-50 to-indigo-50",testCredentials:"hr@hoteltest.com"};case"manager":return{title:"Property Manager Portal",description:"Manage applications and employees for your property",icon:e.jsx($,{className:"h-8 w-8 text-green-600"}),badge:"Property Manager",badgeVariant:"secondary",gradient:"from-green-50 to-emerald-50",testCredentials:"manager@hoteltest.com"};default:return{title:"Hotel Management System",description:"Access your dashboard with your credentials",icon:e.jsx(z,{className:"h-8 w-8 text-gray-600"}),badge:"User Login",badgeVariant:"outline",gradient:"from-gray-50 to-slate-50",testCredentials:null}}})(),L=async a=>{if(a.preventDefault(),l(""),o(!0),!g.trim()){l("Email is required"),o(!1);return}if(!p.trim()){l("Password is required"),o(!1);return}try{await A(g.trim(),p,r||void 0)}catch(m){const u=m instanceof Error?m.message:"Login failed. Please try again.";l(u)}finally{o(!1)}},U=()=>{s.testCredentials&&(x(s.testCredentials),b("password"))};return e.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gradient-to-br ${s.gradient} padding-md`,children:e.jsxs(V,{className:"w-full max-w-md card-elevated card-rounded-lg animate-fade-in",children:[e.jsxs(D,{className:"card-padding-lg text-center spacing-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl",children:s.icon})}),e.jsxs("div",{className:"spacing-sm",children:[e.jsx(q,{className:`badge-${s.badgeVariant} badge-md`,children:s.badge}),e.jsx(F,{className:"text-display-sm",children:s.title}),e.jsx(I,{className:"text-body-md text-secondary",children:s.description})]})]}),e.jsxs(T,{className:"card-padding-lg spacing-md",children:[r&&e.jsx(w,{className:"mb-4 bg-blue-50 border-blue-200",children:e.jsxs(C,{className:"text-blue-800",children:["You'll be redirected to ",e.jsx("strong",{children:r})," after signing in."]})}),e.jsxs("form",{onSubmit:L,className:"spacing-sm",children:[j&&e.jsx(w,{variant:"destructive",className:"bg-error border-error animate-slide-down",children:e.jsx(C,{className:"text-error",children:j})}),e.jsxs("div",{className:"form-group",children:[e.jsx(S,{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsx(E,{id:"email",type:"email",value:g,onChange:a=>x(a.target.value),placeholder:"Enter your email address",className:"form-input-base form-input-md focus-ring",disabled:i,autoComplete:"email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(S,{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx(E,{id:"password",type:"password",value:p,onChange:a=>b(a.target.value),placeholder:"Enter your password",className:"form-input-base form-input-md focus-ring",disabled:i,autoComplete:"current-password"})]}),e.jsx(h,{type:"submit",size:"lg",className:"w-full",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),s.testCredentials&&e.jsx("div",{className:"pt-4 border-t border-muted",children:e.jsx(h,{variant:"secondary",size:"sm",onClick:U,className:"w-full",disabled:i,children:"Use Test Credentials"})}),e.jsx("div",{className:"text-center pt-2",children:e.jsx(h,{variant:"link",onClick:()=>n("/"),className:"text-body-sm text-secondary hover:text-primary smooth-transition",disabled:i,children:"‚Üê Back to Home"})})]})]})})}export{ae as default};
