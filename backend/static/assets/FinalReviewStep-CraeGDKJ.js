var Qt=Object.defineProperty;var es=(t,s,n)=>s in t?Qt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var rt=(t,s,n)=>es(t,typeof s!="symbol"?s+"":s,n);import{j as e}from"./radixUI-MBKqlelr.js";import{a as v,l as Rt,R as Ot}from"./vendor-BQUE8CnD.js";import{d as me,e as ts,A as V,b as Y,B as K,L as Lt,S as re,T as de,X as ss}from"./index-BX3Jf5rY.js";import{C as z,a as $,b as B,c as W,d as Be}from"./card-0UsC1Hfx.js";import{u as pe,S as le,s as Me,P as as,E as is,A as Je,F as We,V as Nt}from"./form-section-CIywKYlm.js";import{C as J}from"./circle-check-big-D7qwqCjm.js";import{C as Ye}from"./clock-DuORzYmm.js";import{F as ae}from"./file-text-lgpzM1Mh.js";import{T as ft,a as yt,b as He,c as Oe}from"./tabs-CTtBr4tg.js";import{B as ns,c as rs}from"./breadcrumb-LLTWqxPN.js";import{U as et}from"./user-BSKbQLbH.js";import{P as qt}from"./phone-CsbprQIk.js";import{C as he,a as zt}from"./checkbox-CzwSq1oz.js";import{B as Ge}from"./badge-DbL2e8Dt.js";import{B as wt,a as _t,D as tt,G as os,C as ls}from"./graduation-cap-C7kQc0Ju.js";import{B as $e}from"./building-D7pk8e3U.js";import{C as cs}from"./calendar-D-I7OBt9.js";import{I as M}from"./input-C7n7UaRv.js";import{L as E}from"./label-BGHhm9HA.js";import{C as De}from"./check-CrQWtsni.js";import{A as Ze}from"./arrow-right-D1e7oZqi.js";import{R as Le,a as oe}from"./formValidation-odEsOSDa.js";import{a as Te,f as ds}from"./utils-Co3JUx4V.js";import{P as Mt,r as ms}from"./PDFButton-lxgnBNdF.js";import{E as it}from"./eye-6Y9sbcRx.js";import{C as ut}from"./chevron-right-D20CZ_0W.js";import{C as Re,I as Ne}from"./info-CS099tTK.js";import{U as fe}from"./users-DJfJLhR6.js";import{S as Se,a as Ce,b as ke,c as Ae,d as be}from"./select-CHEqtOpE.js";import{P as $t}from"./progress-CxTYqs7F.js";import{D as Ut}from"./download-DxzIzwbA.js";import{P as Bt}from"./plus-_zwNWoy_.js";import{T as Wt}from"./trash-2-CRAWfZhR.js";import{S as us}from"./separator-BW__RCi5.js";import{R as hs}from"./rotate-ccw-BXdVcjfo.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=me("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=me("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=me("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=me("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=me("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=me("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=me("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Cs=t=>{var j,x,p,g,f,y,T,C,w,A,b;const s=[],n={},a=t.personalInfo||t,o=t.emergencyContacts||{};(j=a.firstName)!=null&&j.trim()||(n["personalInfo.firstName"]="First name is required"),(x=a.lastName)!=null&&x.trim()||(n["personalInfo.lastName"]="Last name is required"),(p=a.email)!=null&&p.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(n["personalInfo.email"]="Please enter a valid email address"):n["personalInfo.email"]="Email is required",(g=a.phone)!=null&&g.trim()||(n["personalInfo.phone"]="Phone number is required"),(f=a.address)!=null&&f.trim()||(n["personalInfo.address"]="Address is required"),(y=a.city)!=null&&y.trim()||(n["personalInfo.city"]="City is required"),(T=a.state)!=null&&T.trim()||(n["personalInfo.state"]="State is required"),(C=a.zipCode)!=null&&C.trim()||(n["personalInfo.zipCode"]="ZIP code is required");const r=o.primaryContact||{};(w=r.name)!=null&&w.trim()||(n["emergencyContacts.primaryContact.name"]="Primary emergency contact name is required"),(A=r.relationship)!=null&&A.trim()||(n["emergencyContacts.primaryContact.relationship"]="Primary emergency contact relationship is required"),(b=r.phoneNumber)!=null&&b.trim()||(n["emergencyContacts.primaryContact.phoneNumber"]="Primary emergency contact phone is required");const c=Object.keys(n).filter(k=>k.startsWith("personalInfo")).length,i=Object.keys(n).filter(k=>k.startsWith("emergencyContacts")).length;return c>0&&s.push(`Please complete all required personal information fields (${c} missing)`),i>0&&s.push(`Please complete all required emergency contact fields (${i} missing)`),{valid:s.length===0&&Object.keys(n).length===0,errors:s,fieldErrors:n}},ht=t=>{var i,j,x,p,g,f,y,T;const s=[],n={},a=t.formData||t;!((i=a.last_name)!=null&&i.trim())&&!((j=a.lastName)!=null&&j.trim())&&(n.lastName="Last name is required for I-9"),!((x=a.first_name)!=null&&x.trim())&&!((p=a.firstName)!=null&&p.trim())&&(n.firstName="First name is required for I-9"),!a.date_of_birth&&!a.dateOfBirth&&(n.dateOfBirth="Date of birth is required"),(g=a.ssn)!=null&&g.trim()||(n.ssn="Social Security Number is required");const o=a.citizenship_status||a.citizenshipStatus;o||s.push("You must select your citizenship status"),(o==="alien_authorized"||o==="authorized_alien")&&!((f=a.alien_registration_number)!=null&&f.trim())&&!((y=a.alienNumber)!=null&&y.trim())&&!((T=a.uscisNumber)!=null&&T.trim())&&s.push("Alien Registration Number or USCIS Number is required for work-authorized aliens"),t.signed||a.signed||t.signatureData||a.signatureData||t.isSigned||s.push("Electronic signature is required");const c=Object.keys(n).length;return{valid:s.length===0&&c===0,errors:s,fieldErrors:n}},Ht=t=>{var c,i,j,x,p,g;const s=[],n={},a=t.formData||t;if(t.signed||t.isSigned||a.signed||a.isSigned)return{valid:!0,errors:[],fieldErrors:{}};!((c=a.first_name)!=null&&c.trim())&&!((i=a.firstName)!=null&&i.trim())&&(n.firstName="First name is required"),!((j=a.last_name)!=null&&j.trim())&&!((x=a.lastName)!=null&&x.trim())&&(n.lastName="Last name is required"),(p=a.ssn)!=null&&p.trim()||(n.ssn="Social Security Number is required"),(g=a.address)!=null&&g.trim()||(n.address="Address is required"),a.filing_status||a.filingStatus||s.push("You must select a filing status");const r=Object.keys(n).length;return{valid:s.length===0&&r===0,errors:s,fieldErrors:n}},Vt=t=>{var o,r,c,i,j;const s=[],n={};if(t.paymentMethod==="direct_deposit"){t.accountType||((o=t.primaryAccount)==null?void 0:o.accountType)||s.push("Please select an account type");const p=t.bankName||((r=t.primaryAccount)==null?void 0:r.bankName);p!=null&&p.trim()||(n.bankName="Bank name is required");const g=t.routingNumber||((c=t.primaryAccount)==null?void 0:c.routingNumber);g!=null&&g.trim()?/^\d{9}$/.test(g)||(n.routingNumber="Routing number must be 9 digits"):n.routingNumber="Routing number is required";const f=t.accountNumber||((i=t.primaryAccount)==null?void 0:i.accountNumber),y=t.confirmAccountNumber||((j=t.primaryAccount)==null?void 0:j.accountNumberConfirm);f!=null&&f.trim()||(n.accountNumber="Account number is required"),y!=null&&y.trim()?f!==y&&(n.confirmAccountNumber="Account numbers do not match"):n.confirmAccountNumber="Please confirm account number",!t.voidedCheckUploaded&&!t.bankLetterUploaded&&!t.accountVerified&&s.push("Please upload a voided check or bank letter for verification")}const a=Object.keys(n).length;return{valid:s.length===0&&a===0,errors:s,fieldErrors:n}},ks=t=>{var n,a;const s=[];return(!((n=t.sexualHarassmentInitials)!=null&&n.trim())||t.sexualHarassmentInitials.trim().length<2)&&s.push("Sexual Harassment Policy initials are required (at least 2 characters)"),(!((a=t.eeoInitials)!=null&&a.trim())||t.eeoInitials.trim().length<2)&&s.push("Equal Employment Opportunity Policy initials are required (at least 2 characters)"),t.acknowledgmentChecked||s.push("You must acknowledge that you have read and understood all policies"),{valid:s.length===0,errors:s}},Yt=t=>{const s=[],n={};!t.isWaived&&!t.medicalPlan&&s.push("Please select a health insurance plan or decline coverage"),!t.isWaived&&t.medicalPlan&&((t.medicalTier==="employee_spouse"||t.medicalTier==="employee_children"||t.medicalTier==="family")&&(!t.dependents||t.dependents.length===0)&&s.push("Dependent information is required for the selected coverage tier"),t.dependents&&t.dependents.length>0&&(t.dependents.forEach((o,r)=>{var c,i;(c=o.firstName)!=null&&c.trim()||(n[`dependent_${r}_firstName`]="Dependent first name is required"),(i=o.lastName)!=null&&i.trim()||(n[`dependent_${r}_lastName`]="Dependent last name is required"),o.dateOfBirth||(n[`dependent_${r}_dob`]="Dependent date of birth is required"),o.relationship||(n[`dependent_${r}_relationship`]="Dependent relationship is required")}),t.irsDependentConfirmation||s.push("Please confirm the IRS dependent certification")));const a=Object.keys(n).length;return{valid:s.length===0&&a===0,errors:s,fieldErrors:n}},Gt=t=>{var n,a;const s=[];if(t.documentStrategy==="listA")(!t.selectedDocuments||t.selectedDocuments.length===0)&&s.push("Please select and upload one List A document");else if(t.documentStrategy==="listBC"){const o=(n=t.selectedDocuments)==null?void 0:n.some(c=>c.includes("drivers-license")||c.includes("military-id")),r=(a=t.selectedDocuments)==null?void 0:a.some(c=>c.includes("social-security")||c.includes("birth-certificate"));o||s.push("Please select and upload one List B document (identity)"),r||s.push("Please select and upload one List C document (work authorization)")}return{valid:s.length===0,errors:s}},Jt=t=>{const s=[];return(!t.finalAcknowledgments||!t.finalAcknowledgments.every(n=>n))&&s.push("Please check all final acknowledgments before signing"),(!t.signature||!t.signatureData)&&s.push("Final employee signature is required to complete onboarding"),{valid:s.length===0,errors:s}},Va={"personal-info":Cs,"i9-section1":ht,"i9-complete":ht,"w4-form":Ht,"direct-deposit":Vt,"company-policies":ks,"health-insurance":Yt,"document-upload":Gt,"final-review":Jt};function ce({children:t,className:s}){return e.jsx("div",{className:ts("w-full max-w-4xl mx-auto",s),children:t})}function Ya({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({welcomeAcknowledged:!1,languagePreference:o}),{saveStatus:x}=pe(i,{onSave:async f=>{await a(t.id,f)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&j(y=>({...y,welcomeAcknowledged:!0}))},[s.completedSteps,t.id]),v.useEffect(()=>{i.welcomeAcknowledged&&!s.completedSteps.includes(t.id)&&n(t.id,i)},[i.welcomeAcknowledged,t.id,n,s.completedSteps]);const g={en:{greeting:`Welcome, ${(r==null?void 0:r.firstName)||"Team Member"}!`,propertyInfo:(c==null?void 0:c.name)||"Our Company",title:"Let's get you started",description:"Complete your onboarding in about 45 minutes",whatYouNeed:"What you'll need:",requirements:["Government ID (Driver's License or Passport)","Social Security Card","Bank account information","Emergency contact details"],estimatedTime:"Estimated time: 45-60 minutes",completedMessage:"Welcome step completed! Click Next to continue."},es:{greeting:`¡Bienvenido, ${(r==null?void 0:r.firstName)||"Miembro del Equipo"}!`,propertyInfo:(c==null?void 0:c.name)||"Nuestra Empresa",title:"Comencemos",description:"Complete su incorporación en aproximadamente 45 minutos",whatYouNeed:"Lo que necesitará:",requirements:["Identificación del gobierno (Licencia o Pasaporte)","Tarjeta de Seguro Social","Información bancaria","Datos de contacto de emergencia"],estimatedTime:"Tiempo estimado: 45-60 minutos",completedMessage:"¡Paso de bienvenida completado! Haga clic en Siguiente para continuar."}}[o];return e.jsx(le,{saveStatus:x,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-heading-primary",children:g.greeting}),e.jsx("p",{className:"text-heading-secondary text-blue-600",children:g.propertyInfo}),e.jsx("p",{className:"text-body-large text-gray-600",children:g.title})]}),i.welcomeAcknowledged&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-body-default text-green-800",children:g.completedMessage})]}),e.jsx(z,{className:"card-transition",children:e.jsxs($,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600 bg-blue-50 rounded-lg p-3",children:[e.jsx(Ye,{className:"h-5 w-5"}),e.jsx("span",{className:"text-body-small font-medium",children:g.estimatedTime})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-body-default font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),g.whatYouNeed]}),e.jsx("ul",{className:"space-y-2",children:g.requirements.map((f,y)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),e.jsx("span",{className:"text-body-default text-gray-700",children:f})]},y))})]})]})}),!i.welcomeAcknowledged&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>j(f=>({...f,welcomeAcknowledged:!0})),className:"text-body-small text-blue-600 hover:text-blue-700 underline",children:"I understand the requirements"})})]})})})}function Ga({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({}),[x,p]=v.useState({}),[g,f]=v.useState(!1),[y,T]=v.useState(!1),[C,w]=v.useState("personal"),[A,b]=v.useState(!1),k={personalInfo:i,emergencyContacts:x,activeTab:C},P=[],h={},{saveStatus:F}=pe(k,{onSave:async l=>{await a(t.id,l),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(l))}});v.useEffect(()=>{(async()=>{try{let _=null;const L=sessionStorage.getItem(`onboarding_${t.id}_data`);if(console.log("PersonalInfoStep - Loading saved data:",L),L)try{_=JSON.parse(L),console.log("PersonalInfoStep - Parsed data from session:",_)}catch(ee){console.error("Failed to parse session data:",ee)}if(r!=null&&r.id)try{const G=await fetch(`/api/onboarding/${r.id}/personal-info`);if(G.ok){const te=await G.json();te.success&&te.data&&Object.keys(te.data).length>0&&(console.log("PersonalInfoStep - Loaded data from cloud:",te.data),(te.data.personalInfo&&Object.values(te.data.personalInfo).some(U=>U&&U!=="")||!_)&&(_=te.data,sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(te.data))))}}catch(ee){console.error("Failed to load personal info from cloud:",ee)}_&&(_.personalInfo?j(_.personalInfo):(_.firstName||_.lastName||_.phone)&&j(_),_.emergencyContacts?p(_.emergencyContacts):_.primaryContact&&p({primaryContact:_.primaryContact,secondaryContact:_.secondaryContact||{},medicalInfo:_.medicalInfo||"",allergies:_.allergies||"",medications:_.medications||"",medicalConditions:_.medicalConditions||""}),_.activeTab&&w(_.activeTab)),s.completedSteps.includes(t.id)&&(f(!0),T(!0)),b(!0)}catch(_){console.error("Failed to load existing data:",_),b(!0)}})()},[t.id,s.completedSteps,r]);const N=g&&y;v.useEffect(()=>{N&&!s.completedSteps.includes(t.id)&&n(t.id,k)},[N,t.id,k,n,s.completedSteps]);const R=v.useCallback(async l=>{console.log("Saving personal info:",l),j(l);const _={personalInfo:l,emergencyContacts:x,activeTab:C};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(_)),await a(t.id,_)},[x,C,t.id,a]),D=v.useCallback(async l=>{console.log("Saving emergency contacts:",l),p(l);const _={personalInfo:i,emergencyContacts:l,activeTab:C};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(_)),await a(t.id,_)},[i,C,t.id,a]),O=v.useCallback(l=>{f(l)},[]),m=v.useCallback(l=>{T(l)},[]),u=v.useCallback(()=>{if(g){w("emergency"),Me();const l={personalInfo:i,emergencyContacts:x,activeTab:"emergency"};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(l))}},[g,i,x,t.id]),S=v.useCallback(l=>{w(l),Me();const _={personalInfo:i,emergencyContacts:x,activeTab:l};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(_))},[i,x,t.id]),I={en:{title:"Personal Information",description:"Please provide your personal information and emergency contacts. This information will be kept confidential.",personalTab:"Personal Details",emergencyTab:"Emergency Contacts",sectionProgress:"Section Progress",complete:"Complete",required:"Required",completionMessage:"Personal information section completed successfully.",continueToEmergency:"Continue to Emergency Contacts",backToPersonal:"← Back to Personal Details",fillPersonalFirst:"Please complete Personal Details first"},es:{title:"Información Personal",description:"Por favor proporcione su información personal y contactos de emergencia. Esta información se mantendrá confidencial.",personalTab:"Detalles Personales",emergencyTab:"Contactos de Emergencia",sectionProgress:"Progreso de la Sección",complete:"Completo",required:"Requerido",completionMessage:"Sección de información personal completada exitosamente.",continueToEmergency:"Continuar a Contactos de Emergencia",backToPersonal:"← Volver a Detalles Personales",fillPersonalFirst:"Por favor complete primero los Detalles Personales"}}[o],d=[{id:"personal",label:I.personalTab,icon:e.jsx(et,{className:"h-4 w-4"}),enabled:!0,complete:g},{id:"emergency",label:I.emergencyTab,icon:e.jsx(qt,{className:"h-4 w-4"}),enabled:!0,complete:y}];return e.jsx(le,{errors:P,fieldErrors:h,saveStatus:F,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(ns,{items:rs(["Home","Onboarding","Personal Information"]),className:"mb-4"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(et,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:I.title})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:I.description})]}),N&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:I.completionMessage})]}),e.jsxs(ft,{value:C,onValueChange:S,className:"w-full",children:[e.jsx(yt,{className:"grid w-full grid-cols-2 mb-6",children:d.map(l=>e.jsxs(He,{value:l.id,disabled:!l.enabled,className:"flex items-center space-x-2",children:[l.icon,e.jsx("span",{className:"hidden sm:inline",children:l.label}),l.complete&&e.jsx(J,{className:"h-3 w-3 text-green-600 ml-1"})]},l.id))}),e.jsx(Oe,{value:"personal",className:"space-y-6",children:A&&e.jsxs(e.Fragment,{children:[e.jsx(as,{initialData:i,language:o,onSave:R,onNext:u,onValidationChange:O,useMainNavigation:!1},"personal-form"),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{onClick:u,disabled:!g,className:`px-6 py-3 rounded-lg font-medium transition-colors ${g?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[I.continueToEmergency," →"]})}),!g&&e.jsx("p",{className:"text-sm text-amber-600 text-center",children:I.fillPersonalFirst})]})}),e.jsx(Oe,{value:"emergency",className:"space-y-6",children:A&&e.jsxs(e.Fragment,{children:[e.jsx(is,{initialData:x,language:o,onSave:D,onNext:()=>{},onBack:()=>S("personal"),onValidationChange:m,useMainNavigation:!0},"emergency-form"),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx("button",{onClick:()=>S("personal"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:I.backToPersonal}),y&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:I.complete})]})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:I.sectionProgress}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:I.personalTab}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:g?I.complete:I.required})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:I.emergencyTab}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:y?I.complete:I.required})]})]})]})]}),!1]})})})}function Ja({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState(!1),[x,p]=v.useState(null),g={acknowledged:i,acknowledgedAt:x},{saveStatus:f}=pe(g,{onSave:async R=>{await a(t.id,R)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&(j(!0),p(new Date().toISOString()))},[t.id,s.completedSteps]),v.useEffect(()=>{i&&!s.completedSteps.includes(t.id)&&n(t.id,g)},[i,t.id,g,n,s.completedSteps]);const y=R=>{j(R),p(R?new Date().toISOString():null)},T=(r==null?void 0:r.payRate)||0,C=(r==null?void 0:r.payFrequency)||"hourly",w=(r==null?void 0:r.startTime)||"Not specified",A=(r==null?void 0:r.benefitsEligible)||"Not specified",b=(r==null?void 0:r.supervisor)||"Not specified",k=(r==null?void 0:r.specialInstructions)||"",P=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(R),h=R=>R?new Date(R+"T00:00:00Z").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}):"Not specified",N={en:{title:"Review Your Job Offer",description:"Please review the job offer details provided by your manager.",completedNotice:"Job offer accepted successfully! Click Next to continue.",propertyInfo:"Property Information",positionInfo:"Position Details",position:"Job Title",department:"Department",employmentDetails:"Employment Terms",startDate:"Start Date",payRate:"Pay Rate",acknowledgment:"Job Offer Acceptance",acknowledgmentText:"I have reviewed and accept all job details above.",acknowledgedOn:"Acknowledged on"},es:{title:"Revise Su Oferta de Trabajo",description:"Revise los detalles de la oferta de trabajo proporcionados por su gerente.",completedNotice:"¡Oferta de trabajo aceptada exitosamente! Haga clic en Siguiente para continuar.",propertyInfo:"Información de la Propiedad",positionInfo:"Detalles de la Posición",position:"Título del Trabajo",department:"Departamento",employmentDetails:"Términos de Empleo",startDate:"Fecha de Inicio",payRate:"Tarifa de Pago",acknowledgment:"Aceptación de Oferta de Trabajo",acknowledgmentText:"He revisado y acepto todos los detalles del trabajo anteriores.",acknowledgedOn:"Reconocido el"}}[o];return e.jsx(le,{saveStatus:f,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(wt,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:N.title})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:N.description})]}),i&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:N.completedNotice})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:N.propertyInfo})]})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Hotel Name"}),e.jsx("p",{className:"font-semibold",children:(c==null?void 0:c.name)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),e.jsx("p",{className:"text-sm",children:(c==null?void 0:c.address)||"Not specified"})]})]})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:N.positionInfo})]})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:N.position}),e.jsx("p",{className:"font-semibold",children:(r==null?void 0:r.position)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:N.department}),e.jsx("p",{children:(r==null?void 0:r.department)||"Not specified"})]}),e.jsx("div",{children:e.jsx(Ge,{variant:"secondary",children:"Full Time"})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:N.employmentDetails})]})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:N.startDate}),e.jsx("p",{className:"font-semibold",children:h((r==null?void 0:r.startDate)||"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:N.payRate}),e.jsxs("p",{className:"font-semibold",children:[P(T),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:C==="hourly"?"/ hour":C==="salary"?"/ year":`/ ${C}`})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Start Time"}),e.jsx("p",{className:"font-semibold",children:w})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Benefits Eligible"}),e.jsx("p",{className:"font-semibold",children:A==="yes"?"Yes":A==="no"?"No":A})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supervisor"}),e.jsx("p",{className:"font-semibold",children:b})]})]})]}),k&&e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"Special Instructions"})]})}),e.jsx($,{children:e.jsx("p",{className:"text-sm text-gray-700",children:k})})]})]})]}),e.jsxs(z,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2 text-blue-800",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("span",{children:N.acknowledgment})]})}),e.jsxs($,{children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:"jobOfferAcknowledgment",checked:i,onCheckedChange:y,className:"mt-1",disabled:s.completedSteps.includes(t.id)}),e.jsx("label",{htmlFor:"jobOfferAcknowledgment",className:"text-sm text-blue-800 leading-relaxed cursor-pointer flex-1",children:N.acknowledgmentText})]}),x&&e.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[N.acknowledgedOn,": ",new Date(x).toLocaleString()]})]})]})]})})})}function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pt.apply(null,arguments)}function As(t,s){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(s.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Ts(t,s){if(t==null)return{};var n,a,o=As(t,s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],s.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function xt(t){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xt(t)}function Is(t,s,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Ps(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function gt(t,s){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gt(t,s)}function Es(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&gt(t,s)}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},at(t)}function Zt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zt=function(){return!!t})()}function Fs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ds(t,s){if(s&&(xt(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fs(t)}function Rs(t){var s=Zt();return function(){var n,a=at(t);if(s){var o=at(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Ds(this,n)}}var ot={exports:{}},lt,St;function Os(){if(St)return lt;St=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return lt=t,lt}var ct,Ct;function Ls(){if(Ct)return ct;Ct=1;var t=Os();function s(){}function n(){}return n.resetWarningCache=s,ct=function(){function a(c,i,j,x,p,g){if(g!==t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}a.isRequired=a;function o(){return a}var r={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:o,element:a,elementType:a,instanceOf:o,node:a,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:s};return r.PropTypes=r,r},ct}var kt;function qs(){return kt||(kt=1,ot.exports=Ls()()),ot.exports}var zs=qs();const ge=Rt(zs);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Ie(t,s,n){this.x=t,this.y=s,this.time=n||new Date().getTime()}Ie.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};Ie.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};Ie.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function jt(t,s,n,a){this.startPoint=t,this.control1=s,this.control2=n,this.endPoint=a}jt.prototype.length=function(){for(var t=10,s=0,n=void 0,a=void 0,o=0;o<=t;o+=1){var r=o/t,c=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),i=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var j=c-n,x=i-a;s+=Math.sqrt(j*j+x*x)}n=c,a=i}return s};jt.prototype._point=function(t,s,n,a,o){return s*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*a*(1-t)*t*t+o*t*t*t};function Ms(t,s,n){var a,o,r,c=null,i=0;n||(n={});var j=function(){i=n.leading===!1?0:Date.now(),c=null,r=t.apply(a,o),c||(a=o=null)};return function(){var x=Date.now();!i&&n.leading===!1&&(i=x);var p=s-(x-i);return a=this,o=arguments,p<=0||p>s?(c&&(clearTimeout(c),c=null),i=x,r=t.apply(a,o),c||(a=o=null)):!c&&n.trailing!==!1&&(c=setTimeout(j,p)),r}}function ie(t,s){var n=this,a=s||{};this.velocityFilterWeight=a.velocityFilterWeight||.7,this.minWidth=a.minWidth||.5,this.maxWidth=a.maxWidth||2.5,this.throttle="throttle"in a?a.throttle:16,this.minDistance="minDistance"in a?a.minDistance:5,this.throttle?this._strokeMoveUpdate=Ms(ie.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=ie.prototype._strokeUpdate,this.dotSize=a.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=a.penColor||"black",this.backgroundColor=a.backgroundColor||"rgba(0,0,0,0)",this.onBegin=a.onBegin,this.onEnd=a.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(o))},this._handleMouseMove=function(o){n._mouseButtonDown&&n._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var r=o.changedTouches[0];n._strokeBegin(r)}},this._handleTouchMove=function(o){o.preventDefault();var r=o.targetTouches[0];n._strokeMoveUpdate(r)},this._handleTouchEnd=function(o){var r=o.target===n._canvas;r&&(o.preventDefault(),n._strokeEnd(o))},this.on()}ie.prototype.clear=function(){var t=this._ctx,s=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,s.width,s.height),t.fillRect(0,0,s.width,s.height),this._data=[],this._reset(),this._isEmpty=!0};ie.prototype.fromDataURL=function(t){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new Image,o=n.ratio||window.devicePixelRatio||1,r=n.width||this._canvas.width/o,c=n.height||this._canvas.height/o;this._reset(),a.src=t,a.onload=function(){s._ctx.drawImage(a,0,0,r,c)},this._isEmpty=!1};ie.prototype.toDataURL=function(t){var s;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return(s=this._canvas).toDataURL.apply(s,[t].concat(a))}};ie.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};ie.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};ie.prototype.isEmpty=function(){return this._isEmpty};ie.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};ie.prototype._strokeUpdate=function(t){var s=t.clientX,n=t.clientY,a=this._createPoint(s,n),o=this._data[this._data.length-1],r=o&&o[o.length-1],c=r&&a.distanceTo(r)<this.minDistance;if(!(r&&c)){var i=this._addPoint(a),j=i.curve,x=i.widths;j&&x&&this._drawCurve(j,x.start,x.end),this._data[this._data.length-1].push({x:a.x,y:a.y,time:a.time,color:this.penColor})}};ie.prototype._strokeEnd=function(t){var s=this.points.length>2,n=this.points[0];if(!s&&n&&this._drawDot(n),n){var a=this._data[this._data.length-1],o=a[a.length-1];n.equals(o)||a.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};ie.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};ie.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};ie.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};ie.prototype._createPoint=function(t,s,n){var a=this._canvas.getBoundingClientRect();return new Ie(t-a.left,s-a.top,n||new Date().getTime())};ie.prototype._addPoint=function(t){var s=this.points,n=void 0;if(s.push(t),s.length>2){s.length===3&&s.unshift(s[0]),n=this._calculateCurveControlPoints(s[0],s[1],s[2]);var a=n.c2;n=this._calculateCurveControlPoints(s[1],s[2],s[3]);var o=n.c1,r=new jt(s[1],a,o,s[2]),c=this._calculateCurveWidths(r);return s.shift(),{curve:r,widths:c}}return{}};ie.prototype._calculateCurveControlPoints=function(t,s,n){var a=t.x-s.x,o=t.y-s.y,r=s.x-n.x,c=s.y-n.y,i={x:(t.x+s.x)/2,y:(t.y+s.y)/2},j={x:(s.x+n.x)/2,y:(s.y+n.y)/2},x=Math.sqrt(a*a+o*o),p=Math.sqrt(r*r+c*c),g=i.x-j.x,f=i.y-j.y,y=p/(x+p),T={x:j.x+g*y,y:j.y+f*y},C=s.x-T.x,w=s.y-T.y;return{c1:new Ie(i.x+C,i.y+w),c2:new Ie(j.x+C,j.y+w)}};ie.prototype._calculateCurveWidths=function(t){var s=t.startPoint,n=t.endPoint,a={start:null,end:null},o=this.velocityFilterWeight*n.velocityFrom(s)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(o);return a.start=this._lastWidth,a.end=r,this._lastVelocity=o,this._lastWidth=r,a};ie.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};ie.prototype._drawPoint=function(t,s,n){var a=this._ctx;a.moveTo(t,s),a.arc(t,s,n,0,2*Math.PI,!1),this._isEmpty=!1};ie.prototype._drawCurve=function(t,s,n){var a=this._ctx,o=n-s,r=Math.floor(t.length());a.beginPath();for(var c=0;c<r;c+=1){var i=c/r,j=i*i,x=j*i,p=1-i,g=p*p,f=g*p,y=f*t.startPoint.x;y+=3*g*i*t.control1.x,y+=3*p*j*t.control2.x,y+=x*t.endPoint.x;var T=f*t.startPoint.y;T+=3*g*i*t.control1.y,T+=3*p*j*t.control2.y,T+=x*t.endPoint.y;var C=s+x*o;this._drawPoint(y,T,C)}a.closePath(),a.fill()};ie.prototype._drawDot=function(t){var s=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;s.beginPath(),this._drawPoint(t.x,t.y,n),s.closePath(),s.fill()};ie.prototype._fromData=function(t,s,n){for(var a=0;a<t.length;a+=1){var o=t[a];if(o.length>1)for(var r=0;r<o.length;r+=1){var c=o[r],i=new Ie(c.x,c.y,c.time),j=c.color;if(r===0)this.penColor=j,this._reset(),this._addPoint(i);else if(r!==o.length-1){var x=this._addPoint(i),p=x.curve,g=x.widths;p&&g&&s(p,g,j)}}else{this._reset();var f=o[0];n(f)}}};ie.prototype._toSVG=function(){var t=this,s=this._data,n=this._canvas,a=Math.max(window.devicePixelRatio||1,1),o=0,r=0,c=n.width/a,i=n.height/a,j=document.createElementNS("http://www.w3.org/2000/svg","svg");j.setAttributeNS(null,"width",n.width),j.setAttributeNS(null,"height",n.height),this._fromData(s,function(A,b,k){var P=document.createElement("path");if(!isNaN(A.control1.x)&&!isNaN(A.control1.y)&&!isNaN(A.control2.x)&&!isNaN(A.control2.y)){var h="M "+A.startPoint.x.toFixed(3)+","+A.startPoint.y.toFixed(3)+" "+("C "+A.control1.x.toFixed(3)+","+A.control1.y.toFixed(3)+" ")+(A.control2.x.toFixed(3)+","+A.control2.y.toFixed(3)+" ")+(A.endPoint.x.toFixed(3)+","+A.endPoint.y.toFixed(3));P.setAttribute("d",h),P.setAttribute("stroke-width",(b.end*2.25).toFixed(3)),P.setAttribute("stroke",k),P.setAttribute("fill","none"),P.setAttribute("stroke-linecap","round"),j.appendChild(P)}},function(A){var b=document.createElement("circle"),k=typeof t.dotSize=="function"?t.dotSize():t.dotSize;b.setAttribute("r",k),b.setAttribute("cx",A.x),b.setAttribute("cy",A.y),b.setAttribute("fill",A.color),j.appendChild(b)});var x="data:image/svg+xml;base64,",p='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+r+" "+c+" "+i+'"')+(' width="'+c+'"')+(' height="'+i+'"')+">",g=j.innerHTML;if(g===void 0){var f=document.createElement("dummy"),y=j.childNodes;f.innerHTML="";for(var T=0;T<y.length;T+=1)f.appendChild(y[T].cloneNode(!0));g=f.innerHTML}var C="</svg>",w=p+g+C;return x+btoa(w)};ie.prototype.fromData=function(t){var s=this;this.clear(),this._fromData(t,function(n,a){return s._drawCurve(n,a.start,a.end)},function(n){return s._drawDot(n)}),this._data=t};ie.prototype.toData=function(){return this._data};var Qe={exports:{}},$s=Qe.exports,At;function Us(){return At||(At=1,(function(t,s){(function(n,a){t.exports=a()})($s,function(){return(function(n){function a(r){if(o[r])return o[r].exports;var c=o[r]={exports:{},id:r,loaded:!1};return n[r].call(c.exports,c,c.exports,a),c.loaded=!0,c.exports}var o={};return a.m=n,a.c=o,a.p="",a(0)})([function(n,a){function o(x){var p=x.getContext("2d"),g=x.width,f=x.height,y=p.getImageData(0,0,g,f).data,T=i(!0,g,f,y),C=i(!1,g,f,y),w=j(!0,g,f,y),A=j(!1,g,f,y),b=A-w+1,k=C-T+1,P=p.getImageData(w,T,b,k);return x.width=b,x.height=k,p.clearRect(0,0,b,k),p.putImageData(P,0,0),x}function r(x,p,g,f){return{red:f[4*(g*p+x)],green:f[4*(g*p+x)+1],blue:f[4*(g*p+x)+2],alpha:f[4*(g*p+x)+3]}}function c(x,p,g,f){return r(x,p,g,f).alpha}function i(x,p,g,f){for(var y=x?1:-1,T=x?0:g-1,C=T;x?C<g:C>-1;C+=y)for(var w=0;w<p;w++)if(c(w,C,p,f))return C;return null}function j(x,p,g,f){for(var y=x?1:-1,T=x?0:p-1,C=T;x?C<p:C>-1;C+=y)for(var w=0;w<g;w++)if(c(C,w,p,f))return C;return null}Object.defineProperty(a,"__esModule",{value:!0}),a.default=o}])})})(Qe)),Qe.exports}var Bs=Us();const Ws=Rt(Bs);var Hs=["canvasProps","clearOnResize"],nt=(function(t){Es(n,t);var s=Rs(n);function n(){var a;Ps(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return a=s.call.apply(s,[this].concat(r)),a.staticThis=a.constructor,a._sigPad=null,a._canvas=null,a.setRef=function(i){a._canvas=i,a._canvas===null&&(a._sigPad=null)},a._excludeOurProps=function(){var i=a.props;i.canvasProps,i.clearOnResize;var j=Ts(i,Hs);return j},a.componentDidMount=function(){var i=a.getCanvas();a._sigPad=new ie(i,a._excludeOurProps()),a._resizeCanvas(),a.on()},a.componentWillUnmount=function(){a.off()},a.componentDidUpdate=function(){Object.assign(a._sigPad,a._excludeOurProps())},a.getCanvas=function(){if(a._canvas===null)throw a.staticThis.refNullError;return a._canvas},a.getTrimmedCanvas=function(){var i=a.getCanvas(),j=document.createElement("canvas");return j.width=i.width,j.height=i.height,j.getContext("2d").drawImage(i,0,0),Ws(j)},a.getSignaturePad=function(){if(a._sigPad===null)throw a.staticThis.refNullError;return a._sigPad},a._checkClearOnResize=function(){a.props.clearOnResize&&a._resizeCanvas()},a._resizeCanvas=function(){var i,j,x=(i=a.props.canvasProps)!==null&&i!==void 0?i:{},p=x.width,g=x.height;if(!(typeof p<"u"&&typeof g<"u")){var f=a.getCanvas(),y=Math.max((j=window.devicePixelRatio)!==null&&j!==void 0?j:1,1);typeof p>"u"&&(f.width=f.offsetWidth*y),typeof g>"u"&&(f.height=f.offsetHeight*y),f.getContext("2d").scale(y,y),a.clear()}},a.render=function(){var i=a.props.canvasProps;return Ot.createElement("canvas",pt({ref:a.setRef},i))},a.on=function(){return window.addEventListener("resize",a._checkClearOnResize),a.getSignaturePad().on()},a.off=function(){return window.removeEventListener("resize",a._checkClearOnResize),a.getSignaturePad().off()},a.clear=function(){return a.getSignaturePad().clear()},a.isEmpty=function(){return a.getSignaturePad().isEmpty()},a.fromDataURL=function(i,j){return a.getSignaturePad().fromDataURL(i,j)},a.toDataURL=function(i,j){return a.getSignaturePad().toDataURL(i,j)},a.fromData=function(i){return a.getSignaturePad().fromData(i)},a.toData=function(){return a.getSignaturePad().toData()},a}return Is(n)})(v.Component);nt.propTypes={velocityFilterWeight:ge.number,minWidth:ge.number,maxWidth:ge.number,minDistance:ge.number,dotSize:ge.oneOfType([ge.number,ge.func]),penColor:ge.string,throttle:ge.number,onEnd:ge.func,onBegin:ge.func,canvasProps:ge.object,clearOnResize:ge.bool};nt.defaultProps={clearOnResize:!0};nt.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function Xt({pdfUrl:t,pdfData:s,title:n="Document Preview",height:a="600px",showToolbar:o=!0,onError:r}){const[c,i]=v.useState(!0),[j,x]=v.useState(null),[p,g]=v.useState(1),[f,y]=v.useState(0),[T,C]=v.useState(1),[w,A]=v.useState(1),[b,k]=v.useState("");v.useEffect(()=>{if(s)try{const N=atob(s),R=new Array(N.length);for(let u=0;u<N.length;u++)R[u]=N.charCodeAt(u);const D=new Uint8Array(R),O=new Blob([D],{type:"application/pdf"}),m=URL.createObjectURL(O);return k(m),()=>{URL.revokeObjectURL(m)}}catch(N){x("Failed to load PDF data"),r&&r(N)}else t&&k(t)},[s,t,r]);const P=()=>{i(!1),x(null)},h=()=>{i(!1),x("Failed to load PDF document"),r&&r(new Error("PDF loading failed"))},F=()=>{if(b){const N=document.createElement("a");N.href=b,N.download=`${n.replace(/\s+/g,"-").toLowerCase()}.pdf`,document.body.appendChild(N),N.click(),document.body.removeChild(N)}};return e.jsxs(z,{className:"overflow-hidden",children:[o&&e.jsxs("div",{className:"bg-gray-50 border-b px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:n})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(K,{variant:"outline",size:"sm",onClick:F,disabled:!b||c,children:[e.jsx(Ut,{className:"h-4 w-4 mr-1"}),"Download"]})})]}),e.jsxs("div",{className:"relative",style:{height:a},children:[c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Lt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading PDF..."})]})}),j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 p-4",children:e.jsx(V,{className:"max-w-md",children:e.jsx(Y,{className:"text-red-600",children:j})})}),b&&e.jsx("iframe",{src:`${b}#toolbar=0&navpanes=0&scrollbar=1`,className:"w-full h-full border-0",onLoad:P,onError:h,title:n})]})]})}function qe({formType:t,formData:s,title:n,description:a,language:o="en",onSign:r,onBack:c,renderPreview:i,signatureLabel:j,agreementText:x,federalCompliance:p,pdfEndpoint:g,usePDFPreview:f=!1,pdfUrl:y,onPdfGenerated:T}){const[C,w]=v.useState(!1),[A,b]=v.useState(""),[k,P]=v.useState(!1),[h,F]=v.useState(null),[N,R]=v.useState(!1),[D,O]=v.useState(null),m=v.useRef(null),S={en:{reviewTitle:"Review Your Information",reviewDescription:"Please carefully review all information before signing",editButton:"Edit Information",signatureTitle:"Electronic Signature",signatureInstructions:"Please sign in the box below using your mouse or touch screen",clearSignature:"Clear",submitSignature:"Submit Signature",agreementLabel:"I certify that the information provided is true and correct",signatureRequired:"Please provide your signature",agreementRequired:"You must agree to the certification statement",signedSuccessfully:"Document signed successfully",signedAt:"Signed at",ipAddress:"IP Address",viewDocument:"View Document",federalNotice:"This is a federal form that will be retained for",witnessRequired:"This form requires witness verification"},es:{reviewTitle:"Revise Su Información",reviewDescription:"Por favor revise cuidadosamente toda la información antes de firmar",editButton:"Editar Información",signatureTitle:"Firma Electrónica",signatureInstructions:"Por favor firme en el cuadro a continuación usando su mouse o pantalla táctil",clearSignature:"Limpiar",submitSignature:"Enviar Firma",agreementLabel:"Certifico que la información proporcionada es verdadera y correcta",signatureRequired:"Por favor proporcione su firma",agreementRequired:"Debe aceptar la declaración de certificación",signedSuccessfully:"Documento firmado exitosamente",signedAt:"Firmado en",ipAddress:"Dirección IP",viewDocument:"Ver Documento",federalNotice:"Este es un formulario federal que se conservará durante",witnessRequired:"Este formulario requiere verificación de testigo"}}[o];v.useEffect(()=>(y?F(y):f&&g&&q(),()=>{F(null)}),[f,g,y]);const q=async()=>{if(g){R(!0),O(null);try{const _=(await Te.post(g,{employee_data:s},{headers:{"Content-Type":"application/json"}})).data.data.pdf;F(_),T&&_&&T(_)}catch(l){console.error("Error loading PDF:",l),console.error("PDF generation request data:",{employee_data:s}),O("Failed to load PDF preview")}finally{R(!1)}}},I=()=>{var l;(l=m.current)==null||l.clear(),b("")},d=()=>{var l,_;if(!((l=m.current)!=null&&l.isEmpty())&&C){const L={signature:m.current.toDataURL(),signedAt:new Date().toISOString(),ipAddress:"xxx.xxx.xxx.xxx",userAgent:window.navigator.userAgent,formType:t,formData:s,certificationStatement:x||S.agreementLabel,federalCompliance:p};P(!0),r(L)}else(_=m.current)!=null&&_.isEmpty()?b(S.signatureRequired):C||b(S.agreementRequired)};return k?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:S.signedSuccessfully})]}),e.jsx(z,{children:e.jsx($,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[S.signedAt,":"]}),e.jsx("span",{className:"font-medium",children:ds(new Date,"PPpp")})]}),p&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[S.federalNotice," ",p.retentionPeriod]})})]})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n}),a&&e.jsx("p",{className:"text-gray-600",children:a})]}),f&&(y||g)?e.jsx("div",{className:"space-y-4",children:N?e.jsx(z,{children:e.jsx($,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Lt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Generating PDF preview..."})]})})}):D?e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsx(Re,{className:"h-4 w-4 text-red-600"}),e.jsx(Y,{className:"text-red-800",children:D})]}):y||h?e.jsx(Xt,{pdfData:y||h,title:`${n} Preview`,height:"400px",showToolbar:!0}):null}):e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"h-5 w-5"}),e.jsx("span",{children:S.reviewTitle})]})}),e.jsx($,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:i&&i(s)})})]}),p&&e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Re,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{className:"text-blue-800",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:p.formName}),p.requiresWitness&&e.jsx("p",{className:"text-sm",children:S.witnessRequired})]})})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-5 w-5"}),e.jsx("span",{children:S.signatureTitle})]})}),e.jsxs($,{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:S.signatureInstructions}),e.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden",children:e.jsx(nt,{ref:m,canvasProps:{className:"w-full h-48 bg-white"},backgroundColor:"white",penColor:"black"})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-start",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),o==="es"?"Las firmas electrónicas tienen el mismo nivel de autenticidad y validez legal que las firmas físicas según la Ley ESIGN y UETA.":"Electronic signatures have the same level of authenticity and legal validity as physical signatures under the ESIGN Act and UETA."]})}),e.jsx("div",{className:"space-y-3",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:l=>{w(l.target.checked),b("")},className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:x||S.agreementLabel})]})}),A&&e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsx(Re,{className:"h-4 w-4 text-red-600"}),e.jsx(Y,{className:"text-red-800",children:A})]}),j&&e.jsx("div",{className:"text-sm text-gray-600 text-center",children:j}),e.jsxs("div",{className:"flex gap-4",children:[c&&e.jsx(K,{variant:"outline",onClick:c,className:"flex-1",children:S.editButton}),e.jsx(K,{variant:"outline",onClick:I,className:"flex-1",children:S.clearSignature}),e.jsxs(K,{onClick:d,className:"flex-1",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),S.submitSignature]})]})]})]})]})}function Pe(t){const[s,n]=v.useState([]),[a,o]=v.useState({}),[r,c]=v.useState(!1),i=v.useCallback(async g=>{if(!t)return{valid:!0,errors:[]};c(!0);try{const f=await t(g);return n(f.errors||[]),o(f.fieldErrors||{}),f}catch(f){const y=f instanceof Error?f.message:"Validation failed";return n([y]),{valid:!1,errors:[y]}}finally{c(!1)}},[t]),j=v.useCallback(()=>{n([]),o({})},[]),x=v.useCallback((g,f)=>{o(y=>({...y,[g]:f}))},[]),p=v.useCallback(g=>{o(f=>{const y={...f};return delete y[g],y})},[]);return{errors:s,fieldErrors:a,isValidating:r,validate:i,clearErrors:j,setFieldError:x,clearFieldError:p}}const ze=({text:t,className:s=""})=>{if(t.includes("<table")){const a=t.split(/(<table[\s\S]*?<\/table>)/g);return e.jsx("div",{className:`font-sans text-gray-700 ${s}`,children:a.map((o,r)=>{if(o.startsWith("<table"))return e.jsx("div",{dangerouslySetInnerHTML:{__html:o},className:"my-4"},r);{const c=o.split(/\*\*(.*?)\*\*/g);return e.jsx("div",{className:"whitespace-pre-wrap",children:c.map((i,j)=>j%2===0?e.jsx("span",{children:i},j):e.jsx("strong",{className:"font-bold",children:i},j))},r)}})})}const n=t.split(/\*\*(.*?)\*\*/g);return e.jsx("div",{className:`whitespace-pre-wrap font-sans text-gray-700 ${s}`,children:n.map((a,o)=>o%2===0?e.jsx("span",{children:a},o):e.jsx("strong",{className:"font-bold",children:a},o))})},Vs=`**AT WILL EMPLOYMENT**

Your employment relationship with the Hotel is 'At-Will' which means that it is a voluntary one which may by be terminated by either the Hotel or yourself, with or without cause, and with or without notice, at any time. Nothing in these policies shall be interpreted to be in conflict with or to eliminate or modify in any way the 'employment-at-will' status of Hotel associates.

**WORKPLACE VIOLENCE PREVENTION POLICY**

The Hotel strives to maintain a productive work environment free of violence and the threat of violence. We are committed to the safety of our associates, vendors, customers and visitors.

The Hotel does not tolerate any type of workplace violence committed by or against associates. Any threats or acts of violence against an associate, vendor customer, visitor or property will not be tolerated. Any associate who threatens violence or acts in a violent manner while on Hotel premises, or during working hours will be subject to disciplinary action, up to and including termination. Where appropriate, the Hotel will report violent incidents to local law enforcement authorities.

A violent act, or threat of violence, is defined as any direct or indirect action or behavior that could be interpreted, in light of known facts, circumstances and information, by a reasonable person, as indicating the potential for or intent to harm, endanger or inflict pain or injury on any person or property.

Examples of prohibited conduct include but are not limited to:
• Physical assault, threat to assault or stalking an associate or customer;
• Possessing or threatening with a weapon on hotel premises;
• Intentionally damaging property of the Hotel or personal property of another;
• Aggressive or hostile behavior that creates a reasonable fear of injury to another person;
• Harassing or intimidating statements, phone calls, voice mails, or e-mail messages, or those which are unwanted or deemed offensive by the receiver, including cursing and/or name calling;
• Racial or cultural epithets or other derogatory remarks associated with hate crime threats.
• Conduct that threatens, intimidates or coerces another associate, customer, vendor or business associate
• Use of hotel resources to threaten, stalk or harass anyone at the workplace or outside of the workplace.

The Hotel treats threats coming from an abusive personal relationship as it does other forms of violence and associates should promptly inform their immediate supervisor or General Manager of any protective or restraining order that they have obtained that lists the workplace as a protected area.

Any associate who feels threatened or is subjected to violent conduct or who witnesses threatening or violent conduct at the workplace should report the incident to his or her supervisor or any member of management immediately. In addition, associates should report all suspicious individuals or activities as soon as possible.

Associates who are not comfortable reporting incidents at the property level may contact the administrative office at **(908) 444-8139** or via email at **njbackoffice@lakecrest.com**. A representative will promptly and thoroughly investigate all reports of threats or actual violence as well as suspicious individuals and activities at the workplace.

The Hotel will not retaliate against associates making good-faith reports of violence, threats or suspicious individuals or activities.

Anyone determined to be responsible for threats of or actual violence or other conduct that is in violation of this policy will be subject to disciplinary action, up to and including termination.

In order to maintain workplace safety and the integrity of its investigation, the Hotel may suspend associates suspected of workplace violence or threats of violence, either with or without pay, pending investigation.

The Hotel strictly forbids any employee to possess, concealed, or otherwise, any weapon on their person while on the Hotel premises, including but not limited to fire arms. The Hotel also forbids brandishing firearms in the parking lot (other than for lawful self-defense) and prohibiting threats or threatening behavior of any type.

**SURVEILLANCE**

For safety, visual and audio recording devices are installed throughout the property and the footage is recorded.

**PAY, PAY PERIOD AND PAY DAY**

Associates are paid biweekly (every other week) for their hours worked during the preceding pay period.

• A pay period consists of two consecutive pay weeks, at 7 days per week.

For employees who haves elected direct deposit as payment method, a pay stub will not be issued at the Hotel. Contact your General Manager for electronic access to your pay stub through a payroll portal. For employees who do not select direct deposit, a check and pay stub will be made available for you, customarily on Friday by 1PM local time. Employee pay checks will not be released to anyone other than you, except with your written permission (required for every instance), and submitted to your General Manager.

Non-exempt associates will be paid for all work in excess of 40 hours a week at hourly rate plus ½ hourly wages, in accordance with Federal and State laws.
• Overtime must be approved by your manager before it is performed.
• Personal Time Off will not be counted towards hours worked for overtime calculations.

Failure to work scheduled overtime or overtime worked without prior authorization from the supervisor may result in disciplinary action, up to and including possible termination of employment.

**FRATERNIZING WITH GUESTS AND DATING AT THE WORK PLACE**

Contact with guests, other than in the normal course of day-to-day operations of the hotel is not permitted at any time. Unauthorized presence at guest functions, or unauthorized presence anywhere on the hotel premises, including guest rooms, may be considered a violation of Hotel policy and disciplinary action may result.

Supervisors and associates under their supervision are strongly discouraged from forming romantic or sexual relationships. Such relationships can create the impression of impropriety in terms and conditions of employment and can interfere with productivity and the overall work environment.

If you are unsure of the appropriateness of an interaction with another associate of the Hotel, contact any member of management or the administrative office for guidance.

If you are encouraged or pressured to become involved with a customer or associate in a way that makes you feel uncomfortable, you should also notify management immediately.

**CONTACT WITH MEDIA**

In the event that you are contacted by any member of the media or any outside party regarding hotel business or incident, occurring on or off property, kindly refer such inquiries to your General Manager.

**ELECTRONIC MAIL**

Electronic mail may be provided to facilitate the business of the Hotel. It is to be used for business purposes only. The electronic mail and other information systems are not to be used in a way that may be disruptive, offensive to others, or harmful to morale.

Specifically, it is against Hotel policy to display or transmit sexually explicit messages, or cartoons. Therefore, any such transmission or use of e-mail that contain ethnic slurs, racial epithets, or anything else that may be construed as harassment or offensive to others based on their race, national origin, sex, sexual orientation, age, disability, religious, or political beliefs is strictly prohibited and could result in appropriate disciplinary action up to and including termination.

Destroying or deleting e-mail messages which are considered business records is strictly prohibited. The Hotel reserves the right to monitor all electronic mail retention and take appropriate management action, if necessary, including disciplinary action, for violations of this policy up to and including termination.

The Hotel reserves the right to take immediate action, up to and including termination, regarding activities (1) that create security and/or safety issues for the Hotel, associates, vendors, network or computer resources, or (2) that expend Hotel resources on content the Hotel in its sole discretion determines lacks legitimate business content/purpose, (3) other activities as determined by Hotel as inappropriate, or (4) violation of any federal or state regulations.

**REMOVAL OF ITEMS OFF HOTEL PREMISES**

No items other than an associate's own personal property may be removed from Hotel premises without authorization. Permission must be obtained from your General Manager in order to remove any item from the hotel premises. (An example of such is a small article of minimal value that the guest did not take with him/her). The hotel has the right of inspection and retention of any such items suspected to being removed from the premises. At no time is food of any type or form, full or partial, containers of alcoholic beverages to be removed from the Hotel.

**ACCESS TO HOTEL FACILITIES AND SOLICITATION POLICY**

The hotel and its facilities are for the use and enjoyment of the hotel guests. Associates are to leave the building and premises immediately after their scheduled shifts. Returning to the hotel after scheduled hours for any reason is not permitted without previous approval from the General Manager.

Only associates, guests, visitors, vendors and suppliers doing business with the Hotel or its affiliates are permitted at any time on the Hotel's premises. Persons other than associates of the Hotel may never engage in solicitation, distribution or postings of written or printed materials of any nature at any time in or on the Hotel's premises.

Employees are prohibited from engaging in solicitation or distribution of any kind during working time, in any working areas, including guest rooms, guest dining areas, parking lot or areas within the Hotel where guests congregate (lobby, lounge, etc.).

For the purpose of this policy, "working time" includes the working time of both the associate doing the solicitation or distribution and the associate to whom it is directed, but does not include break, lunch or other duty-free periods of time.

Off-duty associates are not permitted access to the interior of the Hotel's premises except where they are attending a Hotel event, or to conduct business with the Hotel's management or administrative office that cannot be conducted during the associate's regular work shift. Unless explicitly approved by the asset manager, associates are not permitted to stay on property.

**HAZARD COMMUNICATION PLAN**

The Hotel values employee safety and gives it the utmost priority. A Hazard Communication Plan is located in the Hotel, which each employee is required to review prior to start of their first shift of work. Please ask your General Manager where it is located.

**PAID TIME OFF AND HOLIDAY POLICY**

The Company offers PTO to 'regular full-time and part-time associates' only. Temporary/seasonal associates do not earn PTO. Eligible associates begin to accrue PTO immediately, at hire and accrual is rate is only based on regular hours worked. This PTO can be used for any reason that the associate deems appropriate, with advance notice and management approval, and is paid at the rate of pay when PTO is paid out. All PTO earned during each calendar year will be paid out on the last payroll of the calendar year. If associates choose, they may elect to carry over no more than 5 hours of PTO can be carried over into the following year. The rate of accrual and maximum PTO hours that an associate may accrue during a given calendar year will vary with the associate's length of service and hours worked.

<table style="width: 100%; border-collapse: collapse; margin: 16px 0;">
  <thead>
    <tr style="background-color: #f3f4f6;">
      <th style="border: 1px solid #d1d5db; padding: 8px; text-align: left; font-weight: bold;">YEAR OF EMPLOYMENT</th>
      <th style="border: 1px solid #d1d5db; padding: 8px; text-align: left; font-weight: bold;">PTO ACCRUAL RATE<br/>NON-EXEMPT/HOURLY ASSOCIATES<br/>(PER PAID HOUR)</th>
      <th style="border: 1px solid #d1d5db; padding: 8px; text-align: left; font-weight: bold;">ACCRUED PTO PER ANNIVERSARY YEAR<br/>(ASSUMING 2080 HOURS WORKED PER YR)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border: 1px solid #d1d5db; padding: 8px;">1 - 3</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">0.019</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">5 days (40 hours)</td>
    </tr>
    <tr style="background-color: #f9fafb;">
      <td style="border: 1px solid #d1d5db; padding: 8px;">4 - 8</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">0.027</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">7 days (56 hours)</td>
    </tr>
    <tr>
      <td style="border: 1px solid #d1d5db; padding: 8px;">9 +</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">0.038</td>
      <td style="border: 1px solid #d1d5db; padding: 8px;">10 days (80 hours)</td>
    </tr>
  </tbody>
</table>

Notes:
• PTO is granted as a benefit and in order to be paid for this benefit, the day(s) must be taken off.
• Upon termination of employment, associate is not be entitled for payment of any unused PTO, regardless of when it was earned or reason for termination.
• All requests for days off/PTO must be in submitted in advance in writing and approved by your manager.
• Associates can not borrow from their PTO and will accrue PTO when working at the rates specified in the table above.
• PTO is paid at the pay rate at time of payment.

The Company pays associates for six holidays, in addition to accrued PTO. Full time employees are paid for 8 hours, at regular pay. Part time employees, classified as working less than 30 hours a week will be paid for 4 hours.

• New Year's Day (January 1)
• Memorial Day
• Independence Day (July 4)
• Labor Day
• Thanksgiving Day
• Christmas Day (December 25)

The above policy supersedes any previously communicated policies, including any previously issued employee handbooks.

**DRUG-FREE WORKPLACE POLICY**

The Hotel is committed to maintaining a drug-free workplace. The use, possession, distribution, or being under the influence of illegal drugs or alcohol during work hours is strictly prohibited. Employees may be subject to drug testing as a condition of employment, after accidents, or based on reasonable suspicion. Violation of this policy will result in immediate termination.

**BACKGROUND CHECK AUTHORIZATION**

As a condition of employment, all employees must pass a background check. This may include criminal history, employment verification, education verification, and credit checks where applicable. By accepting employment, you authorize the Hotel to conduct these checks both pre-employment and during employment as necessary.

**MANDATORY ARBITRATION AGREEMENT**

Any dispute arising out of or relating to your employment, including claims of discrimination, harassment, wrongful termination, or wage disputes, shall be resolved through binding arbitration rather than court proceedings. By accepting employment, you waive your right to a jury trial for employment-related disputes.

**EMPLOYEE HANDBOOK ACKNOWLEDGMENT**

I acknowledge that I have received access to the Employee Handbook and understand it is my responsibility to read and comply with all policies contained therein. I understand that the handbook may be updated at any time and it is my responsibility to stay informed of changes. The handbook does not constitute an employment contract.

**WEAPONS POLICY**

The Company strictly forbids any employee to possess, concealed, or otherwise, any weapon on their person while on the Hotel premises. This includes but is not limited to fire arms, knives, etc and regardless of whether an Employee possesses any governmental licenses and/or approvals. The Company also forbids brandishing firearms in the parking lot (other than for lawful self-defense) and prohibiting threats or threatening behavior of any type. Violation of this policy may lead to disciplinary action, up to and including termination of employment.`,Tt={title:"EQUAL EMPLOYMENT OPPORTUNITY",content:'Your employer (the "Hotel") provides equal employment opportunities to all employees and applicants for employment without regard to race, color, religion, sex, sexual orientation, national origin, age, disability, genetic predisposition, military or veteran status in accordance with applicable federal, state or local laws. This policy applies to all terms and conditions of employment, including but not limited to, hiring, placement, promotion, termination, transfer, leaves of absence, compensation, and training.'},It={title:"SEXUAL AND OTHER UNLAWFUL HARASSMENT",content:`We are committed to providing a work environment that is free from sexual discrimination and sexual harassment in any form, as well as unlawful harassment based upon any other protected characteristic. In keeping with that commitment, we have established procedures by which allegations of sexual or other unlawful harassment may be reported, investigated and resolved. Each manager and associate has the responsibility to maintain a workplace free of sexual and other unlawful harassment. This duty includes ensuring that associates do not endure insulting, degrading or exploitative sexual treatment.

Sexual harassment is a form of associate misconduct which interferes with work productivity and wrongfully deprives associates of the opportunity to work in an environment free from unsolicited and unwelcome sexual advances, requests for sexual favors and other such verbal or physical conduct. Sexual harassment has many different definitions and it is not the intent of this policy to limit the definition of sexual harassment, but rather to give associates as much guidance as possible concerning what activities may constitute sexual harassment.

Prohibited conduct includes, but is not limited to, unwelcome sexual advances, requests for sexual favors and other similar verbal or physical contact of a sexual nature where:
• Submission to such conduct is either an explicit or implicit condition of employment;
• Submission to or rejection of such conduct is used as a basis for making an employment-related decision;
• The conduct unreasonably interferes with an individual's work performance; or
• The conduct creates a hostile, intimidating or offensive work environment.

Sexual harassment may be male to female, female to male, female to female or male to male. Similarly, other unlawful harassment may be committed by and between individuals who share the same protected characteristics, such as race, age or national origin. Actions which may result in charges of sexual harassment include, but are not limited to, the following:
• Unwelcome physical contact, including touching on any part of the body, kissing, hugging or standing so close as to brush up against another person;
• Requests for sexual favors either directly or indirectly;
• Requiring explicit or implicit sexual conduct as a condition of employment, a condition of obtaining a raise, a condition of obtaining new duties or any type of advancement in the workplace; or
• Requiring an associate to perform certain duties or responsibilities simply because of his or her gender or other protected characteristic.

Other behavior that may seem innocent or acceptable to some people can constitute sexual harassment to others. Prohibited behaviors include, but are not limited to:
• unwelcome sexual flirtations, advances, jokes or propositions;
• unwelcome comments about an individual's body or personal life;
• openly discussing intimate details of one's own personal life;
• sexually degrading words to describe an individual; or
• displays in the workplace of objects, pictures, cartoons or writings, which might be perceived as sexually suggestive.

Unwelcome conduct such as degrading jokes, foul language direct to or at a person, racial slurs, comments, cartoons or writing based upon any other protected characteristic is similarly prohibited.

All associates are required to report any incidents of sexual or other unlawful harassment of which they have knowledge. Similarly, if you ever feel aggrieved because of sexual harassment, you have an obligation to communicate the problem immediately and should report such concerns to your manager, and/or the offending associate directly. If this is not an acceptable option, you should report your concern directly to the administrative office confidentially. In all cases in which a manager or another member of management is notified first, the administrative office should be notified immediately. Management has an obligation to report any suspected violations of this policy to the asset manager. A manager who is aware of a violation, even if the associate is outside the manager's immediate area of supervision, but doesn't report it, will be held accountable for his or her inaction. The asset manager shall conduct a prompt investigation of the allegations to obtain the facts from any and all parties or witnesses.

While we will attempt to maintain the confidentiality of the information received, it will not always be possible to do so. Should the facts support the allegations made, we will remedy the situation and, if appropriate under the circumstances, take disciplinary action up to and including termination.`},Ys=`**CONFIDENTIAL ASSOCIATE HOTLINE**

We rely on our associates to protect the assets and reputation of our company. If you have knowledge of:

**THEFT, HARASSMENT, ABUSE, DANGEROUS, SUSPICIOUS OR QUESTIONABLE PRACTICES**

Send an e-mail to: **feedback@lakecrest.com**

**ALL REPORTS WILL BE CONFIDENTIAL AND TAKEN SERIOUSLY**

When reporting, please remember to:
• Identify the name of the hotel where the incident occurred
• Explain details of the Incident to include:
  - Date(s)
  - Time(s)
  - Name(s) of involved person(s)
  - A clear, detailed account of the event

Our 'No Retaliation' policy strictly prohibits any adverse action taken on employees who, in good faith, file a report.`,Gs=`In consideration of my employment, I agree to conform to the rules and regulations of the Hotel. I understand my employment and compensation can be terminated, with or without cause, with or without notice, at any time and at the option of either the Hotel or myself. I understand that no representative of the Hotel has any authority to enter into any agreement of employment for any specific period of time or to make any agreement contrary to this paragraph. I further understand that if, during the course of my employment, I acquire confidential or proprietary information about the Company or any division thereof, and its clients, that this information is to be handled in strict confidence and will not be disclosed to or discussed with outsiders during the term of my employment or any time thereafter. I also understand that should I have any questions or concerns, at any point during my employment, I may speak to my direct supervisor, or if necessary, contact the administrative office at **(908) 444-8139** or via email at **njbackoffice@lakecrest.com**.

Note - while every attempt has been made to create these policies consistent with federal and state law, if an inconsistency arises, the policy(ies) will be enforced consistent with the applicable law.

My signature below certifies that I have read and understood the above information as well as the remainder of the contents asked of me to review. Further, my signature below certifies that I have located the Hotel's Hazard Communication Plan and I have reviewed it. I understand that if I have any questions, at any point during my employment, I should go to my direct supervisor, or the General Manager immediately.`;function Za({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState(1),[x,p]=v.useState(""),[g,f]=v.useState(""),[y,T]=v.useState(""),[C,w]=v.useState(!1),[A,b]=v.useState(!1),[k,P]=v.useState(null),[h,F]=v.useState(!1),[N,R]=v.useState(!1),[D,O]=v.useState(!1),[m,u]=v.useState(!1),[S,q]=v.useState(!1),d=(()=>{var se,ve;const H=sessionStorage.getItem("onboarding_personal-info_data");if(H)try{const we=JSON.parse(H),ye=((se=we.personalInfo)==null?void 0:se.firstName)||"",vt=((ve=we.personalInfo)==null?void 0:ve.lastName)||"";if(ye&&vt)return(ye.charAt(0)+vt.charAt(0)).toUpperCase()}catch(we){console.warn("Failed to parse personal info data:",we)}return r!=null&&r.firstName&&(r!=null&&r.lastName)?(r.firstName.charAt(0)+r.lastName.charAt(0)).toUpperCase():""})(),l=(H,se)=>H.trim().length<2?!1:d&&H.trim()!==d?`Initials must match your name (${d})`:!0,_={currentSection:i,companyPoliciesInitials:x,sexualHarassmentInitials:y,eeoInitials:g,acknowledgmentChecked:C,isSigned:A,signatureData:k,section1Complete:h,section2Complete:N,section3Complete:D,section4Complete:m,section5Complete:S},{errors:L}=Pe(),{saveStatus:ee}=pe(_,{onSave:async H=>{await a(t.id,H)}});v.useEffect(()=>{const H=sessionStorage.getItem(`onboarding_${t.id}_data`);if(H)try{const se=JSON.parse(H);j(se.currentSection||1),p(se.companyPoliciesInitials||""),T(se.sexualHarassmentInitials||""),f(se.eeoInitials||""),w(se.acknowledgmentChecked||!1),P(se.signatureData||null),b(se.isSigned||!1),F(se.section1Complete||!1),R(se.section2Complete||!1),O(se.section3Complete||!1),u(se.section4Complete||!1),q(se.section5Complete||!1)}catch(se){console.warn("Failed to parse saved company policies data:",se)}else s.completedSteps.includes(t.id)&&(b(!0),q(!0),u(!0),O(!0),R(!0),F(!0),j(5))},[t.id,s.completedSteps]);const G=()=>{switch(i){case 1:if(l(x)===!0)F(!0),j(2);else{alert("Please provide valid initials for the Company Policies section");return}break;case 2:if(l(g)===!0)R(!0),j(3);else{alert("Please provide valid initials for the Equal Employment Opportunity section");return}break;case 3:if(l(y)===!0)O(!0),j(4);else{alert("Please provide valid initials for the Sexual Harassment section");return}break;case 4:u(!0),j(5);break;case 5:q(!0);break}Me()},te=()=>{i>1&&(j(i-1),Me())},xe=async H=>{P(H),b(!0);const se=l(x),ve=l(g),we=l(y);if(se===!0&&ve===!0&&we===!0&&C){const ye={..._,signatureData:H,isSigned:!0,completedAt:new Date().toISOString()};await a(t.id,ye),await n(t.id,ye)}else{const ye=[];se!==!0&&ye.push(`Company Policies: ${se}`),ve!==!0&&ye.push(`EEO Policy: ${ve}`),we!==!0&&ye.push(`Sexual Harassment Policy: ${we}`),C||ye.push("Please check the acknowledgment agreement"),alert(`Please complete all required fields before signing:
`+ye.join(`
`))}},U=l(x)===!0&&l(g)===!0&&l(y)===!0&&C,Z=U&&A&&S,X=h&&N&&D&&m,Q={en:{title:"Company Policies & Terms",description:"Please read through all company policies in the sections below. You will need to provide your initials on specific sections and accept the terms.",section1Title:"Section 1: All Company Policies",section2Title:"Section 2: Equal Employment Opportunity",section3Title:"Section 3: Sexual and Other Unlawful Harassment",section4Title:"Section 4: Confidential Associate Hotline",section5Title:"Section 5: Final Acknowledgment & Signature",section1Desc:"Core policies including employment terms, workplace violence prevention, pay policies, technology usage, and benefits",section2Desc:"Equal employment opportunity commitment and policies",section3Desc:"Sexual harassment prevention and reporting procedures",section4Desc:"Confidential reporting hotline information",section5Desc:"Final acknowledgment and digital signature",continue:"Continue to Next Section",back:"Back to Previous Section",initialsLabel:"Your initials to acknowledge reading and understanding:",initialsValidationError:"Initials must match your name",acknowledgmentTitle:"Acknowledgment of Receipt & Agreement",acknowledgmentText:"I have read, understood, and agree to all company policies, terms of employment, and confidentiality requirements outlined above.",signatureTitle:"Digital Signature Required",completionTitle:"Company Policies Acknowledged!",completionMessage:"Thank you for reviewing and accepting our company policies.",incompleteTitle:"Complete All Requirements",toProceeed:"To proceed, please complete all sections and requirements.",confidentialHotlineTitle:"Confidential Associate Hotline",acknowledgmentSectionTitle:"ACKNOWLEDGEMENT OF RECEIPT"},es:{title:"Políticas de la Empresa y Términos",description:"Por favor, lea todas las políticas de la empresa en las secciones a continuación. Deberá proporcionar sus iniciales en secciones específicas y aceptar los términos.",section1Title:"Sección 1: Todas las Políticas de la Empresa",section2Title:"Sección 2: Igualdad de Oportunidades de Empleo",section3Title:"Sección 3: Acoso Sexual y Otros Acosos Ilegales",section4Title:"Sección 4: Línea Directa Confidencial del Asociado",section5Title:"Sección 5: Reconocimiento Final y Firma",section1Desc:"Políticas centrales incluyendo términos de empleo, prevención de violencia en el lugar de trabajo, políticas de pago, uso de tecnología y beneficios",section2Desc:"Compromiso y políticas de igualdad de oportunidades de empleo",section3Desc:"Prevención de acoso sexual y procedimientos de denuncia",section4Desc:"Información de línea directa de denuncia confidencial",section5Desc:"Reconocimiento final y firma digital",continue:"Continuar a la Siguiente Sección",back:"Volver a la Sección Anterior",initialsLabel:"Sus iniciales para reconocer lectura y comprensión:",initialsValidationError:"Las iniciales deben coincidir con su nombre",acknowledgmentTitle:"Reconocimiento de Recibo y Acuerdo",acknowledgmentText:"He leído, entendido y acepto todas las políticas de la empresa, términos de empleo y requisitos de confidencialidad descritos anteriormente.",signatureTitle:"Firma Digital Requerida",completionTitle:"¡Políticas de la Empresa Reconocidas!",completionMessage:"Gracias por revisar y aceptar nuestras políticas de la empresa.",incompleteTitle:"Complete Todos los Requisitos",toProceeed:"Para continuar, por favor complete todas las secciones y requisitos.",confidentialHotlineTitle:"Línea Directa Confidencial del Asociado",acknowledgmentSectionTitle:"RECONOCIMIENTO DE RECIBO"}}[o],ue=H=>{if(H===1&&h||H===2&&N||H===3&&D||H===4&&m||H===5&&S)return e.jsx(J,{className:"h-5 w-5 text-green-600"});if(H===i)switch(H){case 1:return e.jsx(re,{className:"h-5 w-5 text-blue-600"});case 2:return e.jsx($e,{className:"h-5 w-5 text-blue-600"});case 3:return e.jsx(Ue,{className:"h-5 w-5 text-blue-600"});case 4:return e.jsx(ae,{className:"h-5 w-5 text-blue-600"});case 5:return e.jsx(Fe,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(ae,{className:"h-5 w-5 text-blue-600"})}switch(H){case 1:return e.jsx(re,{className:"h-5 w-5 text-gray-400"});case 2:return e.jsx($e,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(Ue,{className:"h-5 w-5 text-gray-400"});case 4:return e.jsx(ae,{className:"h-5 w-5 text-gray-400"});case 5:return e.jsx(Fe,{className:"h-5 w-5 text-gray-400"});default:return e.jsx(ae,{className:"h-5 w-5 text-gray-400"})}};return e.jsx(le,{errors:L,saveStatus:ee,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx($e,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Q.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:Q.description})]}),e.jsx("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[1,2,3,4,5].map(H=>{const se=H===1&&h||H===2&&N||H===3&&D||H===4&&m||H===5&&S,ve=H<i||se;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${H===i?"border-blue-600 bg-blue-50":se?"border-green-600 bg-green-50":"border-gray-300 bg-gray-50"} ${ve?"cursor-pointer hover:scale-110 transition-transform":""}`,onClick:()=>{ve&&(j(H),Me())},children:e.jsx("span",{className:`text-sm font-medium ${H===i?"text-blue-600":se?"text-green-600":"text-gray-400"}`,children:se?"✓":H})}),H<5&&e.jsx("div",{className:`w-12 h-0.5 ml-2 ${H===1&&h||H===2&&N||H===3&&D||H===4&&m?"bg-green-300":"bg-gray-300"}`})]},H)})}),Z&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:Q.completionMessage})]}),e.jsxs("div",{className:"space-y-6",children:[i===1&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[ue(1),e.jsx("span",{children:Q.section1Title})]}),e.jsx("p",{className:"text-sm text-gray-600",children:Q.section1Desc})]}),e.jsxs($,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg max-h-[600px] overflow-y-auto",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(ze,{text:Vs})})})}),e.jsxs(z,{className:"border-orange-200 mb-6",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:"Company Policies Acknowledgment"}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:o==="en"?"Initials Required":"Iniciales Requeridas"})]})}),e.jsx($,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{htmlFor:"company-initials",className:"text-sm",children:Q.initialsLabel}),e.jsx(M,{id:"company-initials",value:x,onChange:H=>p(H.target.value.toUpperCase()),placeholder:d||"XX",className:"w-24 text-center font-mono text-lg",maxLength:4}),l(x)===!0&&e.jsx(De,{className:"h-4 w-4 text-green-600"}),typeof l(x)=="string"&&x.trim().length>=2&&e.jsxs("span",{className:"text-xs text-red-600",children:[Q.initialsValidationError," (",d,")"]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(K,{onClick:G,className:"px-6 py-2",children:[e.jsx("span",{children:Q.continue}),e.jsx(Ze,{className:"h-4 w-4 ml-2"})]})})]})]}),i===2&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[ue(2),e.jsx("span",{children:Q.section2Title})]}),e.jsx("p",{className:"text-sm text-gray-600",children:Q.section2Desc})]}),e.jsxs($,{children:[e.jsxs(z,{className:"border-orange-200 mb-6",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:Tt.title}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:o==="en"?"Initials Required":"Iniciales Requeridas"})]})}),e.jsxs($,{children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg max-h-96 overflow-y-auto mb-4",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(ze,{text:Tt.content})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{htmlFor:"eeo-initials",className:"text-sm",children:Q.initialsLabel}),e.jsx(M,{id:"eeo-initials",value:g,onChange:H=>f(H.target.value.toUpperCase()),placeholder:d||"XX",className:"w-24 text-center font-mono text-lg",maxLength:4}),l(g)===!0&&e.jsx(De,{className:"h-4 w-4 text-green-600"}),typeof l(g)=="string"&&g.trim().length>=2&&e.jsxs("span",{className:"text-xs text-red-600",children:[Q.initialsValidationError," (",d,")"]})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(K,{onClick:te,variant:"outline",className:"px-6 py-2",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:Q.back})]}),e.jsxs(K,{onClick:G,className:"px-6 py-2",children:[e.jsx("span",{children:Q.continue}),e.jsx(Ze,{className:"h-4 w-4 ml-2"})]})]})]})]}),i===3&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[ue(3),e.jsx("span",{children:Q.section3Title})]}),e.jsx("p",{className:"text-sm text-gray-600",children:Q.section3Desc})]}),e.jsxs($,{children:[e.jsxs(z,{className:"border-orange-200 mb-6",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:It.title}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:o==="en"?"Initials Required":"Iniciales Requeridas"})]})}),e.jsxs($,{children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg max-h-96 overflow-y-auto mb-4",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(ze,{text:It.content})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{htmlFor:"sh-initials",className:"text-sm",children:Q.initialsLabel}),e.jsx(M,{id:"sh-initials",value:y,onChange:H=>T(H.target.value.toUpperCase()),placeholder:d||"XX",className:"w-24 text-center font-mono text-lg",maxLength:4}),l(y)===!0&&e.jsx(De,{className:"h-4 w-4 text-green-600"}),typeof l(y)=="string"&&y.trim().length>=2&&e.jsxs("span",{className:"text-xs text-red-600",children:[Q.initialsValidationError," (",d,")"]})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(K,{onClick:te,variant:"outline",className:"px-6 py-2",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:Q.back})]}),e.jsxs(K,{onClick:G,className:"px-6 py-2",children:[e.jsx("span",{children:Q.continue}),e.jsx(Ze,{className:"h-4 w-4 ml-2"})]})]})]})]}),i===4&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[ue(4),e.jsx("span",{children:Q.section4Title})]}),e.jsx("p",{className:"text-sm text-gray-600",children:Q.section4Desc})]}),e.jsxs($,{children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-6",children:e.jsx(ze,{text:Ys})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(K,{onClick:te,variant:"outline",className:"px-6 py-2",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:Q.back})]}),e.jsxs(K,{onClick:G,className:"px-6 py-2",children:[e.jsx("span",{children:Q.continue}),e.jsx(Ze,{className:"h-4 w-4 ml-2"})]})]})]})]}),i===5&&e.jsxs("div",{className:"space-y-6",children:[X&&l(x)===!0&&l(y)===!0&&l(g)===!0&&e.jsxs(z,{className:"border-blue-200 bg-blue-50",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2 text-blue-800",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:Q.acknowledgmentSectionTitle})]})}),e.jsxs($,{children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg max-h-96 overflow-y-auto mb-4",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(ze,{text:Gs,className:"text-sm"})})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:"acknowledgment",checked:C,onCheckedChange:H=>w(H),className:"mt-1"}),e.jsx(E,{htmlFor:"acknowledgment",className:"text-sm leading-relaxed cursor-pointer",children:Q.acknowledgmentText})]})]})]}),U&&X&&!A&&e.jsx(qe,{formType:"company_policies",formTitle:"Company Policy Acknowledgment",formData:{companyPoliciesInitials:x,eeoInitials:g,sexualHarassmentInitials:y,acknowledgmentChecked:C,..._},documentName:"Company Policy Acknowledgment",signerName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||"Employee",signerTitle:r==null?void 0:r.position,onSign:xe,acknowledgments:["I have read and understand all company policies","I agree to the terms of employment","I have provided my initials on required sections"],language:o,usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${(r==null?void 0:r.id)||"test-employee"}/company-policies/generate-pdf`}),(!X||!U)&&e.jsx(z,{className:"bg-blue-50 border-blue-200",children:e.jsx($,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ws,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:Q.incompleteTitle}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:Q.toProceeed}),e.jsxs("ul",{className:"text-left inline-block space-y-1",children:[!X&&e.jsx("li",{children:"• Complete all policy sections"}),l(x)!==!0&&e.jsx("li",{children:"• Provide valid initials for Company Policies section"}),l(g)!==!0&&e.jsx("li",{children:"• Provide valid initials for Equal Employment Opportunity Policy"}),l(y)!==!0&&e.jsx("li",{children:"• Provide valid initials for Sexual Harassment Policy"}),X&&l(x)===!0&&l(y)===!0&&l(g)===!0&&!C&&e.jsx("li",{children:"• Check the acknowledgment agreement"})]})]})]})})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs(K,{onClick:te,variant:"outline",className:"px-6 py-2",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:Q.back})]})})]})]})]})})})}function Js({pdfUrl:t,title:s="PDF Preview",initialZoom:n=100}){const[a,o]=v.useState(n),[r,c]=v.useState(!1);if(!t)return e.jsx(z,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx(ae,{className:"h-12 w-12 mb-4"}),e.jsx("p",{children:"No PDF available for preview"})]})});const i=()=>{o(p=>Math.min(p+25,200))},j=()=>{o(p=>Math.max(p-25,50))},x=()=>{c(!r)};return e.jsxs("div",{className:`space-y-4 ${r?"fixed inset-0 z-50 bg-white p-4":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[a,"%"]}),e.jsx(K,{onClick:j,size:"sm",variant:"outline",disabled:a<=50,children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(K,{onClick:i,size:"sm",variant:"outline",disabled:a>=200,children:e.jsx(_s,{className:"h-4 w-4"})}),e.jsx(K,{onClick:x,size:"sm",variant:"outline",children:e.jsx(js,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-100",children:e.jsx("iframe",{src:`${t}#zoom=${a}`,className:"w-full",title:s,style:{height:r?"calc(100vh - 120px)":"900px",minHeight:r?"calc(100vh - 120px)":"900px",width:"100%"}})}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx("p",{children:"You can also use Ctrl/Cmd + Mouse Wheel to zoom in/out within the PDF viewer"})})]})}function bt({signatureType:t,documentName:s,signerName:n,signerTitle:a,acknowledgments:o,requireIdentityVerification:r=!1,language:c,onSignatureComplete:i,onCancel:j}){const x=v.useRef(null),[p,g]=v.useState(!1),[f,y]=v.useState(""),T="draw",[C,w]=v.useState(!1),[A,b]=v.useState(!1),[k,P]=v.useState(new Array(o.length).fill(!1)),[h,F]=v.useState(""),[N,R]=v.useState(!1),[D,O]=v.useState([]),[m,u]=v.useState({}),[S,q]=v.useState(""),I=U=>({en:{digital_signature:"Digital Signature",signature_required:"Your signature is required to complete this document",draw_signature:"Draw Signature",type_signature:"Type Signature",draw_instruction:"Use your mouse or finger to draw your signature in the box below",type_instruction:"Type your full legal name as it appears on your identification",clear:"Clear",your_name:"Your Full Legal Name",acknowledgments:"Acknowledgments",legal_notices:"Legal Notices and Consents",electronic_signature_consent:"I consent to the use of electronic signatures and understand that they have the same legal effect as handwritten signatures.",identity_verification:"I verify that I am the person identified above and am authorized to sign this document.",document_accuracy:"I certify that all information provided in this document is true and accurate to the best of my knowledge.",terms_conditions:"I have read, understood, and agree to be bound by the terms and conditions of this agreement.",sign_document:"Sign Document",cancel:"Cancel",signature_timestamp:"Signature Timestamp",signature_method:"Signature Method: {method}",ip_address:"IP Address: {ip}",legal_binding:"This signature is legally binding",esign_act_notice:"Electronic Signature Act Notice: By signing electronically, you agree that your electronic signature has the same legal effect as a handwritten signature.",document_retention:"A copy of this signed document will be retained for legal and compliance purposes.",signature_verification:"Signature Verification",all_acknowledgments_required:"All acknowledgments must be checked to proceed.",signature_required_error:"A signature is required to complete this document.",processing:"Processing signature...",metadata_captured:"Compliance metadata captured",audit_trail:"Audit Trail",compliance_status:"Compliance Status: Active"},es:{digital_signature:"Firma Digital",signature_required:"Su firma es requerida para completar este documento",draw_signature:"Dibujar Firma",type_signature:"Escribir Firma",draw_instruction:"Use su mouse o dedo para dibujar su firma en el cuadro de abajo",type_instruction:"Escriba su nombre legal completo como aparece en su identificación",clear:"Limpiar",your_name:"Su Nombre Legal Completo",acknowledgments:"Reconocimientos",legal_notices:"Avisos Legales y Consentimientos",sign_document:"Firmar Documento",cancel:"Cancelar",processing:"Procesando firma..."}})[c][U]||U;v.useEffect(()=>{const U=x.current;if(U){const X=Math.max(window.devicePixelRatio||1,1),ne=600,Q=240;U.style.width=`${ne}px`,U.style.height=`${Q}px`,U.width=Math.floor(ne*X),U.height=Math.floor(Q*X);const ue=U.getContext("2d");ue&&ue.scale(X,X)}fetch("https://api.ipify.org?format=json").then(X=>X.json()).then(X=>F(X.ip)).catch(()=>F("Unknown"));const Z={platform:navigator.platform||"Unknown",language:navigator.language||"en-US",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Unknown",screenResolution:`${window.screen.width}x${window.screen.height}`,userAgent:navigator.userAgent};u(Z),G("Signature capture initiated","User opened digital signature interface")},[]),v.useEffect(()=>{const U=k.every(ne=>ne),Z=f.length>0;R(U&&Z&&C&&(r?A:!0))},[k,f,C,A,r,T]);const d=U=>{if(!x.current)return;g(!0);const Z=x.current,X=Z.getBoundingClientRect(),ne=Z.getContext("2d");if(ne){ne.strokeStyle="#000000",ne.lineWidth=3.5*1,ne.lineCap="round",ne.lineJoin="round";let Q,ue;"touches"in U?(Q=U.touches[0].clientX-X.left,ue=U.touches[0].clientY-X.top):(Q=U.clientX-X.left,ue=U.clientY-X.top),ne.beginPath(),ne.moveTo(Q,ue)}},l=U=>{if(!p||!x.current)return;const Z=x.current,X=Z.getBoundingClientRect(),ne=Z.getContext("2d");if(ne){let Q,ue;"touches"in U?(Q=U.touches[0].clientX-X.left,ue=U.touches[0].clientY-X.top):(Q=U.clientX-X.left,ue=U.clientY-X.top),ne.lineTo(Q,ue),ne.stroke()}},_=()=>{if(!p||!x.current)return;g(!1);const Z=x.current.toDataURL("image/png");y(Z)},L=()=>{if(!x.current)return;const U=x.current,Z=U.getContext("2d");Z&&(Z.clearRect(0,0,U.width,U.height),y(""))},ee=U=>{let Z=0;for(let X=0;X<U.length;X++){const ne=U.charCodeAt(X);Z=(Z<<5)-Z+ne,Z=Z&Z}return Math.abs(Z).toString(16).padStart(8,"0")},G=(U,Z)=>{const X={action:U,timestamp:new Date().toISOString(),details:Z};O(ne=>[...ne,X])},te=async()=>{const U=new Date().toISOString();q(U),G("Consent provided","User consented to electronic signature");const Z=f,X=ee(Z+U);G("Signature captured",`Signature method: draw, Hash: ${X}`);const ne={signatureType:t,signatureData:Z,signedByName:n,signedByTitle:a,ipAddress:h,timestamp:new Date().toISOString(),documentName:s,acknowledgments:o,termsAccepted:C,identityVerified:r?A:!0,userAgent:navigator.userAgent,browserInfo:{platform:m.platform,language:m.language,timezone:m.timezone,screenResolution:m.screenResolution},signatureMethod:T,signatureHash:X,consentTimestamp:U,auditTrail:[...D,{action:"Signature submitted",timestamp:new Date().toISOString(),details:"Digital signature successfully captured and submitted"}]};i(ne)},xe=(U,Z)=>{const X=[...k];X[U]=Z,P(X),G(Z?"Acknowledgment checked":"Acknowledgment unchecked",`Item ${U+1}: ${o[U].substring(0,50)}...`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Fe,{className:"h-8 w-8 text-blue-600"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:I("digital_signature")}),e.jsx("p",{className:"text-gray-600 mt-2",children:I("signature_required")}),e.jsxs(Ge,{variant:"outline",className:"mt-2",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),I("legal_binding")]})]}),e.jsx(z,{className:"bg-blue-50",children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:["Document: ",s]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Signer: ",n]}),a&&e.jsxs("p",{className:"text-sm text-blue-700",children:["Title: ",a]})]})]}),e.jsxs("div",{className:"text-right text-sm text-blue-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),new Date().toLocaleString()]}),h&&e.jsx("div",{children:I("ip_address").replace("{ip}",h)}),m.platform&&e.jsxs("div",{className:"text-xs",children:["Platform: ",m.platform]})]})]})})}),o.length>0&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(W,{className:"text-lg",children:I("acknowledgments")}),e.jsx(Be,{children:"Please read and acknowledge each item below"})]}),e.jsx($,{className:"space-y-4",children:o.map((U,Z)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:`ack-${Z}`,checked:k[Z],onCheckedChange:X=>xe(Z,!!X),className:"mt-1"}),e.jsx(E,{htmlFor:`ack-${Z}`,className:"text-sm leading-relaxed",children:U})]},Z))})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsx(W,{className:"text-lg",children:I("legal_notices")})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:"esign-consent",checked:C,onCheckedChange:U=>{w(!!U),U&&G("ESIGN consent provided","User agreed to electronic signature terms")}}),e.jsx(E,{htmlFor:"esign-consent",className:"text-sm leading-relaxed",children:I("electronic_signature_consent")})]}),r&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:"identity-verify",checked:A,onCheckedChange:U=>b(!!U)}),e.jsx(E,{htmlFor:"identity-verify",className:"text-sm leading-relaxed",children:I("identity_verification")})]}),e.jsxs(V,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(Y,{className:"text-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:I("esign_act_notice")}),e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs text-gray-600",children:[e.jsx("p",{className:"font-semibold mb-1",children:"ESIGN Act Compliance Metadata:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{children:["• IP Address: ",h||"Capturing..."]}),e.jsxs("li",{children:["• Browser: ",m.userAgent?m.userAgent.split(" ")[0]:"Unknown"]}),e.jsxs("li",{children:["• Timezone: ",m.timezone||"Unknown"]}),e.jsxs("li",{children:["• Language: ",m.language||"Unknown"]}),e.jsxs("li",{children:["• Device: ",m.platform||"Unknown"]})]})]})]})})]})]})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsx(W,{className:"text-lg",children:I("signature_verification")})}),e.jsx($,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:I("draw_instruction")}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-white",children:[e.jsx("canvas",{ref:x,width:600,height:240,className:"w-full h-40 border border-gray-200 rounded cursor-crosshair",onMouseDown:d,onMouseMove:l,onMouseUp:_,onMouseLeave:_,onTouchStart:d,onTouchMove:l,onTouchEnd:_}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Sign above"}),e.jsxs(K,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),I("clear")]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-start",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),c==="es"?"Las firmas electrónicas tienen el mismo nivel de autenticidad y validez legal que las firmas físicas según la Ley ESIGN y UETA.":"Electronic signatures have the same level of authenticity and legal validity as physical signatures under the ESIGN Act and UETA."]})})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-xs text-gray-600 space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:I("document_retention")})]}),e.jsx("p",{children:"Signature Method: Hand-drawn"}),e.jsxs("p",{children:["Timestamp: ",new Date().toLocaleString()]}),h&&e.jsxs("p",{children:["IP Address: ",h]})]}),!N&&e.jsxs(V,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsxs(Y,{children:[k.some(U=>!U)&&e.jsx("div",{children:I("all_acknowledgments_required")}),!f&&e.jsx("div",{children:I("signature_required_error")})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsx(K,{variant:"outline",onClick:j,children:I("cancel")}),e.jsxs(K,{onClick:te,disabled:!N,size:"lg",className:"px-8",children:[e.jsx(De,{className:"h-5 w-5 mr-2"}),I("sign_document")]})]})]})}function dt(t){if(!t)return"";try{const s=new Date(t),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0"),o=s.getFullYear();return`${n}${a}${o}`}catch(s){return console.error("Error formatting date:",s),t}}async function Zs(t){var s,n;console.log("generateMappedI9Pdf called with data:",t);try{const o=await fetch("/i9-form-template.pdf").then(y=>y.arrayBuffer()),r=await Mt.load(o),c=r.getForm(),i={"Last Name (Family Name)":(t.last_name||"").toUpperCase(),"First Name Given Name":(t.first_name||"").toUpperCase(),"Employee Middle Initial (if any)":(t.middle_initial||"").toUpperCase(),"Employee Other Last Names Used (if any)":(t.other_names||"").toUpperCase(),"Address Street Number and Name":t.address||"","Apt Number (if any)":t.apt_number||"","City or Town":t.city||"","ZIP Code":t.zip_code||"","Date of Birth mmddyyyy":_e(t.date_of_birth||""),"US Social Security Number":(t.ssn||"").replace(/\D/g,""),"Employees E-mail Address":t.email||"","Telephone Number":(t.phone||"").replace(/\D/g,""),"Today's Date mmddyyyy":_e(new Date().toISOString()),"Today's Date (mm/dd/yyyy)":_e(new Date().toISOString()),"Todays Date mmddyyyy":_e(new Date().toISOString()),Date:_e(new Date().toISOString())},x=c.getFields().map(y=>y.getName());console.log("=== FILLING SECTION 1 FIELDS ==="),console.log("Available fields in PDF:",x.filter(y=>y.toLowerCase().includes("name")).slice(0,10));for(const[y,T]of Object.entries(i))if(T)try{if(y.toLowerCase().includes("preparer")||y.toLowerCase().includes("translator")){console.log(`Skipping Supplement A field: "${y}"`);continue}c.getTextField(y).setText(T),console.log(`Filled "${y}" with "${T}"`)}catch(C){!y.toLowerCase().includes("date")&&!y.toLowerCase().includes("today")&&console.error(`Failed to fill field "${y}":`,C)}try{const y=c.getDropdown("State"),T=y.getOptions();if(T.includes(t.state))y.select(t.state),console.log(`Set state dropdown to: ${t.state}`);else{console.error(`State "${t.state}" not found in dropdown options:`,T);try{c.getTextField("State").setText(t.state),console.log(`Set state as text field: ${t.state}`)}catch(C){console.error("Failed to set state as text field:",C)}}}catch(y){console.error("Failed to set state dropdown:",y);try{c.getTextField("State").setText(t.state),console.log(`Set state as text field: ${t.state}`)}catch(T){console.error("Failed to set state as text field:",T)}}const g={citizen:"CB_1",national:"CB_2",permanent_resident:"CB_3",authorized_alien:"CB_4"}[t.citizenship_status];if(g)try{c.getCheckBox(g).check(),console.log(`Checked citizenship checkbox: ${g}`)}catch(y){console.error(`Failed to check checkbox ${g}:`,y)}if(t.citizenship_status==="permanent_resident"){if(t.alien_registration_number)try{c.getTextField("3 A lawful permanent resident Enter USCIS or ANumber").setText(t.alien_registration_number),console.log("Filled permanent resident USCIS number")}catch(y){console.error("Failed to fill permanent resident USCIS number:",y)}if(t.expiration_date)try{c.getTextField("Card Expiration Date mmddyyyy").setText(_e(t.expiration_date)),console.log("Filled permanent resident card expiration date")}catch{try{c.getTextField("Expiration Date mmddyyyy").setText(_e(t.expiration_date)),console.log("Filled permanent resident expiration date (alternate field)")}catch{}}}if(t.citizenship_status==="authorized_alien"){const y={"USCIS ANumber":t.alien_registration_number||"","Exp Date mmddyyyy":_e(t.expiration_date||""),"Foreign Passport Number and Country of IssuanceRow1":t.foreign_passport_number&&t.country_of_issuance?`${t.foreign_passport_number} ${t.country_of_issuance}`:""};for(const[T,C]of Object.entries(y))if(C)try{c.getTextField(T).setText(C),console.log(`Filled alien field "${T}" with "${C}"`)}catch(w){console.error(`Failed to fill alien field "${T}":`,w)}}if((s=t.signatureData)!=null&&s.signature)try{const y=t.signatureData.signature,T=Uint8Array.from(atob(y.split(",")[1]),k=>k.charCodeAt(0)),C=await r.embedPng(T),A=r.getPages()[0],b=C.scale(.15);A.drawImage(C,{x:42,y:335,width:b.width,height:b.height}),console.log("Added employee signature image")}catch(y){console.error("Failed to add employee signature image:",y);try{const T=c.getTextField("Signature of Employee"),C=`${t.first_name||""} ${t.last_name||""}`.trim();T.setText(C),console.log("Added employee signature as text fallback:",C)}catch(T){console.error("Failed to add signature text:",T)}}if((n=t.section2)!=null&&n.documents){console.log("Filling Section 2 data:",t.section2);const y=Array.isArray(t.section2.documents)?t.section2.documents:[t.section2.documents];console.log("Documents list:",y);const T=y.find(k=>k.documentType==="us_passport"),C=y.find(k=>k.documentType==="permanent_resident_card"),w=y.find(k=>k.documentType==="drivers_license"),A=y.find(k=>k.documentType==="social_security_card");console.log("Driver's License data:",w),console.log("SSN Card data:",A),w&&(console.log("DL documentNumber:",w.documentNumber),console.log("DL issuingAuthority:",w.issuingAuthority),console.log("DL expirationDate:",w.expirationDate)),A&&(console.log("SSN ssn:",A.ssn),console.log("SSN documentNumber:",A.documentNumber));const b={"Last Name Family Name from Section 1":(t.last_name||"").toUpperCase(),"First Name Given Name from Section 1":(t.first_name||"").toUpperCase(),"Middle initial if any from Section 1":(t.middle_initial||"").toUpperCase()};T?Object.assign(b,{"Document Title 1":"U.S. Passport","Issuing Authority 1":"United States of America","Document Number 0 (if any)":T.documentNumber||"","Expiration Date if any":T.expirationDate?dt(T.expirationDate):""}):C&&Object.assign(b,{"Document Title 1":"Permanent Resident Card","Issuing Authority 1":"USCIS","Document Number 0 (if any)":C.documentNumber||"","Expiration Date if any":C.expirationDate?dt(C.expirationDate):"","Additional Information":C.alienNumber||""}),!T&&!C&&(w&&Object.assign(b,{"List B Document 1 Title":"Driver's License","List B Issuing Authority 1":w.issuingAuthority||"","List B Document Number 1":w.documentNumber||"","List B Expiration Date 1":w.expirationDate?dt(w.expirationDate):""}),A&&Object.assign(b,{"List C Document Title 1":"Social Security Card","List C Issuing Authority 1":"Social Security Administration","List C Document Number 1":A.ssn||A.documentNumber||""}));for(const[k,P]of Object.entries(b))if(P)try{c.getTextField(k).setText(P),console.log(`Filled Section 2 field ${k}: ${P}`)}catch(h){console.error(`Failed to fill Section 2 field ${k}:`,h)}}const f=await r.save();return console.log("PDF generated successfully"),f}catch(a){throw console.error("Error in generateMappedI9Pdf:",a),a}}function _e(t){if(!t)return"";try{const s=t.split("-");if(s.length!==3)return console.error("Invalid date format:",t),"";const n=parseInt(s[0]),a=parseInt(s[1]),o=parseInt(s[2]);if(isNaN(n)||isNaN(a)||isNaN(o))return console.error("Invalid date components:",t),"";const r=String(a).padStart(2,"0"),c=String(o).padStart(2,"0"),i=String(n);return`${r}/${c}/${i}`}catch(s){return console.error("Error formatting date:",s),""}}const Xs=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function Ks({onComplete:t,initialData:s={},language:n="en",onValidationChange:a,employeeId:o,showPreview:r=!0}){const[c,i]=v.useState(0),[j,x]=v.useState(!1),[p,g]=v.useState(!1),[f,y]=v.useState(null),[T,C]=v.useState(!1),[w,A]=v.useState({last_name:s.last_name||"",first_name:s.first_name||"",middle_initial:s.middle_initial||"",other_names:s.other_names||"",address:s.address||"",apt_number:s.apt_number||"",city:s.city||"",state:s.state||"",zip_code:s.zip_code||"",date_of_birth:s.date_of_birth||"",ssn:s.ssn||"",email:s.email||"",phone:s.phone||"",citizenship_status:s.citizenship_status||"",alien_registration_number:s.alien_registration_number||"",foreign_passport_number:s.foreign_passport_number||"",country_of_issuance:s.country_of_issuance||"",expiration_date:s.expiration_date||""});v.useEffect(()=>{s&&Object.keys(s).length>0&&(console.log("I9Section1FormClean: Received initialData update:",{citizenship_status:s.citizenship_status,keys:Object.keys(s)}),A(d=>{const l={last_name:s.last_name||d.last_name||"",first_name:s.first_name||d.first_name||"",middle_initial:s.middle_initial||d.middle_initial||"",other_names:s.other_names||d.other_names||"",address:s.address||d.address||"",apt_number:s.apt_number||d.apt_number||"",city:s.city||d.city||"",state:s.state||d.state||"",zip_code:s.zip_code||d.zip_code||"",date_of_birth:s.date_of_birth||d.date_of_birth||"",ssn:s.ssn||d.ssn||"",email:s.email||d.email||"",phone:s.phone||d.phone||"",citizenship_status:s.citizenship_status||d.citizenship_status||"",alien_registration_number:s.alien_registration_number||d.alien_registration_number||"",foreign_passport_number:s.foreign_passport_number||d.foreign_passport_number||"",country_of_issuance:s.country_of_issuance||d.country_of_issuance||"",expiration_date:s.expiration_date||d.expiration_date||""};return console.log("I9Section1FormClean: Updated form data:",{citizenship_status:l.citizenship_status,previous:d.citizenship_status}),l}))},[s]);const[b,k]=v.useState({});v.useEffect(()=>{console.log("I9Section1FormClean - citizenship_status state:",{current:w.citizenship_status,initial:s==null?void 0:s.citizenship_status,isEmpty:!w.citizenship_status})},[w.citizenship_status,s==null?void 0:s.citizenship_status]);const P=[{title:"Personal Information",fields:["last_name","first_name","middle_initial","other_names"]},{title:"Address",fields:["address","apt_number","city","state","zip_code"]},{title:"Contact & Details",fields:["date_of_birth","ssn","email","phone"]},{title:"Citizenship Status",fields:["citizenship_status","alien_registration_number","foreign_passport_number","country_of_issuance","expiration_date"]}],h=(d,l)=>{if(console.log(`I9Section1FormClean: Field ${d} changed to:`,l),A(_=>{const L={..._,[d]:l};return console.log("I9Section1FormClean: New form data state:",{field:d,value:l,citizenship_status:L.citizenship_status}),L}),b[d]&&k(_=>({..._,[d]:""})),a){const _={...b};delete _[d],a(Object.keys(_).length===0)}},F=d=>{const l=d.replace(/[^A-Za-z0-9]/g,"").toUpperCase();let _=l;l.length>0&&!l.startsWith("A")&&(_="A"+l);const L=_.match(/^(A)(\d{0,9})/);if(L){const ee=L[1],G=L[2];return ee+"-"+G}return _.slice(0,1)},N=d=>{const l=d.replace(/\D/g,"");return l.length<=3?l:l.length<=5?`${l.slice(0,3)}-${l.slice(3)}`:`${l.slice(0,3)}-${l.slice(3,5)}-${l.slice(5,9)}`},R=d=>{const l=d.replace(/\D/g,"");return l.length<=3?l:l.length<=6?`(${l.slice(0,3)}) ${l.slice(3)}`:`(${l.slice(0,3)}) ${l.slice(3,6)}-${l.slice(6,10)}`},D=d=>{const l=d.substring(0,3),_=d.substring(3,6);return!(l[0]==="0"||l[0]==="1"||_[0]==="0"||_[0]==="1"||l==="555"&&_==="01")},O=d=>{const l={};if(P[d].fields.forEach(L=>{switch(L){case"last_name":w.last_name.trim()||(l.last_name="Last name is required");break;case"first_name":w.first_name.trim()||(l.first_name="First name is required");break;case"address":w.address.trim()||(l.address="Street address is required");break;case"city":w.city.trim()||(l.city="City is required");break;case"state":w.state||(l.state="State is required");break;case"zip_code":w.zip_code.trim()?/^\d{5}(-\d{4})?$/.test(w.zip_code)||(l.zip_code="Invalid ZIP code format"):l.zip_code="ZIP code is required";break;case"date_of_birth":w.date_of_birth||(l.date_of_birth="Date of birth is required");break;case"ssn":w.ssn.trim()?w.ssn.replace(/\D/g,"").length!==9&&(l.ssn="SSN must be 9 digits"):l.ssn="SSN is required";break;case"email":w.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)||(l.email="Invalid email format"):l.email="Email is required";break;case"phone":if(!w.phone.trim())l.phone="Phone number is required";else{const ee=w.phone.replace(/\D/g,"");ee.length!==10?l.phone="Phone must be 10 digits":D(ee)||(l.phone="Invalid phone number")}break;case"citizenship_status":w.citizenship_status||(l.citizenship_status="Please select your citizenship status");break}}),d===3){if(w.citizenship_status==="permanent_resident")if(w.alien_registration_number.trim()?/^A-\d{9}$/.test(w.alien_registration_number)||(l.alien_registration_number="USCIS Number must be in format A-XXXXXXXXX (9 digits)"):l.alien_registration_number="USCIS Number is required",!w.expiration_date)l.expiration_date="Card expiration date is required";else{const L=new Date;L.setHours(0,0,0,0),new Date(w.expiration_date)<=L&&(l.expiration_date="Card expiration date must be in the future")}else if(w.citizenship_status==="authorized_alien")if(w.alien_registration_number.trim()||(l.alien_registration_number="Alien Registration Number is required"),!w.expiration_date)l.expiration_date="Work authorization expiration date is required";else{const L=new Date;L.setHours(0,0,0,0),new Date(w.expiration_date)<=L&&(l.expiration_date="Work authorization expiration date must be in the future")}}return k(l),Object.keys(l).length===0},m=()=>{console.log("I9Section1FormClean: handleNext called, current formData:",{citizenship_status:w.citizenship_status,step:c}),O(c)&&(c<P.length-1?i(c+1):(console.log("I9Section1FormClean: Completing form with data:",w),r?S():t({...w})))},u=()=>{c>0&&i(c-1)},S=async()=>{C(!0);try{const d=await Zs(w),l=new Blob([d],{type:"application/pdf"}),_=URL.createObjectURL(l);if(y(_),o)try{await Te.post(`/api/onboarding/${o}/i9-section1`,{formData:w,signed:!1})}catch(L){console.error("Error saving to backend:",L)}x(!0)}catch(d){console.error("Error generating PDF:",d),x(!0)}finally{C(!1)}},q=async d=>{console.log("I9Section1FormClean: handleSign called with formData:",{citizenship_status:w.citizenship_status,hasSignature:!!d});try{o&&await Te.post(`/api/onboarding/${o}/i9-section1`,{formData:w,signed:!0,signatureData:d.signature,completedAt:new Date().toISOString()});const l={...w,signature:d,completedAt:new Date().toISOString()};console.log("I9Section1FormClean: Completing with signed data:",{citizenship_status:l.citizenship_status}),t(l)}catch(l){console.error("Error saving signed form:",l);const _={...w,signature:d,completedAt:new Date().toISOString()};t(_)}};if(j)return e.jsx("div",{className:"max-w-6xl mx-auto space-y-6 p-4",children:e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(W,{children:"Review Form I-9 Section 1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please review the information you provided before signing"})]}),e.jsxs($,{className:"space-y-6",children:[e.jsx(Js,{pdfUrl:f,title:"Form I-9 Section 1 - Employment Eligibility Verification",initialZoom:100}),e.jsx(V,{children:e.jsxs(Y,{children:[e.jsx("strong",{children:"By signing below, you attest under penalty of perjury that:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2",children:[e.jsx("li",{children:"The information you have provided is true and correct"}),e.jsx("li",{children:"You are aware that federal law provides for imprisonment and/or fines for false statements"}),e.jsx("li",{children:"You are the individual who completed Section 1 of this form"})]})]})}),e.jsx(bt,{documentName:"Form I-9 Section 1 - Employment Eligibility Verification",signerName:`${w.first_name} ${w.last_name}`,signerTitle:"Employee",acknowledgments:["I attest, under penalty of perjury, that I am (check one of the following boxes)","The information I have provided is true and correct"],requireIdentityVerification:!0,language:n,onSignatureComplete:d=>{q({signature:d.signatureData})},onCancel:()=>{x(!1),i(P.length-1)}})]})]})});const I=(c+1)/P.length*100;return e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(W,{className:"sr-only",children:"Form I-9, Section 1"}),e.jsx("p",{className:"sr-only text-sm text-gray-600",children:"Employment Eligibility Verification"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:P[c].title}),e.jsxs("span",{children:["Step ",c+1," of ",P.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})})]})]}),e.jsxs($,{className:"space-y-6",children:[c===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter your legal name as it appears on your identification documents"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(M,{id:"last_name",value:w.last_name,onChange:d=>h("last_name",d.target.value),className:b.last_name?"border-red-500":""}),b.last_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.last_name})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"first_name",children:"First Name *"}),e.jsx(M,{id:"first_name",value:w.first_name,onChange:d=>h("first_name",d.target.value),className:b.first_name?"border-red-500":""}),b.first_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.first_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"middle_initial",children:"Middle Initial"}),e.jsx(M,{id:"middle_initial",value:w.middle_initial,onChange:d=>h("middle_initial",d.target.value.slice(0,1).toUpperCase()),maxLength:1})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"other_names",children:"Other Last Names Used"}),e.jsx(M,{id:"other_names",value:w.other_names,onChange:d=>h("other_names",d.target.value),placeholder:"Maiden name, aliases, etc."})]})]})]}),c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Address Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Provide your current residential address"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"address",children:"Street Address *"}),e.jsx(M,{id:"address",value:w.address,onChange:d=>h("address",d.target.value),className:b.address?"border-red-500":"",placeholder:"123 Main Street"}),b.address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.address})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"apt_number",children:"Apt #"}),e.jsx(M,{id:"apt_number",value:w.apt_number,onChange:d=>h("apt_number",d.target.value),placeholder:"Optional"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(E,{htmlFor:"city",children:"City *"}),e.jsx(M,{id:"city",value:w.city,onChange:d=>h("city",d.target.value),className:b.city?"border-red-500":""}),b.city&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.city})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"state",children:"State *"}),e.jsxs("select",{id:"state",value:w.state,onChange:d=>h("state",d.target.value),className:`w-full h-10 px-3 rounded-md border ${b.state?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"",children:"Select State"}),Xs.map(d=>e.jsx("option",{value:d,children:d},d))]}),b.state&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.state})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"zip_code",children:"ZIP Code *"}),e.jsx(M,{id:"zip_code",value:w.zip_code,onChange:d=>h("zip_code",d.target.value),className:b.zip_code?"border-red-500":"",placeholder:"12345"}),b.zip_code&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.zip_code})]})]})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information & Personal Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Provide your contact information and personal details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"date_of_birth",children:"Date of Birth *"}),e.jsx(M,{id:"date_of_birth",type:"date",value:w.date_of_birth,onChange:d=>h("date_of_birth",d.target.value),className:b.date_of_birth?"border-red-500":""}),b.date_of_birth&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.date_of_birth})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"ssn",children:"Social Security Number *"}),e.jsx(M,{id:"ssn",value:w.ssn,onChange:d=>{const l=N(d.target.value);h("ssn",l)},className:b.ssn?"border-red-500":"",placeholder:"123-45-6789",maxLength:11}),b.ssn&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.ssn})]})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"email",children:"Email Address *"}),e.jsx(M,{id:"email",type:"email",value:w.email,onChange:d=>h("email",d.target.value),className:b.email?"border-red-500":"",placeholder:"your.email@example.com"}),b.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.email})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(M,{id:"phone",value:w.phone,onChange:d=>{const l=R(d.target.value);h("phone",l)},className:b.phone?"border-red-500":"",placeholder:"(555) 123-4567",maxLength:14}),b.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.phone})]})]}),c===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Citizenship Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select your citizenship or immigration status"}),e.jsxs("div",{children:[e.jsx(E,{children:"I attest, under penalty of perjury, that I am: *"}),e.jsxs(Le,{value:w.citizenship_status,onValueChange:d=>{console.log("RadioGroup citizenship_status onValueChange:",d),h("citizenship_status",d)},className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"citizen",id:"citizen"}),e.jsx(E,{htmlFor:"citizen",className:"font-normal cursor-pointer",children:"A citizen of the United States"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"national",id:"national"}),e.jsx(E,{htmlFor:"national",className:"font-normal cursor-pointer",children:"A noncitizen national of the United States"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"permanent_resident",id:"permanent_resident"}),e.jsx(E,{htmlFor:"permanent_resident",className:"font-normal cursor-pointer",children:"A lawful permanent resident"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"authorized_alien",id:"authorized_alien"}),e.jsx(E,{htmlFor:"authorized_alien",className:"font-normal cursor-pointer",children:"An alien authorized to work"})]})]}),b.citizenship_status&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.citizenship_status})]}),(w.citizenship_status==="permanent_resident"||w.citizenship_status==="authorized_alien")&&e.jsxs("div",{className:"space-y-4 mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Additional Information Required"}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"alien_registration_number",children:[w.citizenship_status==="permanent_resident"?"USCIS Number":"Alien Registration Number"," *"]}),e.jsx(M,{id:"alien_registration_number",value:w.alien_registration_number,onChange:d=>{if(w.citizenship_status==="permanent_resident"){const l=F(d.target.value);h("alien_registration_number",l)}else h("alien_registration_number",d.target.value)},className:b.alien_registration_number?"border-red-500":"",placeholder:w.citizenship_status==="permanent_resident"?"A-123456789":"123456789",maxLength:w.citizenship_status==="permanent_resident"?11:void 0}),b.alien_registration_number&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.alien_registration_number})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"expiration_date",children:[w.citizenship_status==="permanent_resident"?"Card Expiration Date":"Work Authorization Expiration Date"," *"]}),e.jsx(M,{id:"expiration_date",type:"date",value:w.expiration_date,onChange:d=>h("expiration_date",d.target.value),className:b.expiration_date?"border-red-500":"",min:new Date().toISOString().split("T")[0]}),b.expiration_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.expiration_date})]})]}),e.jsx(V,{className:"mt-6",children:e.jsxs(Y,{children:[e.jsx("strong",{children:"Important:"})," Federal law requires that you complete Form I-9. Providing false information may subject you to criminal prosecution. All information will be verified with federal databases."]})})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(K,{type:"button",variant:"outline",onClick:u,disabled:c===0,children:[e.jsx(zt,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsx(K,{type:"button",onClick:m,disabled:T,children:c===P.length-1?r?T?e.jsx(e.Fragment,{children:"Generating Preview..."}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),"Preview & Sign"]}):e.jsxs(e.Fragment,{children:["Continue",e.jsx(ut,{className:"ml-2 h-4 w-4"})]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(ut,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}function Xa({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({}),[x,p]=v.useState("form"),[g,f]=v.useState(!1),[y,T]=v.useState(!1),[C,w]=v.useState(null),{errors:A,fieldErrors:b}=Pe(ht),k={formData:i,activeTab:x,formValid:g,isSigned:y,pdfUrl:C},{saveStatus:P}=pe(k,{onSave:async m=>{await a(t.id,m)}});v.useEffect(()=>{(async()=>{try{const u=sessionStorage.getItem(`onboarding_${t.id}_data`);if(console.log("I9Section1Step - Loading saved data:",u),u){const S=JSON.parse(u);console.log("I9Section1Step - Parsed data:",S);let q={};if(S.formData?q=S.formData:S.form_data?(q=S.form_data,S.signed&&(T(!0),p("review")),S.signature_data&&w(S.pdf_url||null)):q=S,q&&Object.keys(q).length>0&&(j(q),console.log("I9Section1Step - Set formData with citizenship_status:",q.citizenship_status)),S.formValid&&f(!0),(S.signed||S.isSigned)&&(T(!0),p("review")),(S.pdfUrl||S.pdf_url)&&(w(S.pdfUrl||S.pdf_url),console.log("I9Section1Step - Restored saved PDF preview")),q&&Object.keys(q).length>0){console.log("I9Section1Step - Using saved I9 data, skipping personal info auto-fill");return}}if(s.completedSteps.includes(t.id)){T(!0),f(!0),p("review");return}if(!u){const S=sessionStorage.getItem("onboarding_personal-info_data");if(console.log("Personal info data from storage:",S),S)try{const q=JSON.parse(S);console.log("Parsed personal info:",q);const I=q.personalInfo||q||{},d={last_name:I.lastName||"",first_name:I.firstName||"",middle_initial:I.middleInitial||"",date_of_birth:I.dateOfBirth||"",ssn:I.ssn||"",email:I.email||"",phone:I.phone||"",address:I.address||"",apt_number:I.aptNumber||I.apartment||"",city:I.city||"",state:I.state||"",zip_code:I.zipCode||"",citizenship_status:"",alien_registration_number:"",foreign_passport_number:"",country_of_issuance:"",expiration_date:""};console.log("Mapped I9 data from personal info (citizenship_status initialized as empty):",d),j(d)}catch(q){console.error("Failed to parse personal info data:",q)}}}catch(u){console.error("Failed to load existing data:",u)}})()},[t.id,s.completedSteps]);const h=async m=>{console.log("I9Section1Step - Form completed with data:",m),console.log("I9Section1Step - Citizenship status:",m.citizenship_status),console.log("I9Section1Step - All form fields:",Object.keys(m));const u={...i,...m};j(u),f(!0);const S={formData:u,formValid:!0,activeTab:"review",pdfUrl:C};if(sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(S)),console.log("I9Section1Step - Saved to session storage with citizenship_status:",u.citizenship_status),await a(t.id,S),r!=null&&r.id)try{const q=await fetch(`/api/api/onboarding/${r.id}/i9-section1`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:u,signed:!1,formValid:!0})});q.ok?console.log("I9Section1Step - Form data saved to cloud"):console.error("Failed to save I-9 data to cloud:",await q.text())}catch(q){console.error("Error saving I-9 data to cloud:",q)}p("review")},F=m=>{console.log("I9Section1Step - PDF generated, saving to session storage"),w(m);const u=sessionStorage.getItem(`onboarding_${t.id}_data`);if(u)try{const q={...JSON.parse(u),pdfUrl:m,pdfGeneratedAt:new Date().toISOString()};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(q))}catch(S){console.error("Failed to update session storage with PDF:",S)}},N=async m=>{const u={formData:i,signed:!0,isSigned:!0,signatureData:m,completedAt:new Date().toISOString(),formValid:!0,pdfUrl:C};if(T(!0),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(u)),r!=null&&r.id)try{const S=await fetch(`/api/api/onboarding/${r.id}/i9-section1`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:i,signed:!0,signatureData:m.signature,completedAt:u.completedAt,pdfUrl:C})});S.ok?console.log("I9Section1Step - Signature and PDF saved to cloud"):console.error("Failed to save I-9 signature to cloud:",await S.text())}catch(S){console.error("Error saving I-9 signature to cloud:",S)}await n(t.id,u)},R=m=>!m||Object.keys(m).length===0?e.jsx("div",{children:"No form data available"}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Name"}),e.jsx("p",{className:"text-gray-900",children:m.last_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"First Name"}),e.jsx("p",{className:"text-gray-900",children:m.first_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Middle Initial"}),e.jsx("p",{className:"text-gray-900",children:m.middle_initial||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Date of Birth"}),e.jsx("p",{className:"text-gray-900",children:m.date_of_birth||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Social Security Number"}),e.jsx("p",{className:"text-gray-900",children:m.ssn?"***-**-"+m.ssn.slice(-4):"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Employee Address"}),e.jsx("p",{className:"text-gray-900",children:m.address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Citizenship Status"}),e.jsx("p",{className:"text-gray-900",children:m.citizenship_status==="citizen"?"U.S. Citizen":m.citizenship_status==="permanent_resident"?"Lawful Permanent Resident":m.citizenship_status==="authorized_alien"?"Alien Authorized to Work":m.citizenship_status||"Not provided"})]})]})}),O={en:{title:"Employment Eligibility Verification",description:"Complete Form I-9 Section 1 to verify your eligibility to work in the United States",completionMessage:"Form I-9 Section 1 has been completed and digitally signed.",fillFormTab:"Fill Form",reviewTab:"Preview & Sign",reviewTitle:"Review I-9 Section 1",reviewDescription:"Please review your employment eligibility information and sign electronically",agreementText:"I attest, under penalty of perjury, that I am (check one of the following boxes):"},es:{title:"Verificación de Elegibilidad de Empleo",description:"Complete el Formulario I-9 Sección 1 para verificar su elegibilidad para trabajar en los Estados Unidos",completionMessage:"El Formulario I-9 Sección 1 ha sido completado y firmado digitalmente.",fillFormTab:"Llenar Formulario",reviewTab:"Revisar y Firmar",reviewTitle:"Revisar I-9 Sección 1",reviewDescription:"Por favor revise su información de elegibilidad de empleo y firme electrónicamente",agreementText:"Atestiguo, bajo pena de perjurio, que soy (marque una de las siguientes casillas):"}}[o];return e.jsx(le,{errors:A,fieldErrors:b,saveStatus:P,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-heading-secondary font-bold text-gray-900",children:O.title}),e.jsx("p",{className:"text-gray-600 mt-2 text-base",children:O.description})]}),y&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:O.completionMessage})]}),e.jsx(We,{title:"Employment Eligibility Form",description:"Complete your I-9 Section 1 form and review before signing",icon:e.jsx(et,{className:"h-5 w-5"}),completed:y,required:!0,children:e.jsxs(ft,{value:x,onValueChange:p,className:"w-full",children:[e.jsxs(yt,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(He,{value:"form",className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:O.fillFormTab}),g&&e.jsx(J,{className:"h-3 w-3 text-green-600"})]}),e.jsxs(He,{value:"review",disabled:!g,className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:O.reviewTab}),y&&e.jsx(J,{className:"h-3 w-3 text-green-600"})]})]}),e.jsx(Oe,{value:"form",className:"space-y-6",children:e.jsx(Ks,{onComplete:h,initialData:i,language:o,employeeId:r==null?void 0:r.id})}),e.jsx(Oe,{value:"review",className:"space-y-6",children:i&&e.jsx(qe,{formType:"i9-section1",formData:i,title:O.reviewTitle,description:O.reviewDescription,language:o,onSign:N,onBack:()=>p("form"),renderPreview:R,usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${r==null?void 0:r.id}/i9-section1/generate-pdf`,pdfUrl:C,onPdfGenerated:F,federalCompliance:{formName:"Form I-9, Employment Eligibility Verification",retentionPeriod:"3 years after hire or 1 year after termination (whichever is later)",requiresWitness:!1},agreementText:O.agreementText})})]})})]})})})}function Qs({initialData:t={},language:s,onComplete:n,onSkip:a,onBack:o,employeeData:r,currentUserRole:c="employee"}){const[i,j]=v.useState({preparerLastName:"",preparerFirstName:"",preparerAddress:"",preparerCity:"",preparerState:"",preparerZipCode:"",preparerPhoneNumber:"",preparerEmail:"",translatorLastName:"",translatorFirstName:"",translatorAddress:"",translatorCity:"",translatorState:"",translatorZipCode:"",translatorPhoneNumber:"",translatorEmail:"",preparationDate:new Date().toISOString().split("T")[0],languageSpoken:"",assistanceProvided:""}),[x,p]=v.useState({}),[g,f]=v.useState(0),[y,T]=v.useState(!1),[C,w]=v.useState(!1),[A,b]=v.useState(!1),[k,P]=v.useState(""),h=u=>({en:{supplement_a_title:"Form I-9 Supplement A",supplement_a_subtitle:"Preparer and/or Translator Certification",supplement_a_desc:"This supplement must be completed if someone other than the employee prepared Section 1 or if a translator assisted.",preparer_info:"Preparer Information",preparer_info_desc:"Person who helped prepare or complete Section 1",translator_info:"Translator Information",translator_info_desc:"Person who provided translation assistance (if different from preparer)",different_translator:"The translator is different from the preparer",first_name:"First Name",last_name:"Last Name",address:"Address",city:"City",state:"State",zip_code:"ZIP Code",phone:"Phone Number",email:"Email Address",language_spoken:"Language Spoken by Employee",assistance_provided:"Type of Assistance Provided",preparation_date:"Date Prepared",certification:"Certification",preparer_certification:"I attest, under penalty of perjury, that I have assisted in the completion of Section 1 of this form and that to the best of my knowledge the information is true and correct.",translator_certification:"I attest, under penalty of perjury, that I have assisted in the completion of Section 1 of this form by translating from [language] to English and that to the best of my knowledge the information is true and correct.",required:"Required",next:"Next",back:"Back",skip:"Skip This Supplement",sign_document:"Sign Document",complete:"Complete Supplement A",compliance_warning:"Federal Compliance Warning",preparer_cannot_be_employee:"The preparer/translator cannot be the employee themselves. A third party must complete this form.",auto_fill_disabled:"Auto-fill is disabled for federal compliance. All fields must be entered manually.",role_restriction:"This form should only be completed by the person who helped prepare or translate Section 1.",employee_warning:"Employees cannot complete their own Supplement A. Please have your preparer/translator complete this form."},es:{supplement_a_title:"Formulario I-9 Suplemento A",supplement_a_subtitle:"Certificación del Preparador y/o Traductor",supplement_a_desc:"Este suplemento debe completarse si alguien que no sea el empleado preparó la Sección 1 o si un traductor ayudó.",preparer_info:"Información del Preparador",first_name:"Nombre",last_name:"Apellido",next:"Siguiente",back:"Atrás",skip:"Omitir Este Suplemento",complete:"Completar Suplemento A"}})[s][u]||u,F=()=>{const u={};if(g===0){if(r&&i.preparerFirstName.toLowerCase().trim()===r.firstName.toLowerCase().trim()&&i.preparerLastName.toLowerCase().trim()===r.lastName.toLowerCase().trim())return P(h("preparer_cannot_be_employee")),!1;P(""),i.preparerFirstName.trim()||(u.preparerFirstName=h("required")),i.preparerLastName.trim()||(u.preparerLastName=h("required")),i.preparerAddress.trim()||(u.preparerAddress=h("required")),i.languageSpoken.trim()||(u.languageSpoken=h("required")),i.assistanceProvided.trim()||(u.assistanceProvided=h("required"))}else g===1&&C&&(i.translatorFirstName.trim()||(u.translatorFirstName=h("required")),i.translatorLastName.trim()||(u.translatorLastName=h("required")));return p(u),Object.keys(u).length===0},N=(u,S)=>{j(q=>({...q,[u]:S})),x[u]&&p(q=>({...q,[u]:""}))},R=()=>{F()&&(g===0?C?f(1):(j(u=>({...u,translatorFirstName:u.preparerFirstName,translatorLastName:u.preparerLastName,translatorAddress:u.preparerAddress,translatorCity:u.preparerCity,translatorState:u.preparerState,translatorZipCode:u.preparerZipCode,translatorPhoneNumber:u.preparerPhoneNumber,translatorEmail:u.preparerEmail})),T(!0)):g===1&&T(!0))},D=u=>{const S={...i,preparerSignature:u.signatureData};n(S)},O=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"cursor-pointer bg-blue-50 border border-blue-200 rounded p-2 hover:bg-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-xs font-semibold text-blue-900",children:"Form Instructions"})]}),e.jsx("svg",{className:"h-3 w-3 text-blue-600 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),e.jsx("div",{className:"mt-1 text-xs text-blue-800 px-3 pb-2",children:h("supplement_a_desc")})]}),e.jsxs(z,{children:[e.jsxs(B,{className:"pb-3",children:[e.jsxs(W,{className:"flex items-center space-x-2 text-base",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:h("preparer_info")})]}),e.jsx(Be,{className:"text-sm",children:h("preparer_info_desc")})]}),e.jsx($,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"preparerFirstName",className:"text-xs font-medium",children:[h("first_name")," *"]}),e.jsx(M,{id:"preparerFirstName",value:i.preparerFirstName,onChange:u=>N("preparerFirstName",u.target.value),className:`h-8 text-sm ${x.preparerFirstName?"border-red-500":""}`}),x.preparerFirstName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:x.preparerFirstName})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"preparerLastName",className:"text-xs font-medium",children:[h("last_name")," *"]}),e.jsx(M,{id:"preparerLastName",value:i.preparerLastName,onChange:u=>N("preparerLastName",u.target.value),className:`h-8 text-sm ${x.preparerLastName?"border-red-500":""}`}),x.preparerLastName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:x.preparerLastName})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(E,{htmlFor:"preparerAddress",className:"text-xs font-medium",children:[h("address")," *"]}),e.jsx(M,{id:"preparerAddress",value:i.preparerAddress,onChange:u=>N("preparerAddress",u.target.value),className:`h-8 text-sm ${x.preparerAddress?"border-red-500":""}`}),x.preparerAddress&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:x.preparerAddress})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"preparerCity",className:"text-xs font-medium",children:h("city")}),e.jsx(M,{id:"preparerCity",value:i.preparerCity,onChange:u=>N("preparerCity",u.target.value),className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"preparerState",className:"text-xs font-medium",children:h("state")}),e.jsx(M,{id:"preparerState",value:i.preparerState,onChange:u=>N("preparerState",u.target.value),maxLength:2,className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"preparerZipCode",className:"text-xs font-medium",children:h("zip_code")}),e.jsx(M,{id:"preparerZipCode",value:i.preparerZipCode,onChange:u=>N("preparerZipCode",u.target.value),maxLength:10,className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"preparerPhoneNumber",className:"text-xs font-medium",children:h("phone")}),e.jsx(M,{id:"preparerPhoneNumber",value:i.preparerPhoneNumber,onChange:u=>N("preparerPhoneNumber",u.target.value),className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"preparerEmail",className:"text-xs font-medium",children:h("email")}),e.jsx(M,{id:"preparerEmail",type:"email",value:i.preparerEmail,onChange:u=>N("preparerEmail",u.target.value),className:"h-8 text-sm"})]})]})})]}),k&&e.jsxs(V,{className:"border-red-200 bg-red-50",children:[e.jsx(Re,{className:"h-4 w-4 text-red-600"}),e.jsx(Y,{className:"text-red-900",children:k})]}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-2",children:e.jsx(W,{className:"text-base",children:"Assistance Details"})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"languageSpoken",className:"text-xs font-medium",children:[h("language_spoken")," *"]}),e.jsx(M,{id:"languageSpoken",value:i.languageSpoken,onChange:u=>N("languageSpoken",u.target.value),className:`h-8 text-sm ${x.languageSpoken?"border-red-500":""}`,placeholder:"e.g., Spanish, Mandarin, Arabic"}),x.languageSpoken&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:x.languageSpoken})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"assistanceProvided",className:"text-xs font-medium",children:[h("assistance_provided")," *"]}),e.jsx("textarea",{id:"assistanceProvided",value:i.assistanceProvided,onChange:u=>N("assistanceProvided",u.target.value),className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm ${x.assistanceProvided?"border-red-500":"border-gray-300"}`,rows:2,placeholder:"Describe the type of assistance provided (translation, help filling out form, etc.)"}),x.assistanceProvided&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:x.assistanceProvided})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"differentTranslator",checked:C,onChange:u=>w(u.target.checked)}),e.jsx(E,{htmlFor:"differentTranslator",children:h("different_translator")})]})]})]})]}),m=()=>e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-5 w-5"}),e.jsx("span",{children:h("translator_info")})]}),e.jsx(Be,{children:h("translator_info_desc")})]}),e.jsx($,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"translatorFirstName",children:[h("first_name")," *"]}),e.jsx(M,{id:"translatorFirstName",value:i.translatorFirstName,onChange:u=>N("translatorFirstName",u.target.value),className:x.translatorFirstName?"border-red-500":""}),x.translatorFirstName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.translatorFirstName})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"translatorLastName",children:[h("last_name")," *"]}),e.jsx(M,{id:"translatorLastName",value:i.translatorLastName,onChange:u=>N("translatorLastName",u.target.value),className:x.translatorLastName?"border-red-500":""}),x.translatorLastName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.translatorLastName})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(E,{htmlFor:"translatorAddress",children:h("address")}),e.jsx(M,{id:"translatorAddress",value:i.translatorAddress,onChange:u=>N("translatorAddress",u.target.value)})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"translatorCity",children:h("city")}),e.jsx(M,{id:"translatorCity",value:i.translatorCity,onChange:u=>N("translatorCity",u.target.value)})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"translatorState",children:h("state")}),e.jsx(M,{id:"translatorState",value:i.translatorState,onChange:u=>N("translatorState",u.target.value),maxLength:2})]})]})})]});return c==="employee"&&!A?e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:e.jsxs(V,{className:"max-w-2xl border-red-200 bg-red-50",children:[e.jsx(Re,{className:"h-4 w-4 text-red-600"}),e.jsx(Y,{className:"text-red-900",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:h("compliance_warning")}),e.jsx("p",{children:h("employee_warning")}),e.jsx("p",{className:"text-sm",children:h("role_restriction")}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx(K,{variant:"outline",onClick:o,children:h("back")}),e.jsx(K,{variant:"outline",onClick:a,children:h("skip")})]})]})})]})}):y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(ae,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:h("supplement_a_title")}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Preparer/Translator Signature Required"})]}),e.jsx(bt,{documentName:"Form I-9 Supplement A - Preparer and/or Translator Certification",signerName:`${i.preparerFirstName} ${i.preparerLastName}`,signerTitle:"Preparer/Translator",acknowledgments:[h("preparer_certification"),C?h("translator_certification").replace("[language]",i.languageSpoken):""].filter(Boolean),requireIdentityVerification:!1,language:s,onSignatureComplete:D,onCancel:()=>T(!1)})]}):e.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx(ae,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:h("supplement_a_title")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:h("supplement_a_subtitle")})]}),e.jsxs(V,{className:"border-blue-200 bg-blue-50",children:[e.jsx(re,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{className:"text-blue-900",children:e.jsx("p",{className:"text-sm font-medium",children:h("auto_fill_disabled")})})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[g===0&&O(),g===1&&m()]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx(K,{variant:"outline",onClick:o,className:"h-12 px-6",children:h("back")}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(K,{variant:"ghost",onClick:a,className:"h-12 px-6",children:h("skip")}),e.jsx(K,{onClick:R,className:"h-12 px-8 text-base font-semibold",children:h(g===0&&!C||g===1?"sign_document":"next")})]})]})]})}async function ea(t){return typeof window>"u"||typeof document>"u"?t:new Promise((s,n)=>{const a=new Image;a.onload=()=>{const o=document.createElement("canvas"),r=o.getContext("2d");if(!r){n(new Error("Failed to get canvas context"));return}o.width=a.width,o.height=a.height,r.drawImage(a,0,0);const c=r.getImageData(0,0,o.width,o.height),i=c.data;let j=o.width,x=o.height,p=0,g=0;for(let b=0;b<o.height;b++)for(let k=0;k<o.width;k++){const P=(b*o.width+k)*4,h=i[P],F=i[P+1],N=i[P+2];i[P+3],h<250||F<250||N<250?(j=Math.min(j,k),x=Math.min(x,b),p=Math.max(p,k),g=Math.max(g,b),i[P]=0,i[P+1]=0,i[P+2]=0,i[P+3]=255):i[P+3]=0}const f=10;j=Math.max(0,j-f),x=Math.max(0,x-f),p=Math.min(o.width-1,p+f),g=Math.min(o.height-1,g+f);const y=document.createElement("canvas"),T=y.getContext("2d");if(!T){n(new Error("Failed to get cropped canvas context"));return}const C=p-j+1,w=g-x+1;y.width=C,y.height=w,r.putImageData(c,0,0),T.drawImage(o,j,x,C,w,0,0,C,w);const A=y.toDataURL("image/png");s(A)},a.onerror=()=>{n(new Error("Failed to load signature image"))},a.src=t})}function Ka({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState("none"),[x,p]=v.useState(null),[g,f]=v.useState(!1),y={needsSupplements:i,supplementAData:x,isComplete:g},{saveStatus:T}=pe(y,{onSave:async b=>{await a(t.id,b)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&f(!0)},[t.id,s.completedSteps]),v.useEffect(()=>{(async()=>{let k=!1;if((i==="none"||i==="translator"&&x)&&(k=!0),f(k),k&&!s.completedSteps.includes(t.id)){const P={needsSupplements:i,supplementA:x,federalComplianceNote:"Supplement B is not applicable for employee - manager handles reverification",completedAt:new Date().toISOString()};await n(t.id,P)}})()},[i,x,t.id,s.completedSteps,n]);const C=b=>{p(b)},A={en:{title:"I-9 Supplements",description:"If someone assisted you in completing Section 1 of Form I-9, additional supplements may be required. This includes translators or preparers who helped you understand or complete the form.",mostEmployeesSkip:"Most employees can skip this step.",supplementsRequired:"Supplements are only required if someone other than you helped translate or prepare your I-9 Section 1 responses.",completionMessage:"I-9 Supplements section completed. You can proceed to document upload.",didAnyoneAssist:"Did Anyone Assist You?",selectSupplements:"Select which supplements are needed (if any):",noAssistanceNeeded:"No assistance needed",noAssistanceDescription:"I completed Section 1 myself without help from a translator or preparer.",supplementATranslator:"Supplement A - Translator",supplementADescription:"Someone translated the form or instructions for me because English is not my primary language.",noSupplementsRequired:"No supplements required",canProceed:"You can proceed to the next step - document upload for I-9 verification.",supplementATitle:"Supplement A - Translator Information",aboutSupplementB:"About Supplement B (Reverification)",supplementBNotCompleted:"Supplement B is NOT completed by employees.",supplementBUsed:"It is used exclusively by managers for reverification scenarios such as:",whenAuthorizationExpires:"When an employee's work authorization expires and needs renewal",whenRehiring:"When rehiring an employee within 3 years of the original I-9",whenNameChange:"When an employee has a legal name change",managerWillComplete:"Your manager will complete Supplement B if any of these situations apply to you during your employment. You do not need to take any action regarding Supplement B.",supplementRequirements:"Supplement Requirements",readyToContinue:"No supplements needed - Ready to continue",supplementA:"Supplement A (Translator)",supplementB:"Supplement B (Reverification)",complete:"Complete",required:"Required",managerResponsibility:"Manager Responsibility",federalRequirement:"Federal Requirement:",federalNotice:"Supplements A and B are required when a translator or preparer assists with Form I-9 completion under 8 CFR § 274a.2(b)(1)(i)(B).",estimatedTime:"Estimated time: 2-4 minutes (if supplements needed)"},es:{title:"Suplementos I-9",description:"Si alguien le ayudó a completar la Sección 1 del Formulario I-9, pueden ser necesarios suplementos adicionales. Esto incluye traductores o preparadores que le ayudaron a entender o completar el formulario.",mostEmployeesSkip:"La mayoría de los empleados pueden omitir este paso.",supplementsRequired:"Los suplementos solo son necesarios si alguien más que usted ayudó a traducir o preparar sus respuestas de la Sección 1 del I-9.",completionMessage:"Sección de Suplementos I-9 completada. Puede proceder a cargar documentos.",didAnyoneAssist:"¿Alguien le Ayudó?",selectSupplements:"Seleccione qué suplementos son necesarios (si corresponde):",noAssistanceNeeded:"No necesité ayuda",noAssistanceDescription:"Completé la Sección 1 yo mismo sin ayuda de un traductor o preparador.",supplementATranslator:"Suplemento A - Traductor",supplementADescription:"Alguien tradujo el formulario o las instrucciones porque el inglés no es mi idioma principal.",noSupplementsRequired:"No se requieren suplementos",canProceed:"Puede continuar con el siguiente paso: carga de documentos para la verificación I-9.",supplementATitle:"Suplemento A - Información del Traductor",aboutSupplementB:"Acerca del Suplemento B (Reverificación)",supplementBNotCompleted:"El Suplemento B NO es completado por los empleados.",supplementBUsed:"Se usa exclusivamente por los gerentes para escenarios de reverificación como:",whenAuthorizationExpires:"Cuando la autorización de trabajo de un empleado expira y necesita renovación",whenRehiring:"Al recontratar a un empleado dentro de 3 años del I-9 original",whenNameChange:"Cuando un empleado tiene un cambio de nombre legal",managerWillComplete:"Su gerente completará el Suplemento B si alguna de estas situaciones se aplica a usted durante su empleo. No necesita tomar ninguna acción con respecto al Suplemento B.",supplementRequirements:"Requisitos de Suplementos",readyToContinue:"No se necesitan suplementos - Listo para continuar",supplementA:"Suplemento A (Traductor)",supplementB:"Suplemento B (Reverificación)",complete:"Completo",required:"Requerido",managerResponsibility:"Responsabilidad del Gerente",federalRequirement:"Requisito Federal:",federalNotice:"Los Suplementos A y B son requeridos cuando un traductor o preparador ayuda con la compleción del Formulario I-9 bajo 8 CFR § 274a.2(b)(1)(i)(B).",estimatedTime:"Tiempo estimado: 2-4 minutos (si se necesitan suplementos)"}}[o];return e.jsx(le,{saveStatus:T,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(ae,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:A.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:A.description})]}),e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Ne,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Y,{className:"text-blue-800",children:[e.jsx("strong",{children:A.mostEmployeesSkip})," ",A.supplementsRequired]})]}),g&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:A.completionMessage})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:A.didAnyoneAssist})]})}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-base font-medium text-gray-900 mb-4 block",children:A.selectSupplements}),e.jsxs(Le,{value:i,onValueChange:b=>j(b),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-gray-200 hover:bg-gray-50",children:[e.jsx(oe,{value:"none",id:"none",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(E,{htmlFor:"none",className:"font-medium cursor-pointer",children:A.noAssistanceNeeded}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.noAssistanceDescription})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-gray-200 hover:bg-gray-50",children:[e.jsx(oe,{value:"translator",id:"translator",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(E,{htmlFor:"translator",className:"font-medium cursor-pointer flex items-center space-x-2",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:A.supplementATranslator})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.supplementADescription})]})]})]})]}),i==="none"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:A.noSupplementsRequired})]}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:A.canProceed})]})]})]}),i==="translator"&&e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:A.supplementATitle})]})}),e.jsx($,{children:e.jsx(Qs,{initialData:x||{},language:o,onComplete:C,onSkip:()=>j("none"),onBack:()=>j("none")})})]}),e.jsxs(z,{className:"border-blue-200 bg-blue-50",children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2 text-blue-800",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:A.aboutSupplementB})]})}),e.jsx($,{className:"text-blue-800",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:A.supplementBNotCompleted})," ",A.supplementBUsed]}),e.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 ml-4",children:[e.jsx("li",{children:A.whenAuthorizationExpires}),e.jsx("li",{children:A.whenRehiring}),e.jsx("li",{children:A.whenNameChange})]}),e.jsx("p",{className:"text-sm",children:A.managerWillComplete})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:A.supplementRequirements}),e.jsxs("div",{className:"space-y-3",children:[i==="none"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:A.readyToContinue})]}),i==="translator"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:A.supplementA}),e.jsxs("div",{className:"flex items-center space-x-2",children:[x?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:x?A.complete:A.required})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:A.supplementB}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:A.managerResponsibility})]})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 border-t pt-4",children:e.jsxs("p",{children:[e.jsx("strong",{children:A.federalRequirement})," ",A.federalNotice]})}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:A.estimatedTime})})]})})})}const ta=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function sa({onComplete:t,initialData:s={},language:n="en",employeeId:a}){const[o,r]=v.useState(0),[c,i]=v.useState({first_name:s.first_name||"",middle_initial:s.middle_initial||"",last_name:s.last_name||"",address:s.address||"",apt_number:s.apt_number||"",city:s.city||"",state:s.state||"",zip_code:s.zip_code||"",ssn:s.ssn||"",filing_status:s.filing_status||"single",multiple_jobs:s.multiple_jobs||!1,qualifying_children:s.qualifying_children||0,other_dependents:s.other_dependents||0,other_income:s.other_income||"",deductions:s.deductions||"",extra_withholding:s.extra_withholding||""}),[j,x]=v.useState({});v.useEffect(()=>{s&&Object.keys(s).length>0&&(console.log("W4FormClean - Updating form data from initialData:",s),i({first_name:s.first_name||"",middle_initial:s.middle_initial||"",last_name:s.last_name||"",address:s.address||"",apt_number:s.apt_number||"",city:s.city||"",state:s.state||"",zip_code:s.zip_code||"",ssn:s.ssn||"",filing_status:s.filing_status||"single",multiple_jobs:s.multiple_jobs||!1,qualifying_children:s.qualifying_children||0,other_dependents:s.other_dependents||0,other_income:s.other_income||"",deductions:s.deductions||"",extra_withholding:s.extra_withholding||""}))},[s]);const p=[{title:"Personal Information",icon:e.jsx(fe,{className:"h-5 w-5"}),fields:["first_name","middle_initial","last_name","address","apt_number","city","state","zip_code","ssn"]},{title:"Filing Status",icon:e.jsx(xs,{className:"h-5 w-5"}),fields:["filing_status","multiple_jobs"]},{title:"Dependents",icon:e.jsx(fe,{className:"h-5 w-5"}),fields:["qualifying_children","other_dependents"]},{title:"Other Adjustments",icon:e.jsx(tt,{className:"h-5 w-5"}),fields:["other_income","deductions","extra_withholding"]}],g=(k,P)=>{i(h=>({...h,[k]:P})),j[k]&&x(h=>({...h,[k]:""}))},f=k=>{const P=k.replace(/\D/g,"");return P.length<=3?P:P.length<=5?`${P.slice(0,3)}-${P.slice(3)}`:`${P.slice(0,3)}-${P.slice(3,5)}-${P.slice(5,9)}`},y=k=>{const P=k.replace(/[^0-9.]/g,""),h=P.split(".");return h.length>2?h[0]+"."+h.slice(1).join(""):P},T=k=>{const P={};return p[k].fields.forEach(F=>{switch(F){case"first_name":c.first_name.trim()||(P.first_name="First name is required");break;case"last_name":c.last_name.trim()||(P.last_name="Last name is required");break;case"address":c.address.trim()||(P.address="Address is required");break;case"city":c.city.trim()||(P.city="City is required");break;case"state":c.state||(P.state="State is required");break;case"zip_code":c.zip_code.trim()?/^\d{5}(-\d{4})?$/.test(c.zip_code)||(P.zip_code="Invalid ZIP code"):P.zip_code="ZIP code is required";break;case"ssn":c.ssn.trim()?c.ssn.replace(/\D/g,"").length!==9&&(P.ssn="SSN must be 9 digits"):P.ssn="SSN is required";break}}),x(P),Object.keys(P).length===0},C=()=>{if(T(o))if(o<p.length-1)r(o+1);else{const k={...c,qualifying_children:c.qualifying_children||0,other_dependents:c.other_dependents||0,other_income:c.other_income||"0",deductions:c.deductions||"0",extra_withholding:c.extra_withholding||"0"};t(k)}},w=()=>{o>0&&r(o-1)},A=()=>{const k=c.qualifying_children*2e3,P=c.other_dependents*500;return k+P},b=(o+1)/p.length*100;return e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(W,{className:"sr-only",children:"Form W-4"}),e.jsx("p",{className:"sr-only text-sm text-gray-600",children:"Employee's Withholding Certificate"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[p[o].icon,p[o].title]}),e.jsxs("span",{children:["Step ",o+1," of ",p.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]})]}),e.jsxs($,{className:"space-y-6",children:[o===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter your personal details as they appear on your Social Security card"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"first_name",children:"First Name *"}),e.jsx(M,{id:"first_name",value:c.first_name,onChange:k=>g("first_name",k.target.value),className:j.first_name?"border-red-500":""}),j.first_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.first_name})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"middle_initial",children:"Middle Initial"}),e.jsx(M,{id:"middle_initial",value:c.middle_initial,onChange:k=>g("middle_initial",k.target.value.slice(0,1).toUpperCase()),maxLength:1,className:"w-20"})]})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(M,{id:"last_name",value:c.last_name,onChange:k=>g("last_name",k.target.value),className:j.last_name?"border-red-500":""}),j.last_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.last_name})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"address",children:"Street Address *"}),e.jsx(M,{id:"address",value:c.address,onChange:k=>g("address",k.target.value),className:j.address?"border-red-500":"",placeholder:"123 Main Street"}),j.address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.address})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"apt_number",children:"Apt #"}),e.jsx(M,{id:"apt_number",value:c.apt_number,onChange:k=>g("apt_number",k.target.value),placeholder:"Optional"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(E,{htmlFor:"city",children:"City *"}),e.jsx(M,{id:"city",value:c.city,onChange:k=>g("city",k.target.value),className:j.city?"border-red-500":""}),j.city&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.city})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"state",children:"State *"}),e.jsxs("select",{id:"state",value:c.state,onChange:k=>g("state",k.target.value),className:`w-full h-10 px-3 rounded-md border ${j.state?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"",children:"Select State"}),ta.map(k=>e.jsx("option",{value:k,children:k},k))]}),j.state&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.state})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"zip_code",children:"ZIP Code *"}),e.jsx(M,{id:"zip_code",value:c.zip_code,onChange:k=>g("zip_code",k.target.value),className:j.zip_code?"border-red-500":"",placeholder:"12345"}),j.zip_code&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.zip_code})]})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"ssn",children:"Social Security Number *"}),e.jsx(M,{id:"ssn",value:c.ssn,onChange:k=>{const P=f(k.target.value);g("ssn",P)},className:j.ssn?"border-red-500":"",placeholder:"123-45-6789",maxLength:11}),j.ssn&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.ssn})]})]}),o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filing Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select your tax filing status"}),e.jsxs("div",{children:[e.jsx(E,{children:"Check the box that describes your filing status *"}),e.jsxs(Le,{value:c.filing_status,onValueChange:k=>g("filing_status",k),className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"single",id:"single"}),e.jsx(E,{htmlFor:"single",className:"font-normal cursor-pointer",children:"Single or Married filing separately"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"married_filing_jointly",id:"married"}),e.jsx(E,{htmlFor:"married",className:"font-normal cursor-pointer",children:"Married filing jointly (or Qualifying surviving spouse)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"head_of_household",id:"head"}),e.jsx(E,{htmlFor:"head",className:"font-normal cursor-pointer",children:"Head of household (Check only if you're unmarried and pay more than half the costs of keeping up a home for yourself and a qualifying individual)"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs(E,{className:"flex items-center space-x-2",children:[e.jsx(he,{checked:c.multiple_jobs,onCheckedChange:k=>g("multiple_jobs",k)}),e.jsx("span",{className:"font-normal",children:"Complete this step if you (1) hold more than one job at a time, or (2) are married filing jointly and your spouse also works"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 ml-6",children:"The correct amount of withholding depends on income earned from all of these jobs."})]}),e.jsx(V,{className:"mt-4",children:e.jsxs(Y,{children:[e.jsx("strong",{children:"Note:"})," If you have multiple jobs or your spouse works, you should complete the Multiple Jobs Worksheet or use the IRS Tax Withholding Estimator for most accurate withholding."]})})]}),o===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Claim Dependents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"If your income will be $200,000 or less ($400,000 or less if married filing jointly)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"qualifying_children",children:"Number of qualifying children under age 17"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(M,{id:"qualifying_children",type:"number",min:"0",value:c.qualifying_children,onChange:k=>g("qualifying_children",parseInt(k.target.value)||0),className:"w-20"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["× $2,000 = $",c.qualifying_children*2e3]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Multiply the number of qualifying children by $2,000"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"other_dependents",children:"Number of other dependents"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(M,{id:"other_dependents",type:"number",min:"0",value:c.other_dependents,onChange:k=>g("other_dependents",parseInt(k.target.value)||0),className:"w-20"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["× $500 = $",c.other_dependents*500]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Multiply the number of other dependents by $500"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Total amount for dependents:"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",A()]})]})]}),e.jsx(V,{children:e.jsxs(Y,{children:[e.jsx("strong",{children:"Qualifying children:"})," Must be under age 17, have a valid SSN, and meet other IRS requirements.",e.jsx("br",{}),e.jsx("strong",{children:"Other dependents:"})," Include children 17 or older and other qualifying relatives."]})})]}),o===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Other Adjustments (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use this step if you want tax withheld for other income or want to reduce your withholding"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"other_income",children:"(a) Other income (not from jobs)"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"$"}),e.jsx(M,{id:"other_income",value:c.other_income,onChange:k=>g("other_income",y(k.target.value)),placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If you want tax withheld on other income you expect this year (interest, dividends, retirement income, etc.)"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"deductions",children:"(b) Deductions"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"$"}),e.jsx(M,{id:"deductions",value:c.deductions,onChange:k=>g("deductions",y(k.target.value)),placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If you expect to claim deductions other than the standard deduction and want to reduce your withholding"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"extra_withholding",children:"(c) Extra withholding"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"$"}),e.jsx(M,{id:"extra_withholding",value:c.extra_withholding,onChange:k=>g("extra_withholding",y(k.target.value)),placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter any additional tax you want withheld each pay period"})]})]}),e.jsx(V,{children:e.jsxs(Y,{children:[e.jsx("strong",{children:"Note:"})," You can use the IRS Tax Withholding Estimator at www.irs.gov/W4App to determine a more accurate withholding amount."]})})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(K,{type:"button",variant:"outline",onClick:w,disabled:o===0,children:[e.jsx(zt,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsx(K,{type:"button",onClick:C,children:o===p.length-1?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),"Continue to Preview"]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(ut,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}async function aa(t){var s,n;try{console.log("=== GENERATING W-4 PDF ==="),console.log("Form data:",{...t,ssn:t.ssn?"***-**-"+t.ssn.slice(-4):"none"});const o=await fetch("/w4-form-template.pdf");if(!o.ok)throw new Error(`Failed to load W-4 template: ${o.status}`);const r=await o.arrayBuffer(),c=await Mt.load(r),i=c.getForm(),j={"topmostSubform[0].Page1[0].Step1a[0].f1_01[0]":t.first_name||"","topmostSubform[0].Page1[0].Step1a[0].f1_02[0]":t.last_name||"","topmostSubform[0].Page1[0].Step1a[0].f1_03[0]":t.address||"","topmostSubform[0].Page1[0].Step1a[0].f1_04[0]":`${t.city||""}, ${t.state||""} ${t.zip_code||""}`.trim(),"topmostSubform[0].Page1[0].f1_05[0]":t.ssn||"","topmostSubform[0].Page1[0].Step3_ReadOrder[0].f1_06[0]":t.qualifying_children>0?String(t.qualifying_children*2e3):"","topmostSubform[0].Page1[0].Step3_ReadOrder[0].f1_07[0]":t.other_dependents>0?String(t.other_dependents*500):"","topmostSubform[0].Page1[0].f1_09[0]":t.other_income||"","topmostSubform[0].Page1[0].f1_10[0]":t.deductions||"","topmostSubform[0].Page1[0].f1_11[0]":t.extra_withholding||""};for(const[f,y]of Object.entries(j))if(y)try{i.getTextField(f).setText(y),console.log(`✓ Filled field: ${f} = ${y}`)}catch(T){console.log(`⚠️ Could not fill field ${f}:`,T)}try{const y={single:"topmostSubform[0].Page1[0].c1_1[0]",married_filing_jointly:"topmostSubform[0].Page1[0].c1_1[1]",head_of_household:"topmostSubform[0].Page1[0].c1_1[2]"}[t.filing_status];y&&(i.getCheckBox(y).check(),console.log(`✓ Checked filing status: ${t.filing_status}`))}catch(f){console.log("⚠️ Could not set filing status checkbox:",f)}if(t.multiple_jobs)try{i.getCheckBox("topmostSubform[0].Page1[0].c1_2[0]").check(),console.log("✓ Checked multiple jobs checkbox")}catch(f){console.log("⚠️ Could not set multiple jobs checkbox:",f)}const x=(s=t.signatureData)!=null&&s.signedAt?new Date(t.signatureData.signedAt):new Date,p=`${(x.getMonth()+1).toString().padStart(2,"0")}/${x.getDate().toString().padStart(2,"0")}/${x.getFullYear()}`;try{i.getTextField("topmostSubform[0].Page1[0].f1_14[0]").setText(p),console.log(`✓ Filled signature date: ${p}`)}catch(f){console.log("⚠️ Could not fill date field:",f)}if((n=t.signatureData)!=null&&n.signature)try{console.log("Processing signature for W-4...");const y=(await ea(t.signatureData.signature)).split(",")[1],T=Uint8Array.from(atob(y),h=>h.charCodeAt(0)),C=await c.embedPng(T),A=c.getPages()[0],b=.25,k=C.width*b,P=C.height*b;A.drawImage(C,{x:100,y:102,width:k,height:P}),console.log("✓ Added signature to W-4 form");try{A.drawText(p,{x:390,y:82,size:10,color:ms(0,0,0)}),console.log("✓ Added date next to signature")}catch(h){console.log("⚠️ Could not add date text:",h)}}catch(f){console.error("Error adding signature to W-4:",f)}const g=await c.save();return console.log("=== W-4 PDF GENERATION COMPLETE ==="),g}catch(a){throw console.error("Error generating W-4 PDF:",a),a}}function Qa({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({}),[x,p]=v.useState(!1),[g,f]=v.useState(!1),[y,T]=v.useState(null),[C,w]=v.useState(null),{errors:A,fieldErrors:b,validate:k}=Pe(Ht),P={formData:i,showReview:x,isSigned:g,pdfUrl:C},{saveStatus:h}=pe(P,{onSave:async O=>{await a(t.id,O)}});v.useEffect(()=>{(async()=>{try{const m=sessionStorage.getItem(`onboarding_${t.id}_data`);if(console.log("W4FormStep - Loading saved data:",m),m)try{const I=JSON.parse(m);console.log("W4FormStep - Parsed data:",I);let d={};if(I.formData?d=I.formData:I.form_data?(d=I.form_data,I.signed&&(f(!0),p(!1)),I.pdf_url&&w(I.pdf_url)):d=I,d&&Object.keys(d).length>0&&j(d),I.isSigned||I.signed){f(!0),p(!1),(I.pdfUrl||I.pdf_url)&&w(I.pdfUrl||I.pdf_url);return}}catch(I){console.error("Failed to parse saved W-4 data:",I)}if(s.completedSteps.includes(t.id)){f(!0),p(!1);return}const u=sessionStorage.getItem("onboarding_w4-form_data");let S={};if(u){const I=JSON.parse(u);S=I.formData||I,j(S),I.isSigned&&(f(!0),p(!0)),I.pdfUrl&&w(I.pdfUrl)}const q=sessionStorage.getItem("onboarding_personal-info_data");if(q){const I=JSON.parse(q),d=I.personalInfo||I;if(d){const l={...S};let _=0;!l.first_name&&d.firstName&&(l.first_name=d.firstName,_++),!l.middle_initial&&d.middleInitial&&(l.middle_initial=d.middleInitial,_++),!l.last_name&&d.lastName&&(l.last_name=d.lastName,_++),!l.ssn&&d.ssn&&(l.ssn=d.ssn,_++),!l.address&&d.address&&(l.address=d.address,_++),!l.apt_number&&d.aptNumber&&(l.apt_number=d.aptNumber,_++),!l.city&&d.city&&(l.city=d.city,_++),!l.state&&d.state&&(l.state=d.state,_++),!l.zip_code&&d.zipCode&&(l.zip_code=d.zipCode,_++),!l.filing_status&&d.maritalStatus&&(d.maritalStatus==="single"||d.maritalStatus==="divorced"||d.maritalStatus==="widowed"?(l.filing_status="single",_++):d.maritalStatus==="married"&&(l.filing_status="married_filing_jointly",_++)),_>0&&(j(l),T(o==="es"?`Se han completado automáticamente ${_} campos con su información personal.`:`${_} fields have been auto-filled with your personal information.`),setTimeout(()=>T(null),5e3))}}}catch(m){console.error("Error loading W-4 data:",m)}})()},[t.id,s.completedSteps,o]);const F=async O=>{(await k(O)).valid&&(j(O),p(!0))},N=async O=>{var u,S;const m={formData:i,signed:!0,isSigned:!0,signatureData:O,completedAt:new Date().toISOString()};f(!0),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({...m,showReview:!0,pdfUrl:null})),sessionStorage.setItem("onboarding_w4-form_data",JSON.stringify(m)),await a(t.id,m),await n(t.id,m);try{console.log("Generating W-4 PDF with signature...");const q={...i,signatureData:{signature:O.signature,signedAt:O.signedAt||new Date().toISOString()}},I=await aa(q);let d="";const l=8192;for(let G=0;G<I.length;G+=l){const te=I.slice(G,G+l);d+=String.fromCharCode.apply(null,Array.from(te))}const _=btoa(d);w(_);const L={...m,showReview:!0,pdfUrl:_};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(L)),sessionStorage.setItem("onboarding_w4-form_data",JSON.stringify(L)),Te.post(`/api/onboarding/${r==null?void 0:r.id}/w4-form`,{form_data:i,signed:!0,signature_data:O.signature,completed_at:new Date().toISOString()}).catch(G=>{console.error("Failed to save W-4 to backend:",G)})}catch(q){console.error("Failed to generate W-4 PDF:",q);try{const d=await Te.post(`/api/onboarding/${r==null?void 0:r.id}/w4-form/generate-pdf`,{employee_data:{...i,signatureData:O}});if((S=(u=d.data)==null?void 0:u.data)!=null&&S.pdf){w(d.data.data.pdf);const l={...m,showReview:!0,pdfUrl:d.data.data.pdf};sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify(l)),sessionStorage.setItem("onboarding_w4-form_data",JSON.stringify(l))}}catch(I){console.error("Backend PDF generation also failed:",I)}}},D={en:{title:"W-4 Tax Withholding",description:"Complete Form W-4 to determine the correct amount of federal income tax to withhold from your pay.",federalNotice:"Form W-4 is required by the Internal Revenue Service (IRS) for all employees to determine federal income tax withholding.",completionMessage:"W-4 form completed successfully with digital signature.",importantInfoTitle:"Important Tax Information",importantInfo:["Complete this form based on your current tax situation","You can submit a new W-4 anytime your situation changes","Consider using the IRS Tax Withholding Estimator for accuracy","Consult a tax professional if you have complex tax situations"],formTitle:"Form W-4: Employee's Withholding Certificate",reviewTitle:"Review W-4 Form",reviewDescription:"Please review your tax withholding information and sign electronically",agreementText:"Under penalties of perjury, I declare that this certificate, to the best of my knowledge and belief, is true, correct, and complete."},es:{title:"Retención de Impuestos W-4",description:"Complete el Formulario W-4 para determinar la cantidad correcta de impuesto federal sobre la renta a retener de su pago.",federalNotice:"El Formulario W-4 es requerido por el Servicio de Impuestos Internos (IRS) para todos los empleados.",completionMessage:"Formulario W-4 completado exitosamente con firma digital.",importantInfoTitle:"Información Fiscal Importante",importantInfo:["Complete este formulario basado en su situación fiscal actual","Puede enviar un nuevo W-4 cuando cambie su situación","Considere usar el Estimador de Retención del IRS","Consulte a un profesional de impuestos si tiene situaciones complejas"],formTitle:"Formulario W-4: Certificado de Retención del Empleado",reviewTitle:"Revisar Formulario W-4",reviewDescription:"Por favor revise su información de retención de impuestos y firme electrónicamente",agreementText:"Bajo pena de perjurio, declaro que este certificado, a mi leal saber y entender, es verdadero, correcto y completo."}}[o];return e.jsx(le,{errors:A,fieldErrors:b,saveStatus:h,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(Ve,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-heading-secondary",children:D.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:D.description})]}),e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Ve,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Y,{className:"text-blue-800",children:[e.jsx("strong",{children:o==="es"?"Requisito Federal:":"Federal Requirement:"})," ",D.federalNotice]})]}),g&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:D.completionMessage})]}),y&&e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(J,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{className:"text-blue-800",children:y})]}),e.jsxs(z,{className:"border-orange-200 bg-orange-50",children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"text-lg flex items-center space-x-2 text-orange-800",children:[e.jsx(de,{className:"h-5 w-5"}),e.jsx("span",{children:D.importantInfoTitle})]})}),e.jsx($,{className:"text-orange-800",children:e.jsx("ul",{className:"space-y-2 text-sm",children:D.importantInfo.map((O,m)=>e.jsxs("li",{children:["• ",O]},m))})})]}),g&&C?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:D.completionMessage})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:o==="es"?"Vista previa del W-4 firmado":"Signed W-4 Preview"})]})}),e.jsx($,{children:e.jsx(Xt,{pdfData:C,height:"600px"})})]})]}):x?e.jsx(qe,{formType:"w4-form",formData:i,title:D.reviewTitle,description:D.reviewDescription,language:o,onSign:N,onBack:()=>p(!1),usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${r==null?void 0:r.id}/w4-form/generate-pdf`,pdfUrl:C,federalCompliance:{formName:"Form W-4, Employee's Withholding Certificate",retentionPeriod:"For 4 years after the date the last tax return using the information was filed",requiresWitness:!1},agreementText:D.agreementText}):e.jsx(We,{title:String(D.title||"W-4 Tax Withholding"),description:String(D.description||""),icon:e.jsx(ae,{}),completed:g,required:!0,children:e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:D.formTitle})]})}),e.jsx($,{children:e.jsx(sa,{initialData:i,language:o,employeeId:r==null?void 0:r.id,onComplete:F})})]})})]})})})}class ia{constructor(s="/api"){rt(this,"baseUrl");rt(this,"authToken",null);this.baseUrl=s}setAuthToken(s){this.authToken=s}async uploadDocument(s){const n=new FormData;n.append("file",s.file),n.append("document_type",s.documentType),n.append("employee_id",s.employeeId),n.append("property_id",s.propertyId),s.metadata&&n.append("metadata",JSON.stringify(s.metadata));const a=await fetch(`${this.baseUrl}/test/documents/upload`,{method:"POST",body:n});if(!a.ok){const r=await a.json();throw new Error(r.message||"Failed to upload document")}return(await a.json()).data}async downloadDocument(s){const n=await fetch(`${this.baseUrl}/documents/${s.documentId}/download`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({include_cover_sheet:s.includeeCoverSheet??!0})});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to download document")}return n.blob()}async viewDocument(s){const n=await fetch(`${this.baseUrl}/documents/${s}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const o=await n.json();throw new Error(o.message||"Failed to view document")}return(await n.json()).data}async getEmployeeDocuments(s,n){const a=new URLSearchParams;n&&a.append("document_type",n);const o=await fetch(`${this.baseUrl}/documents/employee/${s}?${a}`,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok){const c=await o.json();throw new Error(c.message||"Failed to get employee documents")}return(await o.json()).data.documents}async createDocumentPackage(s){const n=await fetch(`${this.baseUrl}/documents/package`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({document_ids:s.documentIds,package_title:s.packageTitle})});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to create document package")}return n.blob()}async verifyDocument(s){const n=await fetch(`${this.baseUrl}/documents/${s}/verify`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok){const o=await n.json();throw new Error(o.message||"Failed to verify document")}return(await n.json()).data}getDocumentPreviewUrl(s){return`${this.baseUrl}/documents/${s}/preview`}async downloadAndSaveFile(s,n){const a=await this.downloadDocument({documentId:s}),o=window.URL.createObjectURL(a),r=document.createElement("a");r.href=o,r.download=n||`document_${s}.pdf`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(o),document.body.removeChild(r)}validateFile(s){const a=["application/pdf","image/jpeg","image/jpg","image/png","image/tiff","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];return s.size>10485760?{valid:!1,error:"File size exceeds 10MB limit"}:a.includes(s.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Please upload PDF, JPG, PNG, TIFF, or Word documents."}}formatFileSize(s){if(s===0)return"0 Bytes";const n=1024,a=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,o)).toFixed(2))+" "+a[o]}getAuthHeaders(){const s={};return this.authToken&&(s.Authorization=`Bearer ${this.authToken}`),s}}const Ee=new ia("/api/api");function Pt({documentType:t,employeeId:s,propertyId:n,title:a,description:o,acceptedFileTypes:r=[".pdf",".jpg",".jpeg",".png",".doc",".docx"],maxFileSize:c=10*1024*1024,onUploadComplete:i,onUploadError:j,showPreview:x=!0,required:p=!1,existingDocument:g,language:f="en"}){const[y,T]=v.useState("idle"),[C,w]=v.useState(0),[A,b]=v.useState(g||null),[k,P]=v.useState(""),[h,F]=v.useState(""),N=v.useRef(null),R=I=>{var l;return((l={en:{upload_document:"Upload Document",drag_drop:"Drag and drop your file here, or click to browse",accepted_formats:"Accepted formats",max_size:"Maximum file size",uploading:"Uploading...",upload_complete:"Upload Complete",upload_failed:"Upload Failed",file_encrypted:"Your file is encrypted and stored securely",view_document:"View Document",download_document:"Download Document",replace_document:"Replace Document",remove_document:"Remove Document",required_document:"This document is required",legal_notice:"All documents are encrypted and stored in compliance with federal regulations",retention_period:"Retention period",years:"years"},es:{upload_document:"Cargar Documento",drag_drop:"Arrastra y suelta tu archivo aquí, o haz clic para buscar",accepted_formats:"Formatos aceptados",max_size:"Tamaño máximo del archivo",uploading:"Cargando...",upload_complete:"Carga Completa",upload_failed:"Error al Cargar",file_encrypted:"Su archivo está encriptado y almacenado de forma segura",view_document:"Ver Documento",download_document:"Descargar Documento",replace_document:"Reemplazar Documento",remove_document:"Eliminar Documento",required_document:"Este documento es requerido",legal_notice:"Todos los documentos están encriptados y almacenados de acuerdo con las regulaciones federales",retention_period:"Período de retención",years:"años"}}[f])==null?void 0:l[I])||I},D=async I=>{var _;const d=(_=I.target.files)==null?void 0:_[0];if(!d)return;const l=Ee.validateFile(d);if(!l.valid){P(l.error||"Invalid file"),T("error");return}T("uploading"),w(0),P("");try{const L=setInterval(()=>{w(G=>Math.min(G+10,90))},200),ee=await Ee.uploadDocument({file:d,documentType:t,employeeId:s,propertyId:n,metadata:{originalFilename:d.name,uploadedFrom:"onboarding_form"}});if(clearInterval(L),w(100),T("success"),b(ee),d.type.startsWith("image/")&&x){const G=new FileReader;G.onload=te=>{var xe;F((xe=te.target)==null?void 0:xe.result)},G.readAsDataURL(d)}i&&i(ee)}catch(L){T("error"),P(L instanceof Error?L.message:"Upload failed"),j&&j(L instanceof Error?L:new Error("Upload failed"))}},O=I=>{I.preventDefault(),I.stopPropagation()},m=I=>{I.preventDefault(),I.stopPropagation();const d=I.dataTransfer.files[0];if(d&&N.current){const l=new DataTransfer;l.items.add(d),N.current.files=l.files,D({target:{files:l.files}})}},u=async()=>{if(A)try{const I=await Ee.downloadDocument({documentId:A.document_id}),d=window.URL.createObjectURL(I);window.open(d,"_blank"),window.URL.revokeObjectURL(d)}catch{P("Failed to view document")}},S=async()=>{if(A)try{await Ee.downloadAndSaveFile(A.document_id,A.original_filename)}catch{P("Failed to download document")}},q=()=>({i9_form:3,w4_form:4,direct_deposit:3,voided_check:3,insurance_form:6,company_policies:7,background_check:2})[t]||7;return e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:a}),p&&e.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),o&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),A?e.jsxs("div",{className:"border rounded-lg p-4 bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:A.original_filename||"Document"}),e.jsx("p",{className:"text-sm text-green-700",children:Ee.formatFileSize(A.file_size)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Uploaded: ",new Date(A.uploaded_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:u,title:R("view_document"),children:e.jsx(it,{className:"h-4 w-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:S,title:R("download_document"),children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{b(null),T("idle"),F("")},title:R("replace_document"),children:e.jsx(ss,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center space-x-2 text-xs text-green-700",children:[e.jsx(ys,{className:"h-3 w-3"}),e.jsx("span",{children:R("file_encrypted")})]})]}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${y==="error"?"border-red-300 bg-red-50":"border-gray-300 hover:border-blue-400"}`,onDragOver:O,onDrop:m,children:[e.jsx("input",{ref:N,type:"file",accept:r.join(","),onChange:D,className:"hidden",id:`file-upload-${t}`}),y==="idle"&&e.jsxs("label",{htmlFor:`file-upload-${t}`,className:"cursor-pointer",children:[e.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:R("drag_drop")}),e.jsxs("p",{className:"text-xs text-gray-500",children:[R("accepted_formats"),": ",r.join(", ")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[R("max_size"),": ",Ee.formatFileSize(c)]})]}),y==="uploading"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(st,{className:"h-8 w-8 text-blue-600 animate-pulse"}),e.jsx("span",{className:"text-blue-600 font-medium",children:R("uploading")})]}),e.jsx($t,{value:C,className:"w-full max-w-xs mx-auto"})]}),y==="error"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsx("p",{className:"text-red-600 font-medium",children:R("upload_failed")}),e.jsx("p",{className:"text-sm text-red-500",children:k}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{T("idle"),P("")},children:"Try Again"})]})]}),x&&h&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:h,alt:"Document preview",className:"max-w-full h-auto rounded-lg border",style:{maxHeight:"300px"}})}),e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Y,{className:"text-xs text-blue-800",children:[e.jsx("p",{className:"font-medium",children:R("legal_notice")}),e.jsxs("p",{className:"mt-1",children:[R("retention_period"),": ",q()," ",R("years")]})]})]}),p&&!A&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsx("span",{children:R("required_document")})]})]})})}var Kt=(t=>(t.I9_FORM="i9_form",t.W4_FORM="w4_form",t.DIRECT_DEPOSIT="direct_deposit",t.INSURANCE_FORM="insurance_form",t.COMPANY_POLICIES="company_policies",t.BACKGROUND_CHECK="background_check",t.DRIVERS_LICENSE="drivers_license",t.PASSPORT="passport",t.SOCIAL_SECURITY="social_security",t.WORK_PERMIT="work_permit",t.VOIDED_CHECK="voided_check",t.OTHER="other",t))(Kt||{});const Et=t=>{if(!/^\d{9}$/.test(t))return!1;const s=[3,7,1,3,7,1,3,7,1];let n=0;for(let a=0;a<9;a++)n+=parseInt(t[a])*s[a];return n%10===0},Xe={"021000021":"JPMorgan Chase","026009593":"Bank of America",121000358:"Wells Fargo","056008849":"PNC Bank","053101121":"SunTrust Bank","071000013":"US Bank",111000025:"Bank of the West","021200025":"TD Bank","031100649":"Capital One","021001033":"HSBC"};function na({initialData:t={},language:s,onSave:n,onNext:a,onBack:o,onValidationChange:r,useMainNavigation:c=!1,employee:i,property:j,sessionToken:x}){const[p,g]=v.useState({paymentMethod:"direct_deposit",depositType:"full",primaryAccount:{bankName:"",routingNumber:"",accountNumber:"",accountNumberConfirm:"",accountType:"checking",depositAmount:0,percentage:100},additionalAccounts:[],voidedCheckUploaded:!1,bankLetterUploaded:!1,totalPercentage:100,authorizeDeposit:!1,employeeSignature:"",dateOfAuth:new Date().toISOString().split("T")[0],...t}),[f,y]=v.useState({}),[T,C]=v.useState({}),[w,A]=v.useState(!1),[b,k]=v.useState(!1);v.useEffect(()=>{t&&Object.keys(t).length>0&&(console.log("DirectDepositFormEnhanced - Updating from initialData:",t),g(d=>({...d,...t,primaryAccount:{...d.primaryAccount,...t.primaryAccount||{}}})))},[t]);const{saveStatus:P}=pe(p,{onSave:async d=>{sessionStorage.setItem("direct_deposit_form_data",JSON.stringify(d)),n&&Object.keys(T).length>0&&n(d)},delay:2e3,enabled:!0}),h=d=>{var _;return((_={en:{direct_deposit:"Payment Method Setup",payment_method:"How would you like to receive your pay?",direct_deposit_option:"Direct Deposit",paper_check_option:"Paper Check",direct_deposit_desc:"Fast, secure electronic deposit to your bank account",paper_check_desc:"Physical check available for pickup on payday",deposit_types:"Deposit Options",full_deposit:"Full Direct Deposit",partial_deposit:"Partial Direct Deposit",split_deposit:"Split Between Multiple Accounts",full_desc:"Entire paycheck deposited to one account",partial_desc:"Specific amount deposited, remainder by check",split_desc:"Divide paycheck between multiple accounts",primary_account:"Primary Bank Account",additional_accounts:"Additional Accounts",bank_name:"Bank Name",routing_number:"Routing Number",account_number:"Account Number",confirm_account:"Confirm Account Number",account_type:"Account Type",select_account_type:"Select account type",checking:"Checking",savings:"Savings",deposit_amount:"Deposit Amount",percentage:"Percentage",add_account:"Add Another Account",remove_account:"Remove Account",verification_docs:"Account Verification (Required)",voided_check:"Voided Check",bank_letter:"Bank Letter",upload_voided_check:"Upload Voided Check",upload_bank_letter:"Upload Bank Letter or Statement",voided_check_desc:'Write "VOID" across a blank check from your account',bank_letter_desc:"Official letter from bank with account details",authorization:"Authorization",authorize_text:"I authorize my employer to deposit my pay to the account(s) specified above",paper_check_acknowledge:"I understand paper checks must be picked up on payday at the hotel",signature_required:"Employee signature required",date_of_auth:"Date of Authorization",important_info:"Important Information",routing_help:"9-digit number at bottom left of check",account_help:"Account number at bottom center of check",changes_notice:"Changes take 1-2 pay periods to take effect",security_notice:"Your banking information is encrypted and secure",total_percentage:"Total Percentage",percentage_error:"Total percentage must equal 100%",required_field:"This field is required",invalid_routing:"Invalid routing number",invalid_account:"Please enter a valid account number",account_mismatch:"Account numbers do not match",next:"Next",back:"Back",save_continue:"Save & Continue",file_uploaded:"File uploaded",remove_file:"Remove file",bank_detected:"Bank detected",check_routing:"Verifying routing number...",routing_valid:"Valid routing number",max_3_accounts:"Maximum 3 additional accounts allowed"},es:{direct_deposit:"Configuración de Método de Pago",payment_method:"¿Cómo le gustaría recibir su pago?",direct_deposit_option:"Depósito Directo",paper_check_option:"Cheque en Papel",direct_deposit_desc:"Depósito electrónico rápido y seguro a su cuenta bancaria",paper_check_desc:"Cheque físico disponible para recoger el día de pago",account_type:"Tipo de Cuenta",select_account_type:"Seleccionar tipo de cuenta",checking:"Corriente",savings:"Ahorros",next:"Siguiente",back:"Atrás",save_continue:"Guardar y Continuar"}}[s])==null?void 0:_[d])||d},F=v.useCallback(()=>{const d={};if(p.paymentMethod==="direct_deposit"){if(p.primaryAccount.bankName.trim()||(d["primaryAccount.bankName"]=h("required_field")),p.primaryAccount.routingNumber.trim()?Et(p.primaryAccount.routingNumber)||(d["primaryAccount.routingNumber"]=h("invalid_routing")):d["primaryAccount.routingNumber"]=h("required_field"),p.primaryAccount.accountNumber.trim()?(p.primaryAccount.accountNumber.length<4||p.primaryAccount.accountNumber.length>17)&&(d["primaryAccount.accountNumber"]="Account number must be between 4-17 digits"):d["primaryAccount.accountNumber"]=h("required_field"),p.primaryAccount.accountNumberConfirm.trim()?p.primaryAccount.accountNumber!==p.primaryAccount.accountNumberConfirm&&(d["primaryAccount.accountNumberConfirm"]=h("account_mismatch")):d["primaryAccount.accountNumberConfirm"]=h("required_field"),p.depositType==="split"){const _=p.primaryAccount.percentage+p.additionalAccounts.reduce((L,ee)=>L+ee.percentage,0);Math.abs(_-100)>.01&&(d.totalPercentage=h("percentage_error"))}p.depositType==="split"&&p.additionalAccounts.forEach((_,L)=>{_.bankName.trim()||(d[`additionalAccounts.${L}.bankName`]=h("required_field")),_.routingNumber.trim()?Et(_.routingNumber)||(d[`additionalAccounts.${L}.routingNumber`]=h("invalid_routing")):d[`additionalAccounts.${L}.routingNumber`]=h("required_field"),_.accountNumber.trim()||(d[`additionalAccounts.${L}.accountNumber`]=h("required_field")),_.accountNumberConfirm.trim()?_.accountNumber!==_.accountNumberConfirm&&(d[`additionalAccounts.${L}.accountNumberConfirm`]=h("account_mismatch")):d[`additionalAccounts.${L}.accountNumberConfirm`]=h("required_field")}),!p.voidedCheckUploaded&&!p.bankLetterUploaded&&(d.verification="Please upload either a voided check or bank letter for verification")}p.authorizeDeposit||(d.authorizeDeposit="Authorization is required to process payments"),y(d);const l=Object.keys(d).length===0;return k(l),r&&r(l,d),l},[p,h,r]);v.useEffect(()=>{const d=sessionStorage.getItem("direct_deposit_form_data");if(d&&!t)try{const l=JSON.parse(d);g(l)}catch(l){console.error("Failed to load saved direct deposit data:",l)}},[]),v.useEffect(()=>{F()},[p,F]);const N=(d,l)=>{const _=d.split(".");if(_.length===1?g(L=>({...L,[d]:l})):_[0]==="primaryAccount"&&g(L=>({...L,primaryAccount:{...L.primaryAccount,[_[1]]:l}})),C(L=>({...L,[d]:!0})),f[d]&&y(L=>({...L,[d]:""})),d.endsWith("routingNumber")&&l.length===9){const L=Xe[l];L&&d.startsWith("primaryAccount")&&g(ee=>({...ee,primaryAccount:{...ee.primaryAccount,bankName:L}}))}},R=d=>{C(l=>({...l,[d]:!0}))},D=d=>w||T[d],O=(d,l,_)=>{const L=[...p.additionalAccounts];L[d]={...L[d],[l]:_},g(G=>({...G,additionalAccounts:L}));const ee=`additionalAccounts.${d}.${l}`;if(C(G=>({...G,[ee]:!0})),f[ee]&&y(G=>({...G,[ee]:""})),l==="routingNumber"&&_.length===9){const G=Xe[_];G&&(L[d].bankName=G,g(te=>({...te,additionalAccounts:L})))}},m=()=>{if(p.additionalAccounts.length>=3)return;const d={bankName:"",routingNumber:"",accountNumber:"",accountNumberConfirm:"",accountType:"checking",depositAmount:0,percentage:0};g(l=>({...l,additionalAccounts:[...l.additionalAccounts,d]}))},u=d=>{g(l=>({...l,additionalAccounts:l.additionalAccounts.filter((_,L)=>L!==d)}))},S=()=>{A(!0),F()&&(n(p),sessionStorage.removeItem("direct_deposit_form_data"),!c&&a&&a())},q=d=>d.replace(/\D/g,"").slice(0,9),I=d=>d.replace(/\D/g,"").slice(0,17);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:P==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:s==="es"?"Guardando...":"Saving..."})]}):P==="saved"?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:s==="es"?"Guardado automáticamente":"Auto-saved"})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-orange-600",children:s==="es"?"Sin guardar":"Unsaved changes"})]})}),e.jsx("div",{className:"text-xs text-gray-500",children:s==="es"?"Auto-guardado cada 30 segundos":"Auto-saves every 30 seconds"})]})}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"text-lg flex items-center space-x-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:h("payment_method")})]})}),e.jsx($,{children:e.jsxs(Le,{value:p.paymentMethod,onValueChange:d=>N("paymentMethod",d),className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx(oe,{value:"direct_deposit",id:"direct_deposit",className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"direct_deposit",className:"font-medium text-sm cursor-pointer",children:h("direct_deposit_option")}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:h("direct_deposit_desc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx(oe,{value:"paper_check",id:"paper_check",className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"paper_check",className:"font-medium text-sm cursor-pointer",children:h("paper_check_option")}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:h("paper_check_desc")})]})]})]})})]}),p.paymentMethod==="direct_deposit"&&e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsx(W,{className:"text-lg",children:h("deposit_types")})}),e.jsx($,{children:e.jsxs(Le,{value:p.depositType,onValueChange:d=>N("depositType",d),className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[e.jsx(oe,{value:"full",id:"full"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"full",className:"font-medium text-sm",children:h("full_deposit")}),e.jsx("p",{className:"text-xs text-gray-600",children:h("full_desc")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[e.jsx(oe,{value:"partial",id:"partial"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"partial",className:"font-medium text-sm",children:h("partial_deposit")}),e.jsx("p",{className:"text-xs text-gray-600",children:h("partial_desc")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[e.jsx(oe,{value:"split",id:"split"}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"split",className:"font-medium text-sm",children:h("split_deposit")}),e.jsx("p",{className:"text-xs text-gray-600",children:h("split_desc")})]})]})]})})]}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"flex items-center space-x-2 text-lg",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:h("primary_account")})]})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(E,{htmlFor:"bankName",className:"text-sm",children:[h("bank_name")," *"]}),e.jsx(M,{id:"bankName",value:p.primaryAccount.bankName,onChange:d=>N("primaryAccount.bankName",d.target.value),onBlur:()=>R("primaryAccount.bankName"),className:D("primaryAccount.bankName")&&f["primaryAccount.bankName"]?"border-red-500":"",placeholder:""}),D("primaryAccount.bankName")&&f["primaryAccount.bankName"]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f["primaryAccount.bankName"]})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"accountType",className:"text-sm",children:[h("account_type")," *"]}),e.jsxs(Se,{value:p.primaryAccount.accountType,onValueChange:d=>N("primaryAccount.accountType",d),children:[e.jsx(Ce,{children:e.jsx(ke,{placeholder:h("select_account_type")})}),e.jsxs(Ae,{children:[e.jsx(be,{value:"checking",children:h("checking")}),e.jsx(be,{value:"savings",children:h("savings")})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"routingNumber",className:"text-sm",children:[h("routing_number")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{id:"routingNumber",value:p.primaryAccount.routingNumber,onChange:d=>N("primaryAccount.routingNumber",q(d.target.value)),onBlur:()=>R("primaryAccount.routingNumber"),className:D("primaryAccount.routingNumber")&&f["primaryAccount.routingNumber"]?"border-red-500":"",placeholder:"9-digit routing number",maxLength:9}),p.primaryAccount.routingNumber.length===9&&!f["primaryAccount.routingNumber"]&&e.jsx(De,{className:"absolute right-3 top-3 h-4 w-4 text-green-600"})]}),D("primaryAccount.routingNumber")&&f["primaryAccount.routingNumber"]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f["primaryAccount.routingNumber"]}),Xe[p.primaryAccount.routingNumber]&&e.jsxs("p",{className:"text-green-600 text-xs mt-1",children:[h("bank_detected"),": ",Xe[p.primaryAccount.routingNumber]]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"accountNumber",className:"text-sm",children:[h("account_number")," *"]}),e.jsx(M,{id:"accountNumber",type:"password",value:p.primaryAccount.accountNumber,onChange:d=>N("primaryAccount.accountNumber",I(d.target.value)),onBlur:()=>R("primaryAccount.accountNumber"),className:D("primaryAccount.accountNumber")&&f["primaryAccount.accountNumber"]?"border-red-500":"",placeholder:"",maxLength:17}),D("primaryAccount.accountNumber")&&f["primaryAccount.accountNumber"]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f["primaryAccount.accountNumber"]})]}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"accountNumberConfirm",className:"text-sm",children:[h("confirm_account")," *"]}),e.jsx(M,{id:"accountNumberConfirm",value:p.primaryAccount.accountNumberConfirm,onChange:d=>N("primaryAccount.accountNumberConfirm",I(d.target.value)),onBlur:()=>R("primaryAccount.accountNumberConfirm"),className:D("primaryAccount.accountNumberConfirm")&&f["primaryAccount.accountNumberConfirm"]?"border-red-500":"",placeholder:"",maxLength:17}),D("primaryAccount.accountNumberConfirm")&&f["primaryAccount.accountNumberConfirm"]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f["primaryAccount.accountNumberConfirm"]})]})]}),(p.depositType==="partial"||p.depositType==="split")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2 border-t",children:[p.depositType==="partial"&&e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"depositAmount",className:"text-sm",children:[h("deposit_amount")," *"]}),e.jsx(M,{id:"depositAmount",type:"number",min:"0",step:"0.01",value:p.primaryAccount.depositAmount||"",onChange:d=>N("primaryAccount.depositAmount",parseFloat(d.target.value)||0),placeholder:"Amount per paycheck"})]}),p.depositType==="split"&&e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"percentage",className:"text-sm",children:[h("percentage")," *"]}),e.jsx(M,{id:"percentage",type:"number",min:"0",max:"100",step:"1",value:p.primaryAccount.percentage||"",onChange:d=>N("primaryAccount.percentage",parseFloat(d.target.value)||0),placeholder:"%"})]})]}),e.jsxs(V,{className:"py-2",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsxs(Y,{className:"text-xs",children:[e.jsx("strong",{children:"Finding your numbers:"})," Look at the bottom of your check. The routing number is the 9-digit number on the left, and the account number is in the middle (usually 10-12 digits)."]})]})]})]}),p.depositType==="split"&&e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:h("additional_accounts")}),e.jsxs(K,{variant:"outline",size:"sm",onClick:m,disabled:p.additionalAccounts.length>=3,children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),h("add_account")]})]}),p.additionalAccounts.length>=3&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:h("max_3_accounts")})]}),e.jsxs($,{className:"space-y-4",children:[p.additionalAccounts.map((d,l)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium",children:["Account ",l+2]}),e.jsxs(K,{variant:"outline",size:"sm",onClick:()=>u(l),children:[e.jsx(Wt,{className:"h-4 w-4 mr-2"}),h("remove_account")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("bank_name")," *"]}),e.jsx(M,{value:d.bankName,onChange:_=>O(l,"bankName",_.target.value),onBlur:()=>R(`additionalAccounts.${l}.bankName`),className:D(`additionalAccounts.${l}.bankName`)&&f[`additionalAccounts.${l}.bankName`]?"border-red-500":"",placeholder:""}),D(`additionalAccounts.${l}.bankName`)&&f[`additionalAccounts.${l}.bankName`]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f[`additionalAccounts.${l}.bankName`]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("account_type")," *"]}),e.jsxs(Se,{value:d.accountType,onValueChange:_=>O(l,"accountType",_),children:[e.jsx(Ce,{children:e.jsx(ke,{placeholder:h("select_account_type")})}),e.jsxs(Ae,{children:[e.jsx(be,{value:"checking",children:h("checking")}),e.jsx(be,{value:"savings",children:h("savings")})]})]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("routing_number")," *"]}),e.jsx(M,{value:d.routingNumber,onChange:_=>O(l,"routingNumber",q(_.target.value)),onBlur:()=>R(`additionalAccounts.${l}.routingNumber`),className:D(`additionalAccounts.${l}.routingNumber`)&&f[`additionalAccounts.${l}.routingNumber`]?"border-red-500":"",placeholder:"",maxLength:9}),D(`additionalAccounts.${l}.routingNumber`)&&f[`additionalAccounts.${l}.routingNumber`]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f[`additionalAccounts.${l}.routingNumber`]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("account_number")," *"]}),e.jsx(M,{type:"password",value:d.accountNumber,onChange:_=>O(l,"accountNumber",I(_.target.value)),onBlur:()=>R(`additionalAccounts.${l}.accountNumber`),className:D(`additionalAccounts.${l}.accountNumber`)&&f[`additionalAccounts.${l}.accountNumber`]?"border-red-500":"",placeholder:""}),D(`additionalAccounts.${l}.accountNumber`)&&f[`additionalAccounts.${l}.accountNumber`]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f[`additionalAccounts.${l}.accountNumber`]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("confirm_account")," *"]}),e.jsx(M,{value:d.accountNumberConfirm,onChange:_=>O(l,"accountNumberConfirm",I(_.target.value)),onBlur:()=>R(`additionalAccounts.${l}.accountNumberConfirm`),className:D(`additionalAccounts.${l}.accountNumberConfirm`)&&f[`additionalAccounts.${l}.accountNumberConfirm`]?"border-red-500":"",placeholder:""}),D(`additionalAccounts.${l}.accountNumberConfirm`)&&f[`additionalAccounts.${l}.accountNumberConfirm`]&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f[`additionalAccounts.${l}.accountNumberConfirm`]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"text-sm",children:[h("percentage")," *"]}),e.jsx(M,{type:"number",min:"0",max:"100",step:"1",value:d.percentage||"",onChange:_=>O(l,"percentage",parseFloat(_.target.value)||0),placeholder:"%"})]})]})]},l)),p.depositType==="split"&&p.additionalAccounts.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[h("total_percentage"),":"]}),e.jsxs(Ge,{variant:Math.abs(p.primaryAccount.percentage+p.additionalAccounts.reduce((d,l)=>d+l.percentage,0)-100)>.01?"destructive":"default",children:[(p.primaryAccount.percentage+p.additionalAccounts.reduce((d,l)=>d+l.percentage,0)).toFixed(1),"%"]})]}),D("totalPercentage")&&f.totalPercentage&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f.totalPercentage})]})]})]}),e.jsxs(z,{children:[e.jsxs(B,{className:"pb-3",children:[e.jsxs(W,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{children:h("verification_docs")})]}),e.jsx(Be,{className:"text-sm",children:"Please upload one of the following documents to verify your account"})]}),e.jsxs($,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Pt,{documentType:Kt.VOIDED_CHECK,employeeId:(i==null?void 0:i.id)||"temp-employee-id",propertyId:(j==null?void 0:j.id)||"temp-property-id",title:h("voided_check"),description:h("voided_check_desc"),acceptedFileTypes:[".pdf",".jpg",".jpeg",".png"],maxFileSize:10*1024*1024,onUploadComplete:d=>{g(l=>({...l,voidedCheckUploaded:!0,voidedCheckDocument:d}))},onUploadError:d=>{console.error("Failed to upload voided check:",d)},existingDocument:p.voidedCheckDocument,language:s}),e.jsx(Pt,{documentType:"bank_letter",employeeId:(i==null?void 0:i.id)||"temp-employee-id",propertyId:(j==null?void 0:j.id)||"temp-property-id",title:h("bank_letter"),description:h("bank_letter_desc"),acceptedFileTypes:[".pdf",".jpg",".jpeg",".png"],maxFileSize:10*1024*1024,onUploadComplete:d=>{g(l=>({...l,bankLetterUploaded:!0,bankLetterDocument:d}))},onUploadError:d=>{console.error("Failed to upload bank letter:",d)},existingDocument:p.bankLetterDocument,language:s})]}),D("verification")&&f.verification&&e.jsxs(V,{className:"mt-3 py-2",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsx(Y,{className:"text-red-600 text-xs",children:f.verification})]})]})]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsx(W,{className:"text-lg",children:h("authorization")})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(he,{id:"authorizeDeposit",checked:p.authorizeDeposit,onCheckedChange:d=>N("authorizeDeposit",!!d),className:"mt-1"}),e.jsx(E,{htmlFor:"authorizeDeposit",className:"text-sm leading-relaxed cursor-pointer",children:p.paymentMethod==="direct_deposit"?`${h("authorize_text")}. I understand this authorization remains in effect until I provide written notice to revoke it.`:h("paper_check_acknowledge")})]}),D("authorizeDeposit")&&f.authorizeDeposit&&e.jsx("p",{className:"text-red-600 text-xs",children:f.authorizeDeposit}),e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"dateOfAuth",className:"text-sm",children:[h("date_of_auth")," *"]}),e.jsx(M,{id:"dateOfAuth",type:"date",value:p.dateOfAuth,onChange:d=>N("dateOfAuth",d.target.value),className:"max-w-xs",readOnly:!0})]})]})]}),e.jsxs(V,{className:"py-2",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsxs(Y,{className:"text-xs",children:[e.jsxs("p",{className:"font-medium mb-1",children:[h("important_info"),":"]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{children:["• ",h("changes_notice")]}),e.jsxs("li",{children:["• ",h("security_notice")]}),p.paymentMethod==="paper_check"&&e.jsx("li",{children:"• Paper checks must be picked up from HR on payday"})]})]})]}),!c&&e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[o&&e.jsx(K,{variant:"outline",onClick:o,children:h("back")}),e.jsx(K,{onClick:S,disabled:!b,children:h("save_continue")})]}),c&&e.jsx(K,{onClick:S,className:"hidden",disabled:!b,children:"Save Direct Deposit"})]})}function ei({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({}),[x,p]=v.useState(!1),[g,f]=v.useState(!1),[y,T]=v.useState(!1),{errors:C,fieldErrors:w,validate:A}=Pe(Vt),b=Ot.useMemo(()=>{const m=[];return C&&C.length>0&&m.push(...C.map(u=>({message:u,type:"error"}))),w&&Object.entries(w).forEach(([u,S])=>{S&&m.push({field:u,message:S,type:"error"})}),m},[C,w]),k={formData:i,isValid:x,isSigned:g,showReview:y},{saveStatus:P}=pe(k,{onSave:async m=>{await a(t.id,m)}});v.useEffect(()=>{console.log("DirectDepositStep - Loading data for step:",t.id);const m=sessionStorage.getItem(`onboarding_${t.id}_data`);if(m)try{const u=JSON.parse(m);console.log("DirectDepositStep - Found saved data:",u),u.formData?(console.log("DirectDepositStep - Setting formData from parsed.formData"),j(u.formData)):(u.paymentMethod||u.primaryAccount)&&(console.log("DirectDepositStep - Setting formData from direct structure"),j(u)),(u.isSigned||u.signed)&&(console.log("DirectDepositStep - Form was previously signed"),f(!0),p(!0))}catch(u){console.error("Failed to parse saved direct deposit data:",u)}s.completedSteps.includes(t.id)&&(console.log("DirectDepositStep - Step marked as complete in progress"),f(!0),p(!0))},[t.id,s.completedSteps]);const h=async m=>{var q,I,d,l,_;const u={paymentMethod:m.paymentMethod,accountType:(q=m.primaryAccount)==null?void 0:q.accountType,bankName:(I=m.primaryAccount)==null?void 0:I.bankName,routingNumber:(d=m.primaryAccount)==null?void 0:d.routingNumber,accountNumber:(l=m.primaryAccount)==null?void 0:l.accountNumber,confirmAccountNumber:(_=m.primaryAccount)==null?void 0:_.accountNumberConfirm,voidedCheckUploaded:m.voidedCheckUploaded,bankLetterUploaded:m.bankLetterUploaded,accountVerified:m.accountVerified||m.voidedCheckUploaded||m.bankLetterUploaded};(await A(u)).valid&&(j(m),p(!0),T(!0),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({formData:m,isValid:!0,isSigned:!1,showReview:!0})))},F=()=>{T(!1)},N=async m=>{f(!0);const u={...i.primaryAccount||{},...i,formData:i,signed:!0,isSigned:!0,signatureData:m,completedAt:new Date().toISOString()};if(r!=null&&r.id)try{await Te.post(`/api/onboarding/${r.id}/direct-deposit`,u),console.log("Direct deposit data saved to backend")}catch(S){console.error("Failed to save direct deposit data to backend:",S)}sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({...i.primaryAccount||{},...i,formData:i,isValid:!0,isSigned:!0,showReview:!1,signed:!0,signatureData:m,completedAt:u.completedAt})),await a(t.id,u),await n(t.id,u),T(!1)},R=x&&g,O={en:{title:"Payment Method Setup",reviewTitle:"Review Direct Deposit",description:"Choose how you want to receive your pay. Direct deposit is the fastest and most secure way to receive your paycheck.",completionMessage:"Payment method configured successfully!",importantInfoTitle:"Important Information",importantInfo:["Direct deposit is available 1-2 days earlier than paper checks","Changes take 1-2 pay periods to take effect","You can update your payment method anytime through HR","Ensure your banking information is accurate"],formTitle:"Direct Deposit Setup",acknowledgments:{directDeposit:"I authorize my employer to deposit my pay electronically",paperCheck:"I choose to receive paper checks and will pick them up on payday",understand:"I understand changes take 1-2 pay periods to take effect",update:"I can update my payment method at any time through HR"}},es:{title:"Configuración de Método de Pago",reviewTitle:"Revisar Depósito Directo",description:"Elija cómo desea recibir su pago. El depósito directo es la forma más rápida y segura de recibir su salario.",completionMessage:"¡Método de pago configurado exitosamente!",importantInfoTitle:"Información Importante",importantInfo:["El depósito directo está disponible 1-2 días antes que los cheques en papel","Los cambios tardan 1-2 períodos de pago en entrar en vigencia","Puede actualizar su método de pago en cualquier momento a través de RRHH","Asegúrese de que su información bancaria sea precisa"],formTitle:"Configuración de Depósito Directo",acknowledgments:{directDeposit:"Autorizo a mi empleador a depositar mi pago electrónicamente",paperCheck:"Elijo recibir cheques en papel y los recogeré el día de pago",understand:"Entiendo que los cambios tardan 1-2 períodos de pago en entrar en vigencia",update:"Puedo actualizar mi método de pago en cualquier momento a través de RRHH"}}}[o];return y&&i?e.jsx(le,{errors:C,saveStatus:P,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[b.length>0&&e.jsx(Nt,{messages:b,title:"Please correct the following issues",className:"mb-6"}),e.jsx(We,{title:O.reviewTitle,description:"Please review your direct deposit information and sign to complete this step",icon:e.jsx(tt,{className:"h-5 w-5"}),required:!0,children:e.jsx(qe,{formType:"direct_deposit",formTitle:"Direct Deposit Authorization Form",formData:i,documentName:"Direct Deposit Authorization",signerName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||"Employee",signerTitle:r==null?void 0:r.position,onSign:N,onEdit:F,acknowledgments:[i.paymentMethod==="direct_deposit"?O.acknowledgments.directDeposit:O.acknowledgments.paperCheck,O.acknowledgments.understand,O.acknowledgments.update],language:o,usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${(r==null?void 0:r.id)||"test-employee"}/direct-deposit/generate-pdf`})})]})})}):e.jsx(le,{errors:C,fieldErrors:w,saveStatus:P,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[b.length>0&&e.jsx(Nt,{messages:b,title:"Please correct the following issues",className:"mb-6"}),R&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:O.completionMessage})]}),e.jsx(We,{title:O.title,description:O.description,icon:e.jsx(tt,{className:"h-5 w-5"}),completed:R,required:!0,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{className:"border-amber-200 bg-amber-50",children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"text-lg flex items-center space-x-2 text-amber-800",children:[e.jsx(de,{className:"h-5 w-5"}),e.jsx("span",{children:O.importantInfoTitle})]})}),e.jsx($,{className:"text-amber-800",children:e.jsx("ul",{className:"space-y-2 text-sm",children:O.importantInfo.map((m,u)=>e.jsxs("li",{children:["• ",m]},u))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:O.formTitle}),e.jsx(na,{initialData:i,language:o,onSave:h,onValidationChange:(m,u)=>{p(m)},employee:r,property:c})]})]})})]})})})}const ra=({videoId:t,onComplete:s,language:n="en",minimumWatchPercentage:a=95})=>{const o=v.useRef(null),r=v.useRef(null),[c,i]=v.useState(!1),[j,x]=v.useState(!1),[p,g]=v.useState(0),[f,y]=v.useState(!1),[T,C]=v.useState(0),[w,A]=v.useState(0),[b,k]=v.useState(null),P=v.useRef(null),h=v.useRef(new Set),N={en:{loading:"Loading video...",error:"Error loading video. Please refresh the page and try again.",instructions:"You must watch at least 95% of this video to continue. Fast-forwarding is disabled.",progress:"Video Progress",completed:"Video completed! You may now proceed.",remainingTime:"Time remaining",watchedTime:"Watched",requiredWatch:"Required to watch 95% of video",skipWarning:"Fast-forwarding is not allowed. Please watch the video in order."},es:{loading:"Cargando video...",error:"Error al cargar el video. Por favor actualice la página e intente nuevamente.",instructions:"Debe ver al menos el 95% de este video para continuar. El avance rápido está deshabilitado.",progress:"Progreso del Video",completed:"¡Video completado! Ahora puede continuar.",remainingTime:"Tiempo restante",watchedTime:"Visto",requiredWatch:"Requerido ver 95% del video",skipWarning:"No se permite el avance rápido. Por favor vea el video en orden."}}[n],[R,D]=v.useState(0);v.useEffect(()=>{const l=sessionStorage.getItem(`video_progress_${t}`);if(l)try{const _=JSON.parse(l);h.current=new Set(_.watchedSegments||[]),g(_.percentage||0),_.currentTime&&(D(_.currentTime),A(_.currentTime)),_.percentage>=a&&y(!0)}catch(_){console.error("Failed to load video progress:",_)}},[t,a]);const O=v.useCallback((l,_)=>{const L={watchedSegments:Array.from(h.current),percentage:_,currentTime:l,lastUpdate:new Date().toISOString()};sessionStorage.setItem(`video_progress_${t}`,JSON.stringify(L))},[t]);v.useEffect(()=>{var L;if(window.YT&&window.YT.Player){i(!0);return}const l=document.createElement("script");l.src="https://www.youtube.com/iframe_api";const _=document.getElementsByTagName("script")[0];return(L=_.parentNode)==null||L.insertBefore(l,_),window.onYouTubeIframeAPIReady=()=>{i(!0)},()=>{P.current&&clearInterval(P.current)}},[]),v.useEffect(()=>{if(!(!c||!r.current))try{o.current=new window.YT.Player(r.current,{videoId:t,width:"100%",height:"450",playerVars:{autoplay:0,controls:0,disablekb:1,modestbranding:1,rel:0,showinfo:0,fs:0,iv_load_policy:3,cc_load_policy:1,cc_lang_pref:n==="es"?"es":"en"},events:{onReady:m,onStateChange:u,onError:S}})}catch(l){console.error("Error creating YouTube player:",l),k(N.error)}},[c,t,n,N.error,R]);const m=l=>{const _=l.target;C(_.getDuration());let L=0;if(R>0)_.seekTo(R,!0),L=R,A(R),console.log(`Resuming video from ${R} seconds`);else if(h.current.size>0){const G=Math.max(...Array.from(h.current))*2;_.seekTo(G,!0),L=G,A(G),console.log(`Resuming video from segment ${G} seconds`)}P.current=setInterval(()=>{if(_&&_.getCurrentTime){const ee=_.getCurrentTime(),G=L+1.5;if(ee>G){_.seekTo(L,!0);const X=document.getElementById("seek-warning");X&&(X.style.display="block",setTimeout(()=>{X.style.display="none"},3e3));return}L=ee,A(ee);const te=Math.floor(ee/2);h.current.add(te);const xe=Math.ceil(_.getDuration()/2),U=h.current.size,Z=Math.min(U/xe*100,100);g(Z),O(ee,Z),Z>=a&&!f&&(y(!0),s())}},250)},u=l=>{const _=l.data,L=l.target;x(_===window.YT.PlayerState.PLAYING);const ee=L.getCurrentTime(),te=(Math.max(...Array.from(h.current),-1)+1)*2+2;if(ee>te){L.seekTo(Math.max(0,te-1),!0);const xe=document.getElementById("seek-warning");xe&&(xe.style.display="block",setTimeout(()=>{xe.style.display="none"},3e3))}(_===window.YT.PlayerState.BUFFERING||_===window.YT.PlayerState.CUED)&&ee>te&&L.seekTo(Math.max(0,te-1),!0)},S=l=>{console.error("YouTube Player Error:",l.data),k(N.error)},q=l=>{const _=Math.floor(l/60),L=Math.floor(l%60);return`${_}:${L.toString().padStart(2,"0")}`},I=()=>{o.current&&(j?o.current.pauseVideo():o.current.playVideo())},d=T-w;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(de,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{className:"text-blue-800",children:N.instructions})]}),e.jsx(z,{children:e.jsxs($,{className:"p-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:r,className:"w-full aspect-video bg-gray-900 rounded-t-lg overflow-hidden",children:!c&&!b&&e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:N.loading})]})})}),e.jsx("div",{id:"seek-warning",className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-t-lg",style:{display:"none"},children:e.jsxs("div",{className:"bg-red-600 text-white px-6 py-4 rounded-lg shadow-lg max-w-md text-center",children:[e.jsx(de,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:N.skipWarning})]})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-b-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("button",{onClick:I,className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full transition-colors",disabled:!c||b!==null,children:j?e.jsx(bs,{className:"h-6 w-6"}):e.jsx(Ns,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N.progress}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(p),"% ",N.watchedTime]})]}),e.jsx($t,{value:p,className:"h-3"}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs("span",{children:[q(w)," / ",q(T)]})]}),d>0&&e.jsxs("span",{children:[N.remainingTime,": ",q(d)]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:N.requiredWatch})]})]})}),b&&e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-600"}),e.jsx(Y,{className:"text-red-800",children:b})]}),f&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:N.completed})]})]})},oa=({onTrainingComplete:t,language:s="en"})=>{const[n,a]=v.useState(0),[o,r]=v.useState(!1),[c,i]=v.useState(!1),x={en:{title:"Human Trafficking Awareness Training",subtitle:"Required Federal Training - Complete All Sections",sections:[{title:"What is Human Trafficking?",icon:e.jsx(fe,{className:"w-8 h-8 text-red-500"}),content:["Human trafficking is a form of modern-day slavery that involves the use of force, fraud, or coercion to obtain some type of labor or commercial sex act.","It affects millions of people worldwide, including in the United States.","Victims can be any age, race, gender, or nationality.","Trafficking can happen in any community - urban, suburban, or rural."]},{title:"Types of Human Trafficking",icon:e.jsx(de,{className:"w-8 h-8 text-orange-500"}),content:["Sex Trafficking: The recruitment, harboring, transportation, provision, obtaining, patronizing, or soliciting of a person for commercial sex acts through force, fraud, or coercion.","Labor Trafficking: The recruitment, harboring, transportation, provision, or obtaining of a person for labor or services through force, fraud, or coercion.","Common industries include: restaurants, hotels, domestic work, agriculture, manufacturing, and construction."]},{title:"Warning Signs in the Workplace",icon:e.jsx(re,{className:"w-8 h-8 text-blue-500"}),content:["Employee appears malnourished, injured, or shows signs of abuse","Employee is not allowed to speak for themselves or is always accompanied","Employee works excessive hours and has few or no days off","Employee lives at the workplace or in overcrowded conditions","Employee owes large debt and is unable to leave until debt is paid","Employee's identification documents are held by someone else","Employee appears fearful, anxious, or submissive"]},{title:"How to Report Suspected Trafficking",icon:e.jsx(qt,{className:"w-8 h-8 text-green-500"}),content:["National Human Trafficking Hotline: 1-888-373-7888","Text: 233733 (BEFREE)","Online: humantraffickinghotline.org","Local Law Enforcement: 911 (in emergencies)","All reports can be made anonymously","Available 24/7 in multiple languages"]}],video:{title:"Required Training Video",description:"Watch this comprehensive training video on human trafficking awareness. You must watch at least 95% of the video to continue.",videoId:"XhbfGo7voB8"},acknowledgment:{title:"Training Acknowledgment",statements:["I have completed the required Human Trafficking Awareness Training","I understand how to identify potential signs of human trafficking","I know how to report suspected human trafficking incidents","I understand this training is required by federal law"]}},es:{title:"Capacitación sobre Concientización del Tráfico Humano",subtitle:"Capacitación Federal Requerida - Complete Todas las Secciones",sections:[{title:"¿Qué es el Tráfico Humano?",icon:e.jsx(fe,{className:"w-8 h-8 text-red-500"}),content:["El tráfico humano es una forma de esclavitud moderna que implica el uso de fuerza, fraude o coacción para obtener algún tipo de trabajo o acto sexual comercial.","Afecta a millones de personas en todo el mundo, incluso en los Estados Unidos.","Las víctimas pueden ser de cualquier edad, raza, género o nacionalidad.","El tráfico puede ocurrir en cualquier comunidad: urbana, suburbana o rural."]}],video:{title:"Video de Capacitación Requerido",description:"Vea este video completo de capacitación sobre concientización del tráfico humano. Debe ver al menos el 95% del video para continuar.",videoId:"XhbfGo7voB8"},acknowledgment:{title:"Reconocimiento de Capacitación",statements:["He completado la Capacitación de Concientización sobre Tráfico Humano requerida","Entiendo cómo identificar posibles signos de tráfico humano","Sé cómo reportar incidentes sospechosos de tráfico humano","Entiendo que esta capacitación es requerida por ley federal"]}}}[s],p=x.sections,g=()=>{r(!0)},f=()=>{n<p.length-1?a(n+1):n===p.length-1?a(p.length):n===p.length&&a(p.length+1)},y=()=>{const A={completed_at:new Date().toISOString(),language:s,video_watched:o,training_duration_minutes:20,ip_address:"",user_agent:navigator.userAgent};i(!0),t(A)},T=(A,b)=>e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.icon,e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:A.title})]}),e.jsx("div",{className:"space-y-4",children:A.content.map((k,P)=>e.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:k},P))}),e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Section ",b+1," of ",p.length]}),e.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue"})]})]}),C=()=>e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(fs,{className:"w-8 h-8 text-purple-500"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:x.video.title})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:x.video.description}),e.jsx(ra,{videoId:x.video.videoId,onComplete:g,language:s}),!o&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800 mb-2 font-semibold",children:"🎬 DEMO MODE - Remove in Production"}),e.jsx("button",{onClick:()=>{r(!0),g()},className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors font-semibold",children:"Skip Video (Demo Only - Mark as 100% Complete)"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Training Video"}),e.jsx("button",{onClick:f,disabled:!o,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Continue to Acknowledgment"})]})]}),w=()=>e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:x.acknowledgment.title}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(de,{className:"w-6 h-6 text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Important Legal Requirement"}),e.jsx("p",{className:"text-yellow-700",children:"This training is required by federal law. Your completion will be recorded and may be audited by regulatory authorities."})]})]})}),e.jsx("div",{className:"space-y-4 mb-8",children:x.acknowledgment.statements.map((A,b)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-green-500 mt-1"}),e.jsx("span",{className:"text-gray-700",children:A})]},b))}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Emergency Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"National Human Trafficking Hotline:"})," 1-888-373-7888"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Text:"})," 233733 (BEFREE)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Website:"})," humantraffickinghotline.org"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emergency:"})," 911"]})]})]}),c?e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Training Completed Successfully"}),e.jsx("p",{className:"text-gray-600",children:"Your completion has been recorded."})]}):e.jsx("button",{onClick:y,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"I Acknowledge Completion of This Training"})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:x.title}),e.jsx("p",{className:"text-gray-600 mt-2",children:x.subtitle}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round((n+1)/(p.length+2)*100),"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(n+1)/(p.length+2)*100}%`}})})]})]})}),e.jsxs("div",{className:"py-8",children:[n<p.length&&T(p[n],n),n===p.length&&C(),n===p.length+1&&w()]})]})};function ti({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState(!1),[x,p]=v.useState(null),g={trainingComplete:i,certificateData:x},{saveStatus:f}=pe(g,{onSave:async w=>{await a(t.id,w)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&j(!0)},[t.id,s.completedSteps]);const y=async w=>{j(!0),p(w);const A={trainingComplete:!0,certificate:w,completedAt:new Date().toISOString()};await n(t.id,A)},C={en:{title:"Human Trafficking Awareness Training",description:"Complete this mandatory training to learn about human trafficking awareness and your role in recognizing and reporting suspicious activities in the hospitality industry.",federalRequirement:"Federal Requirement:",federalNotice:"This training is mandatory for all hospitality employees under federal anti-trafficking laws and industry best practices.",completionMessage:"Human trafficking awareness training completed successfully. Certificate generated.",trainingModule:"Training Module",estimatedTime:"Estimated time: 8-10 minutes"},es:{title:"Capacitación sobre Concientización del Tráfico Humano",description:"Complete esta capacitación obligatoria para aprender sobre la concientización del tráfico humano y su papel en el reconocimiento y reporte de actividades sospechosas en la industria hotelera.",federalRequirement:"Requisito Federal:",federalNotice:"Esta capacitación es obligatoria para todos los empleados de hospitalidad bajo las leyes federales contra el tráfico y las mejores prácticas de la industria.",completionMessage:"Capacitación sobre concientización del tráfico humano completada exitosamente. Certificado generado.",trainingModule:"Módulo de Capacitación",estimatedTime:"Tiempo estimado: 8-10 minutos"}}[o];return e.jsx(le,{saveStatus:f,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(os,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:C.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:C.description})]}),e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-600"}),e.jsxs(Y,{className:"text-red-800",children:[e.jsx("strong",{children:C.federalRequirement})," ",C.federalNotice]})]}),i&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:C.completionMessage})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:C.trainingModule})]})}),e.jsx($,{children:e.jsx(oa,{onTrainingComplete:y,language:o})})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:C.estimatedTime})})]})})})}function si({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({hasReadPolicy:!1,acknowledgments:{},isSigned:!1}),[x,p]=v.useState(!1),g={formData:i,showReview:x},{saveStatus:f}=pe(g,{onSave:async h=>{await a(t.id,h)}});v.useEffect(()=>{var F;const h=sessionStorage.getItem(`onboarding_${t.id}_data`);if(h)try{const N=JSON.parse(h);N.formData&&j(N.formData),(F=N.formData)!=null&&F.isSigned&&p(!1)}catch(N){console.error("Failed to parse saved weapons policy data:",N)}s.completedSteps.includes(t.id)&&j(N=>({...N,isSigned:!0}))},[t.id,s.completedSteps]);const T={en:{title:"Weapons Policy Acknowledgment",subtitle:"Please review and acknowledge our workplace weapons policy",policy:{title:"Weapons and Workplace Violence Prevention Policy",sections:[{title:"Prohibited Items",icon:e.jsx(de,{className:"w-6 h-6 text-red-500"}),content:["Firearms, guns, pistols, revolvers, or any other weapon designed to propel a projectile","Knives with blades longer than 3 inches (except for approved kitchen/work tools)","Explosives, ammunition, or incendiary devices","Chemical sprays, mace, or pepper spray (except where required by job duties)","Martial arts weapons including nunchucks, throwing stars, or batons","Any item that could reasonably be considered a weapon or used to threaten or intimidate"]},{title:"Workplace Violence Prevention",icon:e.jsx(re,{className:"w-6 h-6 text-blue-500"}),content:["Threatening, intimidating, or hostile behavior toward any person is strictly prohibited","Physical altercations, fighting, or aggressive behavior will result in immediate termination","Verbal threats, including threats made in jest, are taken seriously and prohibited","Harassment, stalking, or intimidation of employees, guests, or visitors is forbidden","Reporting suspicious behavior or potential threats is encouraged and protected"]},{title:"Enforcement and Consequences",icon:e.jsx(ae,{className:"w-6 h-6 text-orange-500"}),content:["Violation of this policy will result in immediate disciplinary action, up to and including termination","Criminal violations will be reported to law enforcement authorities","The company reserves the right to search personal belongings, lockers, and vehicles on company property","Employees who report violations in good faith will be protected from retaliation","This policy applies to all company property, company-sponsored events, and work-related activities"]},{title:"Reporting Procedures",icon:e.jsx(fe,{className:"w-6 h-6 text-green-500"}),content:["Report any policy violations immediately to your supervisor or HR department","In case of immediate danger, call 911 first, then notify management","Anonymous reporting is available through the company hotline","All reports will be investigated promptly and thoroughly","Confidentiality will be maintained to the extent possible during investigations"]}],exceptions:["Law enforcement officers acting in their official capacity","Security personnel specifically authorized by the company","Kitchen staff using approved culinary knives within designated work areas","Maintenance staff using approved tools within the scope of their duties"]},acknowledgmentStatements:["I have read and understood the complete Weapons and Workplace Violence Prevention Policy","I understand that bringing prohibited weapons or items to the workplace is grounds for immediate termination","I agree to report any violations of this policy that I observe","I understand that this policy applies to all company property and company-related activities","I acknowledge that the company may search personal belongings and vehicles on company property","I understand that making threats, even in jest, is prohibited and subject to disciplinary action"],signatureAgreement:"By signing below, I acknowledge that I have read, understood, and agree to comply with the Weapons and Workplace Violence Prevention Policy. I understand that violation of this policy may result in disciplinary action up to and including termination of employment."},es:{title:"Reconocimiento de Política de Armas",subtitle:"Por favor revise y reconozca nuestra política de armas en el lugar de trabajo",policy:{title:"Política de Armas y Prevención de Violencia en el Lugar de Trabajo",sections:[{title:"Artículos Prohibidos",icon:e.jsx(de,{className:"w-6 h-6 text-red-500"}),content:["Armas de fuego, pistolas, revólveres o cualquier arma diseñada para proyectar un proyectil","Cuchillos con hojas de más de 3 pulgadas (excepto herramientas de cocina/trabajo aprobadas)","Explosivos, municiones o dispositivos incendiarios","Aerosoles químicos, gas pimienta (excepto cuando lo requieran las tareas laborales)","Armas de artes marciales incluyendo nunchakus, estrellas arrojadizas o bastones","Cualquier artículo que razonablemente podría considerarse un arma"]},{title:"Prevención de Violencia en el Lugar de Trabajo",icon:e.jsx(re,{className:"w-6 h-6 text-blue-500"}),content:["El comportamiento amenazante, intimidante u hostil está estrictamente prohibido","Las altercaciones físicas resultarán en terminación inmediata","Las amenazas verbales, incluso en broma, están prohibidas","El acoso o intimidación de empleados, huéspedes o visitantes está prohibido","Se alienta y protege el reporte de comportamiento sospechoso"]},{title:"Aplicación y Consecuencias",icon:e.jsx(ae,{className:"w-6 h-6 text-orange-500"}),content:["La violación resultará en acción disciplinaria inmediata, hasta e incluyendo la terminación","Las violaciones criminales serán reportadas a las autoridades","La empresa se reserva el derecho de registrar pertenencias personales en la propiedad","Los empleados que reporten violaciones de buena fe serán protegidos","Esta política aplica a toda propiedad y eventos de la empresa"]},{title:"Procedimientos de Reporte",icon:e.jsx(fe,{className:"w-6 h-6 text-green-500"}),content:["Reporte violaciones inmediatamente a su supervisor o departamento de RRHH","En caso de peligro inmediato, llame al 911 primero","Reporte anónimo disponible a través de la línea directa","Todos los reportes serán investigados prontamente","Se mantendrá confidencialidad en la medida de lo posible"]}],exceptions:["Oficiales de policía actuando en capacidad oficial","Personal de seguridad autorizado por la empresa","Personal de cocina usando cuchillos aprobados en áreas designadas","Personal de mantenimiento usando herramientas aprobadas"]},acknowledgmentStatements:["He leído y entendido la Política completa de Armas y Prevención de Violencia","Entiendo que traer armas prohibidas al trabajo es motivo de terminación inmediata","Acepto reportar cualquier violación de esta política que observe","Entiendo que esta política aplica a toda propiedad de la empresa","Reconozco que la empresa puede registrar pertenencias personales en la propiedad","Entiendo que hacer amenazas, incluso en broma, está prohibido"],signatureAgreement:"Al firmar abajo, reconozco que he leído, entendido y acepto cumplir con la Política de Armas y Prevención de Violencia en el Lugar de Trabajo. Entiendo que la violación de esta política puede resultar en acción disciplinaria hasta e incluyendo la terminación del empleo."}}[o],C=(h,F)=>{j(N=>({...N,acknowledgments:{...N.acknowledgments,[h]:F}}))},w=T.acknowledgmentStatements.every((h,F)=>i.acknowledgments[F]===!0),A=i.hasReadPolicy&&w,b=()=>{A&&p(!0)},k=async h=>{const F={...i,isSigned:!0,signatureData:h,completedAt:new Date().toISOString()};j(F),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({formData:F,showReview:!1})),await a(t.id,F),await n(t.id,F),p(!1)},P=()=>{p(!1)};return i.isSigned&&!x?e.jsx(le,{saveStatus:f,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(re,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:T.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:T.subtitle})]}),e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:o==="es"?"Política de armas reconocida y firmada exitosamente.":"Weapons policy acknowledged and signed successfully."})]}),e.jsx(z,{children:e.jsx($,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:o==="es"?"Reconocimiento Completo":"Acknowledgment Complete"}),e.jsx("p",{className:"text-gray-600",children:o==="es"?"Su reconocimiento ha sido registrado y guardado.":"Your acknowledgment has been recorded and saved."})]})})})]})})}):x?e.jsx(le,{saveStatus:f,children:e.jsx(ce,{children:e.jsx(We,{title:o==="es"?"Revisar y Firmar Política":"Review and Sign Policy",description:o==="es"?"Por favor revise el reconocimiento de política y firme para completar este paso":"Please review the policy acknowledgment and sign to complete this step",icon:e.jsx(re,{className:"h-5 w-5"}),required:!0,children:e.jsx(qe,{formType:"weapons-policy",formData:{policyRead:i.hasReadPolicy,acknowledgments:i.acknowledgments,acknowledgmentStatements:T.acknowledgmentStatements},title:o==="es"?"Revisar Reconocimiento de Política":"Review Policy Acknowledgment",description:o==="es"?"Por favor revise sus reconocimientos y firme electrónicamente":"Please review your acknowledgments and sign electronically",language:o,onSign:k,onBack:P,agreementText:T.signatureAgreement,federalCompliance:{formName:"Weapons and Workplace Violence Prevention Policy",retentionPeriod:"Permanent employee record",requiresWitness:!1},usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${(r==null?void 0:r.id)||"test-employee"}/weapons-policy/generate-pdf`})})})}):e.jsx(le,{saveStatus:f,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(re,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:T.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:T.subtitle})]}),e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-600"}),e.jsxs(Y,{className:"text-red-800",children:[e.jsx("strong",{children:o==="es"?"Cero Tolerancia:":"Zero Tolerance:"})," ",o==="es"?"Nuestra empresa mantiene una política estricta de no armas para todos los empleados, contratistas y visitantes.":"Our company maintains a strict no-weapons policy for all employees, contractors, and visitors."]})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:T.policy.title})]})}),e.jsxs($,{children:[e.jsx("div",{className:"space-y-8",children:T.policy.sections.map((h,F)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.icon,e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:h.title})]}),e.jsx("ul",{className:"space-y-2",children:h.content.map((N,R)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:N})]},R))})]},F))}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 mb-3 flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),o==="es"?"Excepciones Limitadas":"Limited Exceptions"]}),e.jsx("ul",{className:"space-y-1",children:T.policy.exceptions.map((h,F)=>e.jsxs("li",{className:"flex items-start gap-2 text-yellow-700",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:h})]},F))})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx(he,{id:"policy-read",checked:i.hasReadPolicy,onCheckedChange:h=>j(F=>({...F,hasReadPolicy:h}))}),e.jsx("label",{htmlFor:"policy-read",className:"text-gray-700 font-medium cursor-pointer",children:o==="es"?"He leído y entiendo la política completa anterior":"I have read and understand the complete policy above"})]})]})]}),i.hasReadPolicy&&e.jsxs(z,{children:[e.jsx(B,{children:e.jsx(W,{children:o==="es"?"Reconocimientos Requeridos":"Required Acknowledgments"})}),e.jsxs($,{children:[e.jsx("div",{className:"space-y-4",children:T.acknowledgmentStatements.map((h,F)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(he,{id:`ack-${F}`,checked:i.acknowledgments[F]||!1,onCheckedChange:N=>C(F,N)}),e.jsx("label",{htmlFor:`ack-${F}`,className:"text-gray-700 leading-relaxed cursor-pointer",children:h})]},F))}),w&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:o==="es"?"Proceder a Revisar y Firmar":"Proceed to Review and Sign"})})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:o==="es"?"Progreso de Finalización":"Completion Progress"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i.hasReadPolicy?"text-green-600":"text-gray-400"}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o==="es"?"Política Leída":"Policy Read"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${w?"text-green-600":"text-gray-400"}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o==="es"?"Reconocimientos":"Acknowledgments"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${i.isSigned?"text-green-600":"text-gray-400"}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o==="es"?"Firma":"Signature"})]})]})]})]})})})}const Ke={hra_6k:{name:"UHC HRA $6K Plan",costs:{employee:59.91,employee_spouse:319.29,employee_children:264.1,family:390.25}},hra_4k:{name:"UHC HRA $4K Plan",costs:{employee:136.84,employee_spouse:396.21,employee_children:341.02,family:467.17}},hra_2k:{name:"UHC HRA $2K Plan",costs:{employee:213.76,employee_spouse:473.13,employee_children:417.95,family:544.09}},minimum_essential:{name:"ACI Minimum Essential Coverage Plan",costs:{employee:7.77,employee_spouse:17.55,employee_children:19.03,family:27.61}},indemnity:{name:"ACI Indemnity Plan",costs:{employee:19.61,employee_spouse:37.24,employee_children:31.45,family:49.12}},minimum_plus_indemnity:{name:"Minimum Essential + Indemnity",costs:{employee:27.37,employee_spouse:54.79,employee_children:50.48,family:76.74}}},Ft={employee:13.45,employee_spouse:27.44,employee_children:31.13,family:45.63},Dt={employee:3.04,employee_spouse:5.59,employee_children:5.86,family:8.78},mt=[{value:"employee",label:"Employee Only",labelEs:"Solo Empleado"},{value:"employee_spouse",label:"Employee + Spouse",labelEs:"Empleado + Cónyuge"},{value:"employee_children",label:"Employee + Child(ren)",labelEs:"Empleado + Hijo(s)"},{value:"family",label:"Employee + Family",labelEs:"Empleado + Familia"}],la=["Spouse","Child","Stepchild","Adopted Child","Domestic Partner"];function ca({initialData:t={},language:s,onSave:n,onNext:a,onBack:o,onValidationChange:r}){const[c,i]=v.useState({medicalPlan:"",medicalTier:"employee",medicalCost:0,dentalCoverage:!1,dentalTier:"employee",dentalCost:0,visionCoverage:!1,visionTier:"employee",visionCost:0,dependents:[],hasStepchildren:!1,stepchildrenNames:"",dependentsSupported:!1,irsDependentConfirmation:!1,totalBiweeklyCost:0,isWaived:!1,waiveReason:"",otherCoverageType:"",otherCoverageDetails:"",...t}),[j,x]=v.useState({}),[p,g]=v.useState(!1),[f,y]=v.useState({}),[T,C]=v.useState(!1),[w,A]=v.useState(!1);v.useEffect(()=>{t&&Object.keys(t).length>0&&(console.log("HealthInsuranceForm - Updating from initialData:",t),i(m=>({...m,...t})))},[t]);const b=m=>({en:{health_insurance:"Health Insurance Election",health_insurance_desc:"Select your health insurance coverage options. Coverage is effective on the first day of the month following your hire date.",plan_year:"Plan Year: January 1, 2025 – December 31, 2025",medical_coverage:"Medical Coverage",select_plan:"Select Medical Plan",select_tier:"Select Coverage Tier",biweekly_cost:"Bi-weekly Cost",additional_coverage:"Additional Coverage",dental_coverage:"Dental Coverage",vision_coverage:"Vision Coverage",dependents_info:"Dependent Information",add_dependent:"Add Dependent",dependent_required:"This section must be completed for all dependent coverages",first_name:"First Name",last_name:"Last Name",middle_initial:"Middle Initial",relationship:"Relationship",date_of_birth:"Date of Birth",ssn:"Social Security Number",gender:"Gender",male:"Male",female:"Female",stepchildren_question:"Have you included stepchildren as dependents?",stepchildren_names:"If yes, indicate names:",support_question:"Are they dependent on you for support and maintenance?",irs_confirmation:'I affirm that all dependents listed meet the IRS Section 152 definition of "dependent" so that premiums can be paid with pre-tax dollars, if applicable',cost_summary:"Cost Summary",medical:"Medical",dental:"Dental",vision:"Vision",total:"Total Bi-weekly Cost",waiver_section:"Coverage Waiver",decline_coverage:"I decline all health insurance coverage",waiver_reason:"Reason for declining coverage",no_coverage_preference:"My preference not to have coverage",spouse_coverage:"Coverage under my spouse's/domestic partner's plan",other_coverage:"Other coverage",other_coverage_type:"This other coverage is:",employer_group:"Employer-sponsored Group Plan",individual_policy:"Individual policy",medicare:"Medicare",cobra:"COBRA",tricare:"TRICARE",medicaid:"Medicaid",special_enrollment:"Special Enrollment Notice",enrollment_notice:"By signing below, I certify that I have been given an opportunity to apply for coverage for myself and my eligible dependents, if any. I understand the special enrollment rules and my rights to make changes during qualifying life events.",save_continue:"Save & Continue",back:"Back",yes:"Yes",no:"No",remove:"Remove"},es:{health_insurance:"Elección de Seguro de Salud",health_insurance_desc:"Seleccione sus opciones de cobertura de seguro de salud. La cobertura es efectiva el primer día del mes siguiente a su fecha de contratación.",plan_year:"Año del Plan: 1 de enero de 2025 – 31 de diciembre de 2025",medical_coverage:"Cobertura Médica",select_plan:"Seleccionar Plan Médico",select_tier:"Seleccionar Nivel de Cobertura",biweekly_cost:"Costo Quincenal",additional_coverage:"Cobertura Adicional",dental_coverage:"Cobertura Dental",vision_coverage:"Cobertura de Visión",dependents_info:"Información de Dependientes",add_dependent:"Agregar Dependiente",save_continue:"Guardar y Continuar",back:"Atrás",yes:"Sí",no:"No"}})[s][m]||m;v.useEffect(()=>{k()},[c.medicalPlan,c.medicalTier,c.dentalCoverage,c.dentalTier,c.visionCoverage,c.visionTier]),v.useEffect(()=>{D()},[c.isWaived,c.medicalPlan,c.dependents,c.irsDependentConfirmation]);const k=()=>{let m=0;if(c.medicalPlan&&Ke[c.medicalPlan]){const u=Ke[c.medicalPlan].costs[c.medicalTier]||0;m+=u,i(S=>({...S,medicalCost:u}))}if(c.dentalCoverage){const u=Ft[c.dentalTier]||0;m+=u,i(S=>({...S,dentalCost:u}))}if(c.visionCoverage){const u=Dt[c.visionTier]||0;m+=u,i(S=>({...S,visionCost:u}))}i(u=>({...u,totalBiweeklyCost:m}))},P=()=>{const m={firstName:"",lastName:"",middleInitial:"",relationship:"",dateOfBirth:"",ssn:"",gender:"M"};i(u=>({...u,dependents:[...u.dependents,m]}))},h=m=>{i(u=>({...u,dependents:u.dependents.filter((S,q)=>q!==m)}))},F=(m,u,S)=>{i(I=>({...I,dependents:I.dependents.map((d,l)=>l===m?{...d,[u]:S}:d)}));const q=`dependent.${m}.${u}`;y(I=>({...I,[q]:!0}))},N=m=>{y(u=>({...u,[m]:!0}))},R=()=>c.medicalTier.includes("spouse")||c.medicalTier.includes("children")||c.medicalTier.includes("family")||c.dentalCoverage&&(c.dentalTier.includes("spouse")||c.dentalTier.includes("children")||c.dentalTier.includes("family"))||c.visionCoverage&&(c.visionTier.includes("spouse")||c.visionTier.includes("children")||c.visionTier.includes("family")),D=()=>{const m=c.isWaived||c.medicalPlan!=="";let u=!0;R()&&!c.isWaived&&(u=c.dependents.length>0&&c.irsDependentConfirmation);const S=m&&u;return A(S),r&&r(S),S},O=()=>{console.log("Health Insurance Form - handleSubmit called"),console.log("Form data:",c),C(!0);const m=D();console.log("Is form valid?",m),m?(console.log("Calling onSave with formData:",c),n(c),a&&a()):console.log("Form validation failed")};return c.isWaived?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(re,{className:"h-12 w-12 text-red-600 mx-auto mb-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:b("health_insurance")}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Coverage Waiver"})]}),e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(W,{className:"text-red-600",children:"Coverage Waiver"}),e.jsx(Be,{children:"You have chosen to decline health insurance coverage."})]}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Reason for declining coverage"}),e.jsxs(Le,{value:c.waiveReason,onValueChange:m=>i(u=>({...u,waiveReason:m})),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"no_coverage_preference",id:"no_coverage_preference"}),e.jsx(E,{htmlFor:"no_coverage_preference",children:b("no_coverage_preference")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"spouse_coverage",id:"spouse_coverage"}),e.jsx(E,{htmlFor:"spouse_coverage",children:b("spouse_coverage")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"other_coverage",id:"other_coverage"}),e.jsx(E,{htmlFor:"other_coverage",children:b("other_coverage")})]})]})]}),c.waiveReason==="other_coverage"&&e.jsx("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{children:[e.jsx(E,{children:b("other_coverage_type")}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["employer_group","individual_policy","medicare","cobra","tricare","medicaid"].map(m=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{id:m,checked:c.otherCoverageType.includes(m),onCheckedChange:u=>{i(u?S=>({...S,otherCoverageType:S.otherCoverageType+" "+m}):S=>({...S,otherCoverageType:S.otherCoverageType.replace(m,"").trim()}))}}),e.jsx(E,{htmlFor:m,children:b(m)})]},m))})]})}),e.jsx(K,{variant:"outline",onClick:()=>i(m=>({...m,isWaived:!1})),className:"w-full",children:"Change Mind - Select Coverage"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsx(K,{variant:"outline",onClick:o,children:b("back")}),e.jsx(K,{onClick:O,className:"px-8",children:b("save_continue")})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(re,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:b("health_insurance")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:b("health_insurance_desc")}),e.jsx(Ge,{variant:"outline",className:"mt-1 text-xs",children:b("plan_year")})]}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:b("medical_coverage")})]})}),e.jsx($,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-sm",children:b("select_plan")}),e.jsxs(Se,{value:c.medicalPlan,onValueChange:m=>i(u=>({...u,medicalPlan:m})),children:[e.jsx(Ce,{className:"h-8",children:e.jsx(ke,{placeholder:"Select medical plan"})}),e.jsx(Ae,{children:Object.entries(Ke).map(([m,u])=>e.jsx(be,{value:m,children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-sm",children:u.name}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["$",u.costs.employee]})]})},m))})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-sm",children:b("select_tier")}),e.jsxs(Se,{value:c.medicalTier,onValueChange:m=>i(u=>({...u,medicalTier:m})),children:[e.jsx(Ce,{className:"h-8",children:e.jsx(ke,{placeholder:"Select coverage tier"})}),e.jsx(Ae,{children:mt.map(m=>{var u;return e.jsx(be,{value:m.value,children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-sm",children:s==="es"?m.labelEs:m.label}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["$",c.medicalPlan&&((u=Ke[c.medicalPlan])==null?void 0:u.costs[m.value])||0]})]})},m.value)})})]})]})]})})]}),e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsx(W,{className:"text-lg",children:b("additional_coverage")})}),e.jsx($,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:b("dental_coverage")}),e.jsx(he,{checked:c.dentalCoverage,onCheckedChange:m=>i(u=>({...u,dentalCoverage:!!m}))})]}),c.dentalCoverage&&e.jsxs(Se,{value:c.dentalTier,onValueChange:m=>i(u=>({...u,dentalTier:m})),children:[e.jsx(Ce,{className:"h-8",children:e.jsx(ke,{placeholder:"Select dental tier"})}),e.jsx(Ae,{children:mt.map(m=>e.jsx(be,{value:m.value,children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-sm",children:s==="es"?m.labelEs:m.label}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["$",Ft[m.value]]})]})},m.value))})]})]}),e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:b("vision_coverage")}),e.jsx(he,{checked:c.visionCoverage,onCheckedChange:m=>i(u=>({...u,visionCoverage:!!m}))})]}),c.visionCoverage&&e.jsxs(Se,{value:c.visionTier,onValueChange:m=>i(u=>({...u,visionTier:m})),children:[e.jsx(Ce,{className:"h-8",children:e.jsx(ke,{placeholder:"Select vision tier"})}),e.jsx(Ae,{children:mt.map(m=>e.jsx(be,{value:m.value,children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-sm",children:s==="es"?m.labelEs:m.label}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["$",Dt[m.value]]})]})},m.value))})]})]})]})})]}),R()&&e.jsxs(z,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:b("dependents_info")})]})}),e.jsxs($,{className:"space-y-3",children:[c.dependents.map((m,u)=>e.jsxs("div",{className:"p-3 border rounded space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Dependent ",u+1]}),e.jsx(K,{variant:"outline",size:"xs",onClick:()=>h(u),children:e.jsx(Wt,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("first_name")}),e.jsx(M,{value:m.firstName,onChange:S=>F(u,"firstName",S.target.value),onBlur:()=>N(`dependent.${u}.firstName`),size:"xs",placeholder:""})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("last_name")}),e.jsx(M,{value:m.lastName,onChange:S=>F(u,"lastName",S.target.value),onBlur:()=>N(`dependent.${u}.lastName`),size:"xs",placeholder:""})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("relationship")}),e.jsxs(Se,{value:m.relationship,onValueChange:S=>F(u,"relationship",S),children:[e.jsx(Ce,{className:"h-6",children:e.jsx(ke,{})}),e.jsx(Ae,{children:la.map(S=>e.jsx(be,{value:S,children:S},S))})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("date_of_birth")}),e.jsx(M,{type:"date",value:m.dateOfBirth,onChange:S=>F(u,"dateOfBirth",S.target.value),onBlur:()=>N(`dependent.${u}.dateOfBirth`),size:"xs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("ssn")}),e.jsx(M,{value:m.ssn,onChange:S=>F(u,"ssn",S.target.value),onBlur:()=>N(`dependent.${u}.ssn`),placeholder:"",size:"xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("gender")}),e.jsxs(Se,{value:m.gender,onValueChange:S=>F(u,"gender",S),children:[e.jsx(Ce,{className:"h-6",children:e.jsx(ke,{})}),e.jsxs(Ae,{children:[e.jsx(be,{value:"M",children:b("male")}),e.jsx(be,{value:"F",children:b("female")})]})]})]})]})]},u)),e.jsxs(K,{variant:"outline",onClick:P,size:"sm",className:"w-full",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),b("add_dependent")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("stepchildren_question")}),e.jsxs("div",{className:"flex space-x-3 mt-1",children:[e.jsxs("label",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"radio",name:"stepchildren",checked:c.hasStepchildren,onChange:()=>i(m=>({...m,hasStepchildren:!0})),className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:b("yes")})]}),e.jsxs("label",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"radio",name:"stepchildren",checked:!c.hasStepchildren,onChange:()=>i(m=>({...m,hasStepchildren:!1})),className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:b("no")})]})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("support_question")}),e.jsxs("div",{className:"flex space-x-3 mt-1",children:[e.jsxs("label",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"radio",name:"support",checked:c.dependentsSupported,onChange:()=>i(m=>({...m,dependentsSupported:!0})),className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:b("yes")})]}),e.jsxs("label",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"radio",name:"support",checked:!c.dependentsSupported,onChange:()=>i(m=>({...m,dependentsSupported:!1})),className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:b("no")})]})]})]})]}),c.hasStepchildren&&e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:b("stepchildren_names")}),e.jsx(M,{value:c.stepchildrenNames,onChange:m=>i(u=>({...u,stepchildrenNames:m.target.value})),onBlur:()=>N("stepchildrenNames"),placeholder:"",size:"xs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{id:"irs_confirmation",checked:c.irsDependentConfirmation,onCheckedChange:m=>i(u=>({...u,irsDependentConfirmation:!!m})),className:"w-3 h-3"}),e.jsx(E,{htmlFor:"irs_confirmation",className:"text-xs",children:b("irs_confirmation")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(z,{className:"bg-blue-50",children:[e.jsx(B,{className:"pb-3",children:e.jsxs(W,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx("span",{children:b("cost_summary")})]})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[b("medical"),":"]}),e.jsxs("span",{className:"font-medium",children:["$",c.medicalCost.toFixed(2)]})]}),c.dentalCoverage&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[b("dental"),":"]}),e.jsxs("span",{className:"font-medium",children:["$",c.dentalCost.toFixed(2)]})]}),c.visionCoverage&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[b("vision"),":"]}),e.jsxs("span",{className:"font-medium",children:["$",c.visionCost.toFixed(2)]})]}),e.jsx(us,{}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsxs("span",{children:[b("total"),":"]}),e.jsxs("span",{children:["$",c.totalBiweeklyCost.toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Bi-weekly payroll deduction"})]})})]}),e.jsxs(z,{className:"border-red-200",children:[e.jsx(B,{className:"pb-3",children:e.jsx(W,{className:"text-lg text-red-600",children:"Coverage Options"})}),e.jsxs($,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{id:"decline_coverage",checked:c.isWaived,onCheckedChange:m=>i(u=>({...u,isWaived:!!m}))}),e.jsx(E,{htmlFor:"decline_coverage",className:"text-red-600 font-medium text-sm",children:b("decline_coverage")})]}),e.jsxs(V,{className:"py-2",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsxs(Y,{className:"text-xs",children:[e.jsx("strong",{children:b("special_enrollment")}),e.jsx("br",{}),b("enrollment_notice")]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx(K,{variant:"outline",onClick:o,size:"sm",children:b("back")}),e.jsx(K,{onClick:O,className:"px-6",size:"sm",children:b("save_continue")})]})]})}function ai({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState({}),[x,p]=v.useState(!1),[g,f]=v.useState(!1),[y,T]=v.useState(!1),{errors:C,fieldErrors:w,validate:A}=Pe(Yt),b={formData:i,isValid:x,showReview:g,isSigned:y},{saveStatus:k}=pe(b,{onSave:async O=>{await a(t.id,O)}});v.useEffect(()=>{console.log("HealthInsuranceStep - Loading data for step:",t.id);const O=sessionStorage.getItem(`onboarding_${t.id}_data`);if(O)try{const m=JSON.parse(O);console.log("HealthInsuranceStep - Found saved data:",m),m.formData?(console.log("HealthInsuranceStep - Setting formData from parsed.formData"),j(m.formData)):(m.medicalPlan!==void 0||m.isWaived!==void 0)&&(console.log("HealthInsuranceStep - Setting formData from direct structure"),j(m)),(m.isSigned||m.signed)&&(console.log("HealthInsuranceStep - Form was previously signed"),T(!0),p(!0))}catch(m){console.error("Failed to parse saved health insurance data:",m)}s.completedSteps.includes(t.id)&&(console.log("HealthInsuranceStep - Step marked as complete in progress"),T(!0),p(!0))},[t.id,s.completedSteps]);const P=async O=>{console.log("HealthInsuranceStep - handleFormSave called with data:",O);const m=await A(O);console.log("Validation result:",m),m.valid?(console.log("Validation passed, saving data and showing review"),j(O),p(!0),f(!0),sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({formData:O,isValid:!0,isSigned:!1,showReview:!0}))):console.log("Validation failed:",m.errors)},h=()=>{f(!1)},F=async O=>{T(!0);const m={...i,formData:i,signed:!0,isSigned:!0,signatureData:O,completedAt:new Date().toISOString()};if(r!=null&&r.id)try{await Te.post(`/api/onboarding/${r.id}/health-insurance`,m),console.log("Health insurance data saved to backend")}catch(u){console.error("Failed to save health insurance data to backend:",u)}sessionStorage.setItem(`onboarding_${t.id}_data`,JSON.stringify({...i,formData:i,isValid:!0,isSigned:!0,showReview:!1,signed:!0,signatureData:O,completedAt:m.completedAt})),await a(t.id,m),await n(t.id,m),f(!1)},N=x&&y,D={en:{title:"Health Insurance Enrollment",reviewTitle:"Review Health Insurance",description:"Choose your health insurance plan and add dependents if applicable. Your coverage will begin according to your plan's effective date.",enrollmentPeriod:"Enrollment Period:",enrollmentNotice:"You have 30 days from your hire date to enroll in health insurance or make changes to your coverage.",completionMessage:"Health insurance enrollment completed successfully.",planSelectionTitle:"Health Insurance Plan Selection",estimatedTime:"Estimated time: 6-8 minutes",reviewDescription:"Please review your health insurance selections and dependent information",acknowledgments:{planSelection:"I have reviewed and selected the appropriate health insurance plan",dependentInfo:"All dependent information provided is accurate and complete",coverage:"I understand when my coverage will begin",changes:"I understand I can make changes during open enrollment or qualifying life events"}},es:{title:"Inscripción en Seguro de Salud",reviewTitle:"Revisar Seguro de Salud",description:"Elija su plan de seguro de salud y agregue dependientes si corresponde. Su cobertura comenzará según la fecha de vigencia de su plan.",enrollmentPeriod:"Período de Inscripción:",enrollmentNotice:"Tiene 30 días desde su fecha de contratación para inscribirse en el seguro de salud o hacer cambios en su cobertura.",completionMessage:"Inscripción en seguro de salud completada exitosamente.",planSelectionTitle:"Selección de Plan de Seguro de Salud",estimatedTime:"Tiempo estimado: 6-8 minutos",reviewDescription:"Por favor revise sus selecciones de seguro de salud e información de dependientes",acknowledgments:{planSelection:"He revisado y seleccionado el plan de seguro de salud apropiado",dependentInfo:"Toda la información de dependientes proporcionada es precisa y completa",coverage:"Entiendo cuándo comenzará mi cobertura",changes:"Entiendo que puedo hacer cambios durante la inscripción abierta o eventos de vida calificados"}}}[o];return g&&i?e.jsx(le,{errors:C,saveStatus:k,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(Ue,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:D.reviewTitle})]})}),e.jsx(qe,{formType:"health_insurance",formTitle:"Health Insurance Enrollment Form",formData:i,documentName:"Health Insurance Enrollment",signerName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||"Employee",signerTitle:r==null?void 0:r.position,onSign:F,onEdit:h,acknowledgments:[D.acknowledgments.planSelection,D.acknowledgments.dependentInfo,D.acknowledgments.coverage,D.acknowledgments.changes],language:o,description:D.reviewDescription,usePDFPreview:!0,pdfEndpoint:`/api/onboarding/${(r==null?void 0:r.id)||"test-employee"}/health-insurance/generate-pdf`})]})})}):e.jsx(le,{errors:C,fieldErrors:w,saveStatus:k,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(Ue,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:D.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:D.description})]}),e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Ue,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Y,{className:"text-blue-800",children:[e.jsx("strong",{children:D.enrollmentPeriod})," ",D.enrollmentNotice]})]}),N&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:D.completionMessage})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:D.planSelectionTitle})]})}),e.jsx($,{children:e.jsx(ca,{initialData:i,language:o,onSave:P,onValidationChange:(O,m)=>{console.log("HealthInsuranceStep - onValidationChange called, valid:",O),p(O)}})})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:D.estimatedTime})})]})})})}const je=[{id:"us-passport",title:"U.S. Passport",description:"Establishes both identity and work authorization",icon:e.jsx(ps,{className:"h-5 w-5"}),category:"listA",examples:["U.S. Passport Book","U.S. Passport Card"]},{id:"permanent-resident-card",title:"Permanent Resident Card",description:"Green Card (I-551)",icon:e.jsx(Ve,{className:"h-5 w-5"}),category:"listA",examples:["Form I-551 (Green Card)"]},{id:"employment-authorization",title:"Employment Authorization Document",description:"Work permit with photo",icon:e.jsx(ae,{className:"h-5 w-5"}),category:"listA",examples:["Form I-766 (EAD)"]},{id:"drivers-license",title:"Driver's License",description:"State-issued with photo",icon:e.jsx(ls,{className:"h-5 w-5"}),category:"listB",examples:["Driver's License","State ID Card"]},{id:"military-id",title:"Military ID",description:"U.S. Military identification",icon:e.jsx(re,{className:"h-5 w-5"}),category:"listB",examples:["Military ID Card","Military Dependent ID"]},{id:"social-security-card",title:"Social Security Card",description:"Unrestricted Social Security card",icon:e.jsx(Ve,{className:"h-5 w-5"}),category:"listC",examples:["Social Security Card (unrestricted)"]},{id:"birth-certificate",title:"U.S. Birth Certificate",description:"Certified copy with official seal",icon:e.jsx(ae,{className:"h-5 w-5"}),category:"listC",examples:["Birth Certificate","Certification of Birth"]}];function ii({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState([]),[x,p]=v.useState({}),[g,f]=v.useState("listA"),[y,T]=v.useState(!1),{errors:C}=Pe(Gt),w={selectedDocuments:i,uploadedFiles:Object.keys(x),documentStrategy:g,isComplete:y},{saveStatus:A}=pe(w,{onSave:async N=>{await a(t.id,N)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&T(!0)},[t.id,s.completedSteps]),v.useEffect(()=>{(async()=>{let R=!1;if(g==="listA"){const D=i.some(m=>{var u;return((u=je.find(S=>S.id===m))==null?void 0:u.category)==="listA"}),O=i.some(m=>x[m]);R=D&&O}else{const D=i.some(u=>{var S;return((S=je.find(q=>q.id===u))==null?void 0:S.category)==="listB"}),O=i.some(u=>{var S;return((S=je.find(q=>q.id===u))==null?void 0:S.category)==="listC"}),m=i.every(u=>x[u]);R=D&&O&&m}if(T(R),R&&!s.completedSteps.includes(t.id)){const D={strategy:g,selectedDocuments:i,uploadedFiles:Object.keys(x),completedAt:new Date().toISOString()};await n(t.id,D)}})()},[g,i,x,t.id,s.completedSteps,n]);const b=N=>{const R=je.find(D=>D.id===N);R&&(g==="listA"?j([N]):R.category==="listB"?j(D=>[...D.filter(O=>{var m;return((m=je.find(u=>u.id===O))==null?void 0:m.category)!=="listB"}),N]):R.category==="listC"&&j(D=>[...D.filter(O=>{var m;return((m=je.find(u=>u.id===O))==null?void 0:m.category)!=="listC"}),N]))},k=(N,R)=>{p(D=>({...D,[N]:R}))},h={en:{title:"Document Verification",description:"Upload acceptable documents to verify your identity and work authorization. These documents will be reviewed by your manager to complete Section 2 of Form I-9.",federalRequirement:"Federal Requirement:",federalNotice:"You must provide acceptable documents within 3 business days of your employment start date. Documents must be unexpired and appear genuine.",completionMessage:"Document upload completed successfully. Your manager will review these documents to complete I-9 verification.",strategyTitle:"Choose Your Document Strategy",option1:"Option 1: List A Document",option2:"Option 2: List B + List C",recommendedNotice:"Recommended:",recommendedMessage:"List A documents establish both identity and work authorization with a single document.",listBCNotice:"You must provide one document from List B (identity) AND one document from List C (work authorization).",listBTitle:"List B - Identity Documents",listCTitle:"List C - Work Authorization Documents",photoGuidelinesTitle:"Photo Guidelines",photoGuidelines:["Take clear, well-lit photos showing all document details","Ensure all text is readable and document corners are visible","Documents must be unexpired and in good condition","Accepted formats: JPG, PNG, PDF (max 10MB per file)"],uploadRequirementsTitle:"Upload Requirements",oneListADocument:"One List A document uploaded",listBDocument:"List B document (Identity)",listCDocument:"List C document (Work Authorization)",complete:"Complete",required:"Required",readyForReview:"Ready for Manager Review",managerReviewNotice:"Your manager will examine these documents in person or remotely to complete Section 2 of Form I-9 within 3 business days of your start date.",privacyNotice:"Privacy Notice:",privacyMessage:"Document images are encrypted and stored securely for I-9 compliance. They will be retained for the required period and destroyed in accordance with federal recordkeeping requirements.",estimatedTime:"Estimated time: 4-6 minutes",uploadLabel:"Upload",fileUploaded:"File uploaded:"},es:{title:"Verificación de Documentos",description:"Cargue documentos aceptables para verificar su identidad y autorización de trabajo. Estos documentos serán revisados por su gerente para completar la Sección 2 del Formulario I-9.",federalRequirement:"Requisito Federal:",federalNotice:"Debe proporcionar documentos aceptables dentro de los 3 días hábiles posteriores a su fecha de inicio. Los documentos deben estar vigentes y parecer genuinos.",completionMessage:"Carga de documentos completada exitosamente. Su gerente revisará estos documentos para completar la verificación I-9.",strategyTitle:"Elija su Estrategia de Documentos",option1:"Opción 1: Documento de Lista A",option2:"Opción 2: Lista B + Lista C",recommendedNotice:"Recomendado:",recommendedMessage:"Los documentos de Lista A establecen tanto identidad como autorización de trabajo con un solo documento.",listBCNotice:"Debe proporcionar un documento de Lista B (identidad) Y un documento de Lista C (autorización de trabajo).",listBTitle:"Lista B - Documentos de Identidad",listCTitle:"Lista C - Documentos de Autorización de Trabajo",photoGuidelinesTitle:"Guías para Fotos",photoGuidelines:["Tome fotos claras y bien iluminadas mostrando todos los detalles del documento","Asegúrese de que todo el texto sea legible y las esquinas del documento sean visibles","Los documentos deben estar vigentes y en buenas condiciones","Formatos aceptados: JPG, PNG, PDF (máximo 10MB por archivo)"],uploadRequirementsTitle:"Requisitos de Carga",oneListADocument:"Un documento de Lista A cargado",listBDocument:"Documento de Lista B (Identidad)",listCDocument:"Documento de Lista C (Autorización de Trabajo)",complete:"Completo",required:"Requerido",readyForReview:"Listo para Revisión del Gerente",managerReviewNotice:"Su gerente examinará estos documentos en persona o remotamente para completar la Sección 2 del Formulario I-9 dentro de los 3 días hábiles de su fecha de inicio.",privacyNotice:"Aviso de Privacidad:",privacyMessage:"Las imágenes de documentos están encriptadas y almacenadas de forma segura para cumplimiento del I-9. Se conservarán durante el período requerido y se destruirán de acuerdo con los requisitos federales de mantenimiento de registros.",estimatedTime:"Tiempo estimado: 4-6 minutos",uploadLabel:"Cargar",fileUploaded:"Archivo cargado:"}}[o],F=({doc:N})=>{var O;const R=i.includes(N.id),D=x[N.id];return e.jsx(z,{className:`cursor-pointer transition-all ${R?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(N.id),children:e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg ${R?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:N.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:N.title}),R&&D&&e.jsx(J,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description}),e.jsx("div",{className:"mt-2",children:e.jsxs(Ge,{variant:N.category==="listA"?"default":"secondary",className:"text-xs",children:["List ",N.category.replace("list","").toUpperCase()]})})]})]}),R&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[h.uploadLabel," ",N.title]}),e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:m=>{var S;const u=(S=m.target.files)==null?void 0:S[0];u&&k(N.id,u)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),D&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-700 text-sm",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs("span",{children:[h.fileUploaded," ",(O=x[N.id])==null?void 0:O.name]})]})]})})]})})};return e.jsx(le,{errors:C,saveStatus:A,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(st,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:h.description})]}),e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Y,{className:"text-blue-800",children:[e.jsx("strong",{children:h.federalRequirement})," ",h.federalNotice]})]}),y&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:h.completionMessage})]}),e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:h.strategyTitle})]})}),e.jsx($,{children:e.jsxs(ft,{value:g,onValueChange:N=>f(N),children:[e.jsxs(yt,{className:"grid w-full grid-cols-2",children:[e.jsx(He,{value:"listA",className:"flex items-center space-x-2",children:e.jsx("span",{children:h.option1})}),e.jsx(He,{value:"listBC",className:"flex items-center space-x-2",children:e.jsx("span",{children:h.option2})})]}),e.jsxs(Oe,{value:"listA",className:"mt-4",children:[e.jsxs(V,{className:"bg-green-50 border-green-200 mb-4",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-600"}),e.jsxs(Y,{className:"text-green-800",children:[e.jsx("strong",{children:h.recommendedNotice})," ",h.recommendedMessage]})]}),e.jsx("div",{className:"grid gap-4",children:je.filter(N=>N.category==="listA").map(N=>e.jsx(F,{doc:N},N.id))})]}),e.jsxs(Oe,{value:"listBC",className:"mt-4",children:[e.jsxs(V,{className:"bg-yellow-50 border-yellow-200 mb-4",children:[e.jsx(de,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Y,{className:"text-yellow-800",children:h.listBCNotice})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:h.listBTitle}),e.jsx("div",{className:"grid gap-4",children:je.filter(N=>N.category==="listB").map(N=>e.jsx(F,{doc:N},N.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:h.listCTitle}),e.jsx("div",{className:"grid gap-4",children:je.filter(N=>N.category==="listC").map(N=>e.jsx(F,{doc:N},N.id))})]})]})]})]})})]}),e.jsxs(z,{className:"border-orange-200 bg-orange-50",children:[e.jsx(B,{children:e.jsxs(W,{className:"text-orange-800 flex items-center space-x-2",children:[e.jsx(gs,{className:"h-5 w-5"}),e.jsx("span",{children:"Photo Guidelines"})]})}),e.jsx($,{className:"text-orange-800",children:e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:"• Take clear, well-lit photos showing all document details"}),e.jsx("li",{children:"• Ensure all text is readable and document corners are visible"}),e.jsx("li",{children:"• Documents must be unexpired and in good condition"}),e.jsx("li",{children:"• Accepted formats: JPG, PNG, PDF (max 10MB per file)"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Upload Requirements"}),e.jsx("div",{className:"space-y-3",children:g==="listA"?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"One List A document uploaded"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:y?"Complete":"Required"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"List B document (Identity)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i.some(N=>{var R;return((R=je.find(D=>D.id===N))==null?void 0:R.category)==="listB"})?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:h.required})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"List C document (Work Authorization)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i.some(N=>{var R;return((R=je.find(D=>D.id===N))==null?void 0:R.category)==="listC"})?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),e.jsx("span",{className:"text-sm font-medium",children:h.required})]})]})]})})]}),y&&e.jsx(z,{className:"border-blue-200 bg-blue-50",children:e.jsx($,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"Ready for Manager Review"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Your manager will examine these documents in person or remotely to complete Section 2 of Form I-9 within 3 business days of your start date."})]})]})})}),e.jsx("div",{className:"text-xs text-gray-500 border-t pt-4",children:e.jsxs("p",{children:[e.jsx("strong",{children:h.privacyNotice})," ",h.privacyMessage]})}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:h.estimatedTime})})]})})})}function ni({currentStep:t,progress:s,markStepComplete:n,saveProgress:a,language:o="en",employee:r,property:c}){const[i,j]=v.useState(!1),[x,p]=v.useState([!1,!1,!1,!1]),[g,f]=v.useState(null),[y,T]=v.useState(null),{errors:C,validate:w}=Pe(Jt),A={finalAcknowledgments:x,signatureData:g,reviewData:y,isComplete:i},{saveStatus:b}=pe(A,{onSave:async m=>{await a(t.id,m)}});v.useEffect(()=>{s.completedSteps.includes(t.id)&&j(!0)},[t.id,s.completedSteps]);const k=(m,u)=>{const S=[...x];S[m]=u,p(S)},P=async m=>{if(f(m),(await w({finalAcknowledgments:x,signature:m})).valid){const S={finalAcknowledgments:x,signatureData:m,reviewData:{allStepsCompleted:!0,completedAt:new Date().toISOString(),employeeSignatureTimestamp:new Date().toISOString(),finalReviewCompleted:!0},completed:!0,completedAt:new Date().toISOString()};T(S.reviewData),j(!0),await n(t.id,S)}},F={en:{title:"Final Review & Employee Signature",subtitle:"Complete Your Onboarding Process",description:"Review all your onboarding information and provide your final signature to complete the process.",completedNotice:"Onboarding process completed successfully! Your information has been submitted for manager review.",reviewSummary:"Onboarding Summary",reviewSummaryDesc:"Please review your completed onboarding steps before signing.",finalAcknowledgments:"Final Acknowledgments",acknowledgment1:"I certify that all information I have provided during this onboarding process is true, accurate, and complete to the best of my knowledge.",acknowledgment2:"I understand that providing false or misleading information may result in termination of employment and potential legal consequences.",acknowledgment3:"I acknowledge that I have read, understood, and agree to comply with all company policies and procedures presented during this onboarding process.",acknowledgment4:"I consent to the processing of my personal information as described in the company privacy policy and understand my rights regarding this data.",legalNoticeTitle:"Legal Notice:",legalNoticeMessage:"Your signature above is legally binding and certifies the completeness and accuracy of all information provided.",complianceMessage:"This onboarding process complies with federal employment law requirements including I-9 and tax withholding regulations.",finalSignature:"Final Employee Signature",signatureDesc:"Your signature below certifies that you have completed the onboarding process and agree to all terms and conditions.",submitButton:"Complete Onboarding",stepStatuses:{personal_info:"Personal Information",document_upload:"Document Upload",i9_section1:"I-9 Section 1",i9_review_sign:"I-9 Review & Sign",w4_form:"W-4 Tax Form",w4_review_sign:"W-4 Review & Sign",direct_deposit:"Direct Deposit",emergency_contacts:"Emergency Contacts",health_insurance:"Health Insurance",company_policies:"Company Policies",trafficking_awareness:"Human Trafficking Awareness"},estimatedTime:"Estimated time: 4-5 minutes",overallProgress:"Overall Progress",stepsCompleted:"steps completed",complete:"Complete",pending:"Pending"},es:{title:"Revisión Final y Firma del Empleado",subtitle:"Complete Su Proceso de Incorporación",description:"Revise toda su información de incorporación y proporcione su firma final para completar el proceso.",completedNotice:"¡Proceso de incorporación completado exitosamente! Su información ha sido enviada para revisión del gerente.",reviewSummary:"Resumen de Incorporación",reviewSummaryDesc:"Por favor revise sus pasos de incorporación completados antes de firmar.",finalAcknowledgments:"Reconocimientos Finales",acknowledgment1:"Certifico que toda la información que he proporcionado durante este proceso de incorporación es verdadera, precisa y completa según mi mejor conocimiento.",acknowledgment2:"Entiendo que proporcionar información falsa o engañosa puede resultar en la terminación del empleo y posibles consecuencias legales.",acknowledgment3:"Reconozco que he leído, entendido y acepto cumplir con todas las políticas y procedimientos de la empresa presentados durante este proceso de incorporación.",acknowledgment4:"Consiento al procesamiento de mi información personal como se describe en la política de privacidad de la empresa y entiendo mis derechos con respecto a estos datos.",legalNoticeTitle:"Aviso Legal:",legalNoticeMessage:"Su firma anterior es legalmente vinculante y certifica la integridad y precisión de toda la información proporcionada.",complianceMessage:"Este proceso de incorporación cumple con los requisitos de la ley federal de empleo, incluidos los requisitos del I-9 y de retención de impuestos.",finalSignature:"Firma Final del Empleado",signatureDesc:"Su firma a continuación certifica que ha completado el proceso de incorporación y acepta todos los términos y condiciones.",submitButton:"Completar Incorporación",stepStatuses:{personal_info:"Información Personal",document_upload:"Subir Documentos",i9_section1:"Formulario I-9 Sección 1",i9_review_sign:"Revisar y Firmar I-9",w4_form:"Formulario de Impuestos W-4",w4_review_sign:"Revisar y Firmar W-4",direct_deposit:"Depósito Directo",emergency_contacts:"Contactos de Emergencia",health_insurance:"Seguro de Salud",company_policies:"Políticas de la Empresa",trafficking_awareness:"Concientización sobre Trata de Personas"},estimatedTime:"Tiempo estimado: 4-5 minutos",overallProgress:"Progreso General",stepsCompleted:"pasos completados",complete:"Completo",pending:"Pendiente"}}[o],N=m=>{var S;const u=(S=s.stepData)==null?void 0:S[m];return(u==null?void 0:u.completed)||(u==null?void 0:u.signed)||!1},R=Object.keys(F.stepStatuses).filter(m=>N(m)),D=Object.keys(F.stepStatuses).length,O=Math.round(R.length/D*100);return e.jsx(le,{errors:C,saveStatus:b,children:e.jsx(ce,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(ae,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:F.title})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:F.description})]}),i&&e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsx(J,{className:"h-4 w-4 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:F.completedNotice})]}),e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:F.reviewSummary})]}),e.jsx("p",{className:"text-sm text-gray-600",children:F.reviewSummaryDesc})]}),e.jsx($,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-blue-900",children:F.overallProgress}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[O,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${O}%`}})}),e.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[R.length," of ",D," ",F.stepsCompleted]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(F.stepStatuses).map(([m,u])=>{const S=N(m);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u}),e.jsxs("div",{className:"flex items-center space-x-2",children:[S?e.jsx(J,{className:"h-4 w-4 text-green-600"}):e.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:S?F.complete:F.pending})]})]},m)})})]})})]}),e.jsxs(z,{className:"border-orange-200 bg-orange-50",children:[e.jsx(B,{children:e.jsxs(W,{className:"text-lg flex items-center space-x-2 text-orange-800",children:[e.jsx(re,{className:"h-5 w-5"}),e.jsx("span",{children:F.finalAcknowledgments})]})}),e.jsx($,{className:"space-y-4",children:[F.acknowledgment1,F.acknowledgment2,F.acknowledgment3,F.acknowledgment4].map((m,u)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(he,{id:`acknowledgment-${u}`,checked:x[u],onCheckedChange:S=>k(u,S),className:"mt-1"}),e.jsx("label",{htmlFor:`acknowledgment-${u}`,className:"text-sm text-orange-800 leading-relaxed cursor-pointer",children:m})]},u))})]}),e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:F.finalSignature})]}),e.jsx("p",{className:"text-sm text-gray-600",children:F.signatureDesc})]}),e.jsx($,{children:e.jsx(bt,{documentName:"Employee Onboarding Completion",signerName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||"Employee",signerTitle:r==null?void 0:r.position,acknowledgments:[F.acknowledgment1,F.acknowledgment2,F.acknowledgment3,F.acknowledgment4],requireIdentityVerification:!1,language:o,onSignatureComplete:P})})]}),i&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[e.jsx(J,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Onboarding Completed"}),e.jsx("p",{className:"text-green-700",children:F.completedNotice})]}),e.jsxs("div",{className:"text-xs text-gray-500 border-t pt-4",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:F.legalNoticeTitle})," ",F.legalNoticeMessage]}),e.jsx("p",{children:F.complianceMessage})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:F.estimatedTime})})]})})})}export{ps as B,Ve as C,ii as D,ni as F,ai as H,Ks as I,Ja as J,Xt as P,qe as R,ce as S,ti as T,st as U,si as W,Qs as a,ei as b,Qa as c,Ka as d,Xa as e,Za as f,Ga as g,Ya as h,ht as i,ea as p,Va as s,Pe as u};
