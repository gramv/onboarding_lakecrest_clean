var J=Object.defineProperty;var X=(s,l,r)=>l in s?J(s,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[l]=r;var L=(s,l,r)=>X(s,typeof l!="symbol"?l+"":l,r);import{j as a}from"./radixUI-MBKqlelr.js";import{a as t,u as B,L as P,f as q}from"./vendor-BQUE8CnD.js";import{C as Q,b as Y,c as Z,a as ee}from"./card-0UsC1Hfx.js";import{d as O,T as ae,B as W,e as j,X as te,u as se}from"./index-BX3Jf5rY.js";import{R as ne}from"./refresh-cw-FCIZnuDU.js";import{H as re}from"./home-ClFiBZK5.js";import{B as $}from"./badge-DbL2e8Dt.js";import{B as oe}from"./building-2-Ckg-FmN9.js";import{U as ce}from"./user-check-kaC5-dJg.js";import{U as G}from"./users-DJfJLhR6.js";import{F}from"./file-text-lgpzM1Mh.js";import{B as U}from"./bar-chart-3-B6uS4aOV.js";import{C as ie}from"./chevron-down-BIP_RoMW.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=O("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=O("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);class Ee extends t.Component{constructor(r){super(r);L(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});L(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,m){var f,d;console.error("Error caught by boundary:",r,m),(d=(f=this.props).onError)==null||d.call(f,r,m)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"responsive-container padding-lg flex items-center justify-center min-h-screen",children:a.jsxs(Q,{className:"card-elevated card-rounded-lg max-w-md w-full",children:[a.jsxs(Y,{className:"card-padding-md text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:a.jsx(ae,{className:"h-8 w-8 text-red-600"})})}),a.jsx(Z,{className:"text-heading-lg text-error",children:"Something went wrong"})]}),a.jsxs(ee,{className:"card-padding-md spacing-sm text-center",children:[a.jsx("p",{className:"text-body-md text-secondary mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),!1,a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs(W,{onClick:this.handleRetry,className:"",children:[a.jsx(ne,{className:"h-4 w-4 mr-2"}),"Try Again"]}),a.jsxs(W,{onClick:this.handleGoHome,variant:"outline",className:"",children:[a.jsx(re,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})]})}):this.props.children}}function _({className:s,variant:l="default",size:r="md",...m}){const f="animate-pulse bg-gray-200 rounded",d={default:"h-4",text:"h-4",avatar:"rounded-full",button:"rounded-lg",card:"rounded-xl"},p={sm:{default:"h-3",text:"h-3",avatar:"w-8 h-8",button:"h-9",card:"h-32"},md:{default:"h-4",text:"h-4",avatar:"w-10 h-10",button:"h-11",card:"h-40"},lg:{default:"h-6",text:"h-6",avatar:"w-12 h-12",button:"h-12",card:"h-48"}};return a.jsx("div",{className:j(f,d[l],p[r][l],s),...m})}function V({className:s,size:l="md",...r}){return a.jsx(_,{variant:"text",size:l,className:s,...r})}function Ae({className:s,size:l="md",...r}){return a.jsx(_,{variant:"card",size:l,className:s,...r})}function Re({count:s=4}){return a.jsx("div",{className:"responsive-grid-4 gap-md",children:Array.from({length:s}).map((l,r)=>a.jsx("div",{className:"card-elevated card-rounded-md",children:a.jsxs("div",{className:"card-padding-md text-center spacing-xs",children:[a.jsx(V,{className:"w-16 h-8 mx-auto"}),a.jsx(V,{className:"w-20 mx-auto",size:"sm"})]})},r))})}function Me({items:s,userRole:l,className:r,variant:m="tabs",onNavigate:f,showLabels:d=!0,compact:p=!1,orientation:c="horizontal"}){const v=B(),[i,k]=t.useState(!1),[h,R]=t.useState(!1),[I,b]=t.useState(-1),T=t.useRef(null),E=t.useRef([]),y=s.filter(e=>e.roles.includes(l));t.useEffect(()=>{const e=()=>{R(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),t.useEffect(()=>{k(!1),b(-1)},[v.pathname]),t.useEffect(()=>{const e=o=>{T.current&&!T.current.contains(o.target)&&k(!1)};if(i)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]);const A=t.useCallback(e=>{f==null||f(e),k(!1),b(-1)},[f]),D=t.useCallback((e,o,S)=>{var n,g,M,w;switch(e.key){case"Enter":case" ":e.preventDefault(),A(o);break;case"ArrowDown":case"ArrowRight":e.preventDefault();const x=(S+1)%y.length;b(x),(n=E.current[x])==null||n.focus();break;case"ArrowUp":case"ArrowLeft":e.preventDefault();const C=S===0?y.length-1:S-1;b(C),(g=E.current[C])==null||g.focus();break;case"Home":e.preventDefault(),b(0),(M=E.current[0])==null||M.focus();break;case"End":e.preventDefault();const N=y.length-1;b(N),(w=E.current[N])==null||w.focus();break;case"Escape":i&&(e.preventDefault(),k(!1),b(-1));break}},[y.length,A,i]),u=t.useCallback(()=>{k(e=>!e),i||setTimeout(()=>{var e;(e=E.current[0])==null||e.focus(),b(0)},100)},[i]);return m==="mobile"||h&&m==="tabs"?a.jsxs("div",{className:j("relative",r),ref:T,children:[a.jsxs(W,{variant:"outline",size:"sm",onClick:u,className:"md:hidden flex items-center gap-2","aria-expanded":i,"aria-controls":"mobile-navigation-menu","aria-label":`${i?"Close":"Open"} navigation menu`,"aria-haspopup":"true",children:[i?a.jsx(te,{className:"h-4 w-4"}):a.jsx(ue,{className:"h-4 w-4"}),a.jsx("span",{children:"Menu"}),a.jsx(ie,{className:j("h-3 w-3 transition-transform duration-200",i&&"rotate-180")})]}),i&&a.jsx("div",{className:"fixed inset-0 bg-black/20 z-40 md:hidden",onClick:()=>k(!1),"aria-hidden":"true"}),a.jsx("nav",{id:"mobile-navigation-menu",className:j("absolute top-full left-0 right-0 mt-2 bg-background border rounded-lg shadow-lg z-50 md:hidden","transform transition-all duration-200 ease-in-out",i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"),role:"navigation","aria-label":"Dashboard navigation","aria-hidden":!i,children:a.jsx("div",{className:"p-2 space-y-1",role:"menu",children:y.map((e,o)=>{const S=e.icon,n=v.pathname===e.path;return a.jsxs(P,{ref:g=>E.current[o]=g,to:e.path,onClick:()=>A(e),onKeyDown:g=>D(g,e,o),onFocus:()=>b(o),className:j("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-all duration-150","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:scale-[1.02] active:scale-[0.98]",n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted"),role:"menuitem",tabIndex:i?0:-1,"aria-label":e.ariaLabel||`Navigate to ${e.label}`,"aria-current":n?"page":void 0,children:[a.jsx(S,{className:"h-4 w-4 flex-shrink-0"}),d&&a.jsx("span",{className:"flex-1",children:e.label}),e.badge&&a.jsx($,{variant:n?"secondary":"outline",className:"text-xs ml-auto","aria-label":`${e.badge} items`,children:e.badge})]},e.key)})})}),a.jsx("div",{className:"hidden md:block",children:y.map(e=>{const o=e.icon;return v.pathname===e.path?a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(o,{className:"h-4 w-4"}),d&&a.jsx("span",{children:e.label}),e.badge&&a.jsx($,{variant:"default",className:"text-xs ml-2",children:e.badge})]},e.key):null})})]}):m==="sidebar"?a.jsx("nav",{className:j("flex space-y-1",c==="vertical"?"flex-col":"flex-row space-y-0 space-x-1",p&&"space-y-0.5",r),role:"navigation","aria-label":"Dashboard navigation","aria-orientation":c,children:y.map((e,o)=>{const S=e.icon,n=v.pathname===e.path;return a.jsxs(P,{ref:g=>E.current[o]=g,to:e.path,onClick:()=>A(e),onKeyDown:g=>D(g,e,o),onFocus:()=>b(o),className:j("flex items-center gap-3 rounded-lg text-sm font-medium transition-all duration-150","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:scale-[1.02] active:scale-[0.98]",p?"px-2 py-1.5":"px-3 py-2",n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted"),"aria-label":e.ariaLabel||`Navigate to ${e.label}`,"aria-current":n?"page":void 0,children:[a.jsx(S,{className:j("flex-shrink-0",p?"h-3.5 w-3.5":"h-4 w-4")}),d&&a.jsx("span",{className:j("flex-1 truncate",p&&"text-xs"),children:e.label}),e.badge&&a.jsx($,{variant:n?"secondary":"outline",className:j("ml-auto",p?"text-xs px-1.5 py-0.5":"text-xs"),"aria-label":`${e.badge} items`,children:e.badge})]},e.key)})}):a.jsx("nav",{className:j("bg-muted p-1 rounded-lg transition-all duration-200",c==="vertical"||h?"flex flex-col gap-1":"flex flex-row flex-wrap gap-1",p&&"p-0.5",r),role:"navigation","aria-label":"Dashboard navigation","aria-orientation":c,children:y.map((e,o)=>{const S=e.icon,n=v.pathname===e.path;return a.jsxs(P,{ref:g=>E.current[o]=g,to:e.path,onClick:()=>A(e),onKeyDown:g=>D(g,e,o),onFocus:()=>b(o),className:j("flex items-center gap-2 rounded-md text-sm font-medium transition-all duration-150","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:scale-[1.02] active:scale-[0.98]",c==="vertical"||h?"w-full justify-start px-3 py-2":"min-w-0 flex-1 justify-center px-3 py-2",p&&"px-2 py-1.5 text-xs",n?"bg-background text-foreground shadow-sm ring-1 ring-primary/20":"text-muted-foreground hover:text-foreground hover:bg-background/50"),"aria-label":e.ariaLabel||`Navigate to ${e.label}`,"aria-current":n?"page":void 0,children:[a.jsx(S,{className:j("flex-shrink-0",p?"h-3.5 w-3.5":"h-4 w-4")}),d&&a.jsx("span",{className:j("truncate",p&&"text-xs"),children:e.label}),e.badge&&a.jsx($,{variant:n?"default":"secondary",className:j("ml-auto sm:ml-1",p?"text-xs px-1.5 py-0.5":"text-xs"),"aria-label":`${e.badge} items`,children:e.badge})]},e.key)})})}const Te=[{key:"overview",label:"Overview",path:"/hr/overview",icon:le,roles:["hr"],ariaLabel:"Properties overview and statistics"},{key:"properties",label:"Properties",path:"/hr/properties",icon:oe,roles:["hr"],ariaLabel:"Manage hotel properties and locations"},{key:"managers",label:"Managers",path:"/hr/managers",icon:ce,roles:["hr"],ariaLabel:"Manage property managers and assignments"},{key:"employees",label:"Employees",path:"/hr/employees",icon:G,roles:["hr"],ariaLabel:"View and manage all employees"},{key:"applications",label:"Applications",path:"/hr/applications",icon:F,roles:["hr"],ariaLabel:"Review job applications and hiring decisions"},{key:"system-applications",label:"System Applications",path:"/hr/system-applications",icon:F,roles:["hr"],ariaLabel:"View all applications across all properties"},{key:"analytics",label:"Analytics",path:"/hr/analytics",icon:U,roles:["hr"],ariaLabel:"View system analytics and reports"}],De=[{key:"applications",label:"Applications",path:"/manager/applications",icon:F,roles:["manager"],ariaLabel:"Review applications for your property"},{key:"employees",label:"Employees",path:"/manager/employees",icon:G,roles:["manager"],ariaLabel:"Manage employees at your property"},{key:"analytics",label:"Analytics",path:"/manager/analytics",icon:U,roles:["manager"],ariaLabel:"View analytics for your property"}],de={properties:"Properties - HR Dashboard",managers:"Managers - HR Dashboard",employees:"Employees - HR Dashboard",applications:"Applications - HR Dashboard",analytics:"Analytics - HR Dashboard"},pe={applications:"Applications - Manager Dashboard",employees:"Employees - Manager Dashboard",analytics:"Analytics - Manager Dashboard"},H={isProcessing:!1,lastCallback:""};function Ie({role:s,onNavigate:l}){const r=B(),m=q(),f=t.useRef(r.pathname);t.useRef(`${s}-${Math.random().toString(36).substr(2,9)}`);const d=s==="hr"?"properties":"applications",p=()=>{const e=r.pathname.split("/")[2];return(s==="hr"?["properties","managers","employees","applications","analytics"]:["applications","employees","analytics"]).includes(e)?e:d},[c,v]=t.useState(()=>({currentSection:p(),previousSection:null,isNavigating:!1,navigationHistory:[],breadcrumbs:[],activeIndex:-1})),i=()=>{const e=r.pathname.split("/")[2];return(s==="hr"?["properties","managers","employees","applications","analytics"]:["applications","employees","analytics"]).includes(e)?e:d};t.useEffect(()=>{const u=r.pathname;if(u===f.current)return;const o=u.split("/")[2],S=s==="hr"?["properties","managers","employees","applications","analytics"]:["applications","employees","analytics"],n=S.includes(o)?o:d,M=f.current.split("/")[2],w=M&&S.includes(M)?M:d;if(w===n)return;const x=`${w}->${n}`;if(H.isProcessing&&H.lastCallback===x)return;H.isProcessing=!0,H.lastCallback=x;const N=(s==="hr"?de:pe)[n]||`${n} - ${s==="hr"?"HR":"Manager"} Dashboard`;document.title=N,l==null||l(w,n);const z={properties:"Properties",managers:"Managers",employees:"Employees",applications:"Applications",analytics:"Analytics"},K=[{label:"Home",path:"/"},{label:s==="hr"?"HR Dashboard":"Manager Dashboard",path:`/${s}`},{label:z[n]||n}];v({currentSection:n,previousSection:w,isNavigating:!1,navigationHistory:[...c.navigationHistory,n].slice(-10),breadcrumbs:K,activeIndex:-1}),setTimeout(()=>{H.isProcessing=!1},50),f.current=u},[r.pathname,c.currentSection,c.navigationHistory]);const k=t.useCallback(u=>{if(!(s==="hr"?["properties","managers","employees","applications","analytics"]:["applications","employees","analytics"]).includes(u)||c.currentSection===u)return;const o=`/${s}/${u}`;r.pathname!==o&&(v(S=>({...S,isNavigating:!0})),m(o))},[s,c.currentSection,r.pathname,m]),h=t.useCallback(u=>{k(u.key)},[k]),R=t.useCallback(()=>{window.history.back()},[]),I=t.useCallback(()=>{window.history.forward()},[]),b=t.useCallback(u=>c.currentSection===u,[c.currentSection]),T=t.useCallback(u=>`/${s}/${u}`,[s]),E=t.useCallback(()=>c.navigationHistory.length>1,[c.navigationHistory]),y=t.useCallback(()=>!1,[]),A=t.useCallback(u=>{const e=u||c.currentSection;return`${window.location.origin}/${s}/${e}`},[s,c.currentSection]),D=t.useCallback(async u=>{const e=A(u);try{return await navigator.clipboard.writeText(e),!0}catch(o){return console.error("Failed to copy URL to clipboard:",o),!1}},[A]);return{currentSection:c.currentSection,previousSection:c.previousSection,isNavigating:c.isNavigating,navigationHistory:c.navigationHistory,breadcrumbs:c.breadcrumbs,activeIndex:c.activeIndex,navigateToSection:k,handleNavigationClick:h,goBack:R,goForward:I,isActive:b,getSectionPath:T,getCurrentSection:i,canGoBack:E,canGoForward:y,getBookmarkUrl:A,copyBookmarkUrl:D,setActiveIndex:t.useCallback(u=>{v(e=>({...e,activeIndex:u}))},[])}}function He(){const[s,l]=t.useState({totalNavigations:0,sectionVisits:{},averageTimePerSection:{},lastVisitTime:{}}),r=t.useCallback((d,p)=>{const c=Date.now();l(v=>{const i={...v};if(i.totalNavigations+=1,i.sectionVisits[p]=(i.sectionVisits[p]||0)+1,v.lastVisitTime[d]){const k=c-v.lastVisitTime[d],h=v.averageTimePerSection[d]||0,R=v.sectionVisits[d]||1;i.averageTimePerSection[d]=(h*(R-1)+k)/R}return i.lastVisitTime[p]=c,i})},[]),m=t.useCallback(()=>s,[s]),f=t.useCallback(()=>{l({totalNavigations:0,sectionVisits:{},averageTimePerSection:{},lastVisitTime:{}})},[]);return{trackNavigation:r,getAnalytics:m,resetAnalytics:f,analytics:s}}function $e(s,l={}){const{enabled:r=!0,onMessage:m,onOpen:f,onClose:d,onError:p,heartbeatInterval:c=3e4,reconnectDelay:v=3e3,maxReconnectAttempts:i=5}=l,{token:k}=se(),h=t.useRef(null),R=t.useRef(null),I=t.useRef(null),b=t.useRef(0),T=t.useRef(!1),[E,y]=t.useState({isConnected:!1,lastMessage:null,connectionError:null}),A=t.useCallback(()=>{R.current&&(clearInterval(R.current),R.current=null),I.current&&(clearTimeout(I.current),I.current=null)},[]),D=t.useCallback(()=>{var n;((n=h.current)==null?void 0:n.readyState)===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"heartbeat"}))},[]),u=t.useCallback(()=>{R.current&&clearInterval(R.current),R.current=setInterval(D,c)},[c,D]),e=t.useCallback(()=>{var n,g;if(!(!r||!k||((n=h.current)==null?void 0:n.readyState)===WebSocket.OPEN)){if(((g=h.current)==null?void 0:g.readyState)===WebSocket.CONNECTING){console.debug("[WebSocket] Connection already in progress, skipping");return}h.current&&(T.current=!0,h.current.close(),h.current=null);try{const M=`${s}?token=${encodeURIComponent(k)}`;console.debug("[WebSocket] Connecting to:",s);const w=new WebSocket(M);h.current=w,w.onopen=x=>{console.debug("[WebSocket] Connected successfully"),b.current=0,T.current=!1,y(C=>({...C,isConnected:!0,connectionError:null})),u(),f==null||f(x)},w.onmessage=x=>{try{const C=JSON.parse(x.data);if(C.type!=="heartbeat_ack"&&console.debug("[WebSocket] Message received:",C.type),y(N=>({...N,lastMessage:C})),C.type==="heartbeat_ack")return;m==null||m(x)}catch(C){console.error("[WebSocket] Failed to parse message:",C),m==null||m(x)}},w.onclose=x=>{if(console.debug("[WebSocket] Connection closed:",x.code,x.reason),A(),y(N=>({...N,isConnected:!1})),h.current=null,[4001,1008,4003].includes(x.code)){console.error("[WebSocket] Authentication failed - not reconnecting"),y(N=>({...N,connectionError:"Authentication failed - please refresh the page"}));return}if(!T.current&&b.current<i){b.current++;const N=Math.min(v*Math.pow(2,b.current-1),3e4);console.debug(`[WebSocket] Reconnecting in ${N}ms (attempt ${b.current}/${i})`),I.current=setTimeout(()=>{e()},N)}else b.current>=i&&y(N=>({...N,connectionError:"Maximum reconnection attempts reached"}));d==null||d(x)},w.onerror=x=>{console.error("[WebSocket] Error occurred:",x),y(C=>({...C,connectionError:"WebSocket connection error"})),p==null||p(x)}}catch(M){console.error("[WebSocket] Failed to connect:",M),y(w=>({...w,connectionError:"Failed to establish WebSocket connection"}))}}},[r,k,s,f,m,d,p,u,A,v,i]),o=t.useCallback(()=>{console.debug("[WebSocket] Disconnecting..."),T.current=!0,A(),h.current&&(h.current.close(),h.current=null),y(n=>({...n,isConnected:!1,connectionError:null}))},[A]),S=t.useCallback(n=>{var g;if(((g=h.current)==null?void 0:g.readyState)===WebSocket.OPEN){const M=typeof n=="string"?n:JSON.stringify(n);h.current.send(M),console.debug("[WebSocket] Message sent:",n)}else console.warn("[WebSocket] Cannot send message - connection not open")},[]);return t.useEffect(()=>{if(r&&k){const n=setTimeout(()=>{e()},100);return()=>{clearTimeout(n),o()}}},[r,k]),{isConnected:E.isConnected,lastMessage:E.lastMessage,connectionError:E.connectionError,sendMessage:S,connect:e,disconnect:o}}export{Me as D,Ee as E,Te as H,De as M,Re as S,He as a,$e as b,Ae as c,Ie as u};
