import{j as e,m as Et,n as fs,o as ps,e as xs,p as be,u as Pt,q as ge,g as Fe,r as Rt,s as _t,t as gs,v as vs,w as js,x as ys,y as Ns,F as bs,z as ws,B as ks,E as Cs,a as Ss,d as Es,O as Ps,f as Rs,G as Me}from"./radixUI-MBKqlelr.js";import{a}from"./vendor-BQUE8CnD.js";import{d as $e,e as V,f as _s,B as K,X as _e}from"./index-BX3Jf5rY.js";import{I as le}from"./input-C7n7UaRv.js";import{a as Is,C as Ne}from"./checkbox-CzwSq1oz.js";import{C as gt,a as vt}from"./card-0UsC1Hfx.js";import{S as dt,T as Ye,a as Xe,b as Ce,c as Se,d as Ze,e as Ee}from"./table-B6NKxQYn.js";import{C as Ds}from"./chevron-right-D20CZ_0W.js";import{B as lt}from"./badge-DbL2e8Dt.js";import{D as It,a as Dt,b as Ot,c as At,d as Ft}from"./dialog-BrcI6BMt.js";import{T as Os}from"./trending-up-DZykrMLX.js";import{C as As}from"./clock-DuORzYmm.js";import{L as ae}from"./label-BGHhm9HA.js";import{S as me,a as fe,b as pe,c as xe,d as Z,C as it}from"./select-CHEqtOpE.js";import{S as Mt}from"./separator-BW__RCi5.js";import{C as Ue}from"./chevron-down-BIP_RoMW.js";import{S as Fs}from"./save-CkQaEi9A.js";import{T as Ms}from"./trash-2-CRAWfZhR.js";import{P as jt}from"./plus-_zwNWoy_.js";import{D as Ls}from"./download-DxzIzwbA.js";import{F as $s}from"./file-text-lgpzM1Mh.js";import{S as Ts}from"./settings-BNPlDAeK.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=$e("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=$e("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=$e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=$e("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Lt=({className:t,...r})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:V("mx-auto flex w-full justify-center",t),...r});Lt.displayName="Pagination";const $t=a.forwardRef(({className:t,...r},s)=>e.jsx("ul",{ref:s,className:V("flex flex-row items-center gap-1",t),...r}));$t.displayName="PaginationContent";const qe=a.forwardRef(({className:t,...r},s)=>e.jsx("li",{ref:s,className:V("",t),...r}));qe.displayName="PaginationItem";const Be=({className:t,isActive:r,size:s="icon",...l})=>e.jsx("a",{"aria-current":r?"page":void 0,className:V(_s({variant:r?"outline":"ghost",size:s}),t),...l});Be.displayName="PaginationLink";const Tt=({className:t,...r})=>e.jsxs(Be,{"aria-label":"Go to previous page",size:"default",className:V("gap-1 pl-2.5",t),...r,children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Tt.displayName="PaginationPrevious";const zt=({className:t,...r})=>e.jsxs(Be,{"aria-label":"Go to next page",size:"default",className:V("gap-1 pr-2.5",t),...r,children:[e.jsx("span",{children:"Next"}),e.jsx(Ds,{className:"h-4 w-4"})]});zt.displayName="PaginationNext";var Ge="Popover",[Vt,ca]=xs(Ge,[Et]),Te=Et(),[Bs,je]=Vt(Ge),qt=t=>{const{__scopePopover:r,children:s,open:l,defaultOpen:o,onOpenChange:i,modal:h=!1}=t,d=Te(r),y=a.useRef(null),[p,j]=a.useState(!1),[g,m]=fs({prop:l,defaultProp:o??!1,onChange:i,caller:Ge});return e.jsx(ps,{...d,children:e.jsx(Bs,{scope:r,contentId:be(),triggerRef:y,open:g,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(c=>!c),[m]),hasCustomAnchor:p,onCustomAnchorAdd:a.useCallback(()=>j(!0),[]),onCustomAnchorRemove:a.useCallback(()=>j(!1),[]),modal:h,children:s})})};qt.displayName=Ge;var Ht="PopoverAnchor",Gs=a.forwardRef((t,r)=>{const{__scopePopover:s,...l}=t,o=je(Ht,s),i=Te(s),{onCustomAnchorAdd:h,onCustomAnchorRemove:d}=o;return a.useEffect(()=>(h(),()=>d()),[h,d]),e.jsx(Rt,{...i,...l,ref:r})});Gs.displayName=Ht;var Ut="PopoverTrigger",Bt=a.forwardRef((t,r)=>{const{__scopePopover:s,...l}=t,o=je(Ut,s),i=Te(s),h=Pt(r,o.triggerRef),d=e.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Wt(o.open),...l,ref:h,onClick:Fe(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?d:e.jsx(Rt,{asChild:!0,...i,children:d})});Bt.displayName=Ut;var ut="PopoverPortal",[Ks,Js]=Vt(ut,{forceMount:void 0}),Gt=t=>{const{__scopePopover:r,forceMount:s,children:l,container:o}=t,i=je(ut,r);return e.jsx(Ks,{scope:r,forceMount:s,children:e.jsx(_t,{present:s||i.open,children:e.jsx(gs,{asChild:!0,container:o,children:l})})})};Gt.displayName=ut;var Ie="PopoverContent",Kt=a.forwardRef((t,r)=>{const s=Js(Ie,t.__scopePopover),{forceMount:l=s.forceMount,...o}=t,i=je(Ie,t.__scopePopover);return e.jsx(_t,{present:l||i.open,children:i.modal?e.jsx(Ws,{...o,ref:r}):e.jsx(Ys,{...o,ref:r})})});Kt.displayName=Ie;var Qs=ys("PopoverContent.RemoveScroll"),Ws=a.forwardRef((t,r)=>{const s=je(Ie,t.__scopePopover),l=a.useRef(null),o=Pt(r,l),i=a.useRef(!1);return a.useEffect(()=>{const h=l.current;if(h)return vs(h)},[]),e.jsx(js,{as:Qs,allowPinchZoom:!0,children:e.jsx(Jt,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(t.onCloseAutoFocus,h=>{var d;h.preventDefault(),i.current||(d=s.triggerRef.current)==null||d.focus()}),onPointerDownOutside:Fe(t.onPointerDownOutside,h=>{const d=h.detail.originalEvent,y=d.button===0&&d.ctrlKey===!0,p=d.button===2||y;i.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:Fe(t.onFocusOutside,h=>h.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ys=a.forwardRef((t,r)=>{const s=je(Ie,t.__scopePopover),l=a.useRef(!1),o=a.useRef(!1);return e.jsx(Jt,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var h,d;(h=t.onCloseAutoFocus)==null||h.call(t,i),i.defaultPrevented||(l.current||(d=s.triggerRef.current)==null||d.focus(),i.preventDefault()),l.current=!1,o.current=!1},onInteractOutside:i=>{var y,p;(y=t.onInteractOutside)==null||y.call(t,i),i.defaultPrevented||(l.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const h=i.target;((p=s.triggerRef.current)==null?void 0:p.contains(h))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Jt=a.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:l,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:h,onEscapeKeyDown:d,onPointerDownOutside:y,onFocusOutside:p,onInteractOutside:j,...g}=t,m=je(Ie,s),c=Te(s);return Ns(),e.jsx(bs,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:o,onUnmountAutoFocus:i,children:e.jsx(ws,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:j,onEscapeKeyDown:d,onPointerDownOutside:y,onFocusOutside:p,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(ks,{"data-state":Wt(m.open),role:"dialog",id:m.contentId,...c,...g,ref:r,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Qt="PopoverClose",Xs=a.forwardRef((t,r)=>{const{__scopePopover:s,...l}=t,o=je(Qt,s);return e.jsx(ge.button,{type:"button",...l,ref:r,onClick:Fe(t.onClick,()=>o.onOpenChange(!1))})});Xs.displayName=Qt;var Zs="PopoverArrow",er=a.forwardRef((t,r)=>{const{__scopePopover:s,...l}=t,o=Te(s);return e.jsx(Cs,{...o,...l,ref:r})});er.displayName=Zs;function Wt(t){return t?"open":"closed"}var tr=qt,sr=Bt,rr=Gt,Yt=Kt;const ht=tr,mt=sr,Ke=a.forwardRef(({className:t,align:r="center",sideOffset:s=4,...l},o)=>e.jsx(rr,{children:e.jsx(Yt,{ref:o,align:r,sideOffset:s,className:V("z-50 w-72 rounded-md border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin] dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",t),...l})}));Ke.displayName=Yt.displayName;var yt=1,ar=.9,nr=.8,lr=.17,et=.1,tt=.999,ir=.9999,or=.99,cr=/[\\\/_+.#"@\[\(\{&]/,dr=/[\\\/_+.#"@\[\(\{&]/g,ur=/[\s-]/,Xt=/[\s-]/g;function ot(t,r,s,l,o,i,h){if(i===r.length)return o===t.length?yt:or;var d=`${o},${i}`;if(h[d]!==void 0)return h[d];for(var y=l.charAt(i),p=s.indexOf(y,o),j=0,g,m,c,N;p>=0;)g=ot(t,r,s,l,p+1,i+1,h),g>j&&(p===o?g*=yt:cr.test(t.charAt(p-1))?(g*=nr,c=t.slice(o,p-1).match(dr),c&&o>0&&(g*=Math.pow(tt,c.length))):ur.test(t.charAt(p-1))?(g*=ar,N=t.slice(o,p-1).match(Xt),N&&o>0&&(g*=Math.pow(tt,N.length))):(g*=lr,o>0&&(g*=Math.pow(tt,p-o))),t.charAt(p)!==r.charAt(i)&&(g*=ir)),(g<et&&s.charAt(p-1)===l.charAt(i+1)||l.charAt(i+1)===l.charAt(i)&&s.charAt(p-1)!==l.charAt(i))&&(m=ot(t,r,s,l,p+1,i+2,h),m*et>g&&(g=m*et)),g>j&&(j=g),p=s.indexOf(y,p+1);return h[d]=j,j}function Nt(t){return t.toLowerCase().replace(Xt," ")}function hr(t,r,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,ot(t,r,Nt(t),Nt(r),0,0,{})}var Oe='[cmdk-group=""]',st='[cmdk-group-items=""]',mr='[cmdk-group-heading=""]',Zt='[cmdk-item=""]',bt=`${Zt}:not([aria-disabled="true"])`,ct="cmdk-item-select",Pe="data-value",fr=(t,r,s)=>hr(t,r,s),es=a.createContext(void 0),ze=()=>a.useContext(es),ts=a.createContext(void 0),ft=()=>a.useContext(ts),ss=a.createContext(void 0),rs=a.forwardRef((t,r)=>{let s=Re(()=>{var u,E;return{search:"",value:(E=(u=t.value)!=null?u:t.defaultValue)!=null?E:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=Re(()=>new Set),o=Re(()=>new Map),i=Re(()=>new Map),h=Re(()=>new Set),d=as(t),{label:y,children:p,value:j,onValueChange:g,filter:m,shouldFilter:c,loop:N,disablePointerSelection:D=!1,vimBindings:I=!0,...C}=t,Y=be(),T=be(),G=be(),J=a.useRef(null),A=Cr();we(()=>{if(j!==void 0){let u=j.trim();s.current.value=u,F.emit()}},[j]),we(()=>{A(6,z)},[]);let F=a.useMemo(()=>({subscribe:u=>(h.current.add(u),()=>h.current.delete(u)),snapshot:()=>s.current,setState:(u,E,_)=>{var w,M,q,ee;if(!Object.is(s.current[u],E)){if(s.current[u]=E,u==="search")Q(),P(),A(1,ie);else if(u==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let n=document.getElementById(G);n?n.focus():(w=document.getElementById(Y))==null||w.focus()}if(A(7,()=>{var n;s.current.selectedItemId=(n=W())==null?void 0:n.id,F.emit()}),_||A(5,z),((M=d.current)==null?void 0:M.value)!==void 0){let n=E??"";(ee=(q=d.current).onValueChange)==null||ee.call(q,n);return}}F.emit()}},emit:()=>{h.current.forEach(u=>u())}}),[]),v=a.useMemo(()=>({value:(u,E,_)=>{var w;E!==((w=i.current.get(u))==null?void 0:w.value)&&(i.current.set(u,{value:E,keywords:_}),s.current.filtered.items.set(u,H(E,_)),A(2,()=>{P(),F.emit()}))},item:(u,E)=>(l.current.add(u),E&&(o.current.has(E)?o.current.get(E).add(u):o.current.set(E,new Set([u]))),A(3,()=>{Q(),P(),s.current.value||ie(),F.emit()}),()=>{i.current.delete(u),l.current.delete(u),s.current.filtered.items.delete(u);let _=W();A(4,()=>{Q(),(_==null?void 0:_.getAttribute("id"))===u&&ie(),F.emit()})}),group:u=>(o.current.has(u)||o.current.set(u,new Set),()=>{i.current.delete(u),o.current.delete(u)}),filter:()=>d.current.shouldFilter,label:y||t["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:Y,inputId:G,labelId:T,listInnerRef:J}),[]);function H(u,E){var _,w;let M=(w=(_=d.current)==null?void 0:_.filter)!=null?w:fr;return u?M(u,s.current.search,E):0}function P(){if(!s.current.search||d.current.shouldFilter===!1)return;let u=s.current.filtered.items,E=[];s.current.filtered.groups.forEach(w=>{let M=o.current.get(w),q=0;M.forEach(ee=>{let n=u.get(ee);q=Math.max(n,q)}),E.push([w,q])});let _=J.current;ce().sort((w,M)=>{var q,ee;let n=w.getAttribute("id"),x=M.getAttribute("id");return((q=u.get(x))!=null?q:0)-((ee=u.get(n))!=null?ee:0)}).forEach(w=>{let M=w.closest(st);M?M.appendChild(w.parentElement===M?w:w.closest(`${st} > *`)):_.appendChild(w.parentElement===_?w:w.closest(`${st} > *`))}),E.sort((w,M)=>M[1]-w[1]).forEach(w=>{var M;let q=(M=J.current)==null?void 0:M.querySelector(`${Oe}[${Pe}="${encodeURIComponent(w[0])}"]`);q==null||q.parentElement.appendChild(q)})}function ie(){let u=ce().find(_=>_.getAttribute("aria-disabled")!=="true"),E=u==null?void 0:u.getAttribute(Pe);F.setState("value",E||void 0)}function Q(){var u,E,_,w;if(!s.current.search||d.current.shouldFilter===!1){s.current.filtered.count=l.current.size;return}s.current.filtered.groups=new Set;let M=0;for(let q of l.current){let ee=(E=(u=i.current.get(q))==null?void 0:u.value)!=null?E:"",n=(w=(_=i.current.get(q))==null?void 0:_.keywords)!=null?w:[],x=H(ee,n);s.current.filtered.items.set(q,x),x>0&&M++}for(let[q,ee]of o.current)for(let n of ee)if(s.current.filtered.items.get(n)>0){s.current.filtered.groups.add(q);break}s.current.filtered.count=M}function z(){var u,E,_;let w=W();w&&(((u=w.parentElement)==null?void 0:u.firstChild)===w&&((_=(E=w.closest(Oe))==null?void 0:E.querySelector(mr))==null||_.scrollIntoView({block:"nearest"})),w.scrollIntoView({block:"nearest"}))}function W(){var u;return(u=J.current)==null?void 0:u.querySelector(`${Zt}[aria-selected="true"]`)}function ce(){var u;return Array.from(((u=J.current)==null?void 0:u.querySelectorAll(bt))||[])}function de(u){let E=ce()[u];E&&F.setState("value",E.getAttribute(Pe))}function k(u){var E;let _=W(),w=ce(),M=w.findIndex(ee=>ee===_),q=w[M+u];(E=d.current)!=null&&E.loop&&(q=M+u<0?w[w.length-1]:M+u===w.length?w[0]:w[M+u]),q&&F.setState("value",q.getAttribute(Pe))}function L(u){let E=W(),_=E==null?void 0:E.closest(Oe),w;for(;_&&!w;)_=u>0?wr(_,Oe):kr(_,Oe),w=_==null?void 0:_.querySelector(bt);w?F.setState("value",w.getAttribute(Pe)):k(u)}let te=()=>de(ce().length-1),ue=u=>{u.preventDefault(),u.metaKey?te():u.altKey?L(1):k(1)},se=u=>{u.preventDefault(),u.metaKey?de(0):u.altKey?L(-1):k(-1)};return a.createElement(ge.div,{ref:r,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:u=>{var E;(E=C.onKeyDown)==null||E.call(C,u);let _=u.nativeEvent.isComposing||u.keyCode===229;if(!(u.defaultPrevented||_))switch(u.key){case"n":case"j":{I&&u.ctrlKey&&ue(u);break}case"ArrowDown":{ue(u);break}case"p":case"k":{I&&u.ctrlKey&&se(u);break}case"ArrowUp":{se(u);break}case"Home":{u.preventDefault(),de(0);break}case"End":{u.preventDefault(),te();break}case"Enter":{u.preventDefault();let w=W();if(w){let M=new Event(ct);w.dispatchEvent(M)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:v.inputId,id:v.labelId,style:Er},y),Je(t,u=>a.createElement(ts.Provider,{value:F},a.createElement(es.Provider,{value:v},u))))}),pr=a.forwardRef((t,r)=>{var s,l;let o=be(),i=a.useRef(null),h=a.useContext(ss),d=ze(),y=as(t),p=(l=(s=y.current)==null?void 0:s.forceMount)!=null?l:h==null?void 0:h.forceMount;we(()=>{if(!p)return d.item(o,h==null?void 0:h.id)},[p]);let j=ns(o,i,[t.value,t.children,i],t.keywords),g=ft(),m=ve(A=>A.value&&A.value===j.current),c=ve(A=>p||d.filter()===!1?!0:A.search?A.filtered.items.get(o)>0:!0);a.useEffect(()=>{let A=i.current;if(!(!A||t.disabled))return A.addEventListener(ct,N),()=>A.removeEventListener(ct,N)},[c,t.onSelect,t.disabled]);function N(){var A,F;D(),(F=(A=y.current).onSelect)==null||F.call(A,j.current)}function D(){g.setState("value",j.current,!0)}if(!c)return null;let{disabled:I,value:C,onSelect:Y,forceMount:T,keywords:G,...J}=t;return a.createElement(ge.div,{ref:Me(i,r),...J,id:o,"cmdk-item":"",role:"option","aria-disabled":!!I,"aria-selected":!!m,"data-disabled":!!I,"data-selected":!!m,onPointerMove:I||d.getDisablePointerSelection()?void 0:D,onClick:I?void 0:N},t.children)}),xr=a.forwardRef((t,r)=>{let{heading:s,children:l,forceMount:o,...i}=t,h=be(),d=a.useRef(null),y=a.useRef(null),p=be(),j=ze(),g=ve(c=>o||j.filter()===!1?!0:c.search?c.filtered.groups.has(h):!0);we(()=>j.group(h),[]),ns(h,d,[t.value,t.heading,y]);let m=a.useMemo(()=>({id:h,forceMount:o}),[o]);return a.createElement(ge.div,{ref:Me(d,r),...i,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},s&&a.createElement("div",{ref:y,"cmdk-group-heading":"","aria-hidden":!0,id:p},s),Je(t,c=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?p:void 0},a.createElement(ss.Provider,{value:m},c))))}),gr=a.forwardRef((t,r)=>{let{alwaysRender:s,...l}=t,o=a.useRef(null),i=ve(h=>!h.search);return!s&&!i?null:a.createElement(ge.div,{ref:Me(o,r),...l,"cmdk-separator":"",role:"separator"})}),vr=a.forwardRef((t,r)=>{let{onValueChange:s,...l}=t,o=t.value!=null,i=ft(),h=ve(p=>p.search),d=ve(p=>p.selectedItemId),y=ze();return a.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),a.createElement(ge.input,{ref:r,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.listId,"aria-labelledby":y.labelId,"aria-activedescendant":d,id:y.inputId,type:"text",value:o?t.value:h,onChange:p=>{o||i.setState("search",p.target.value),s==null||s(p.target.value)}})}),jr=a.forwardRef((t,r)=>{let{children:s,label:l="Suggestions",...o}=t,i=a.useRef(null),h=a.useRef(null),d=ve(p=>p.selectedItemId),y=ze();return a.useEffect(()=>{if(h.current&&i.current){let p=h.current,j=i.current,g,m=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let c=p.offsetHeight;j.style.setProperty("--cmdk-list-height",c.toFixed(1)+"px")})});return m.observe(p),()=>{cancelAnimationFrame(g),m.unobserve(p)}}},[]),a.createElement(ge.div,{ref:Me(i,r),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":l,id:y.listId},Je(t,p=>a.createElement("div",{ref:Me(h,y.listInnerRef),"cmdk-list-sizer":""},p)))}),yr=a.forwardRef((t,r)=>{let{open:s,onOpenChange:l,overlayClassName:o,contentClassName:i,container:h,...d}=t;return a.createElement(Ss,{open:s,onOpenChange:l},a.createElement(Es,{container:h},a.createElement(Ps,{"cmdk-overlay":"",className:o}),a.createElement(Rs,{"aria-label":t.label,"cmdk-dialog":"",className:i},a.createElement(rs,{ref:r,...d}))))}),Nr=a.forwardRef((t,r)=>ve(s=>s.filtered.count===0)?a.createElement(ge.div,{ref:r,...t,"cmdk-empty":"",role:"presentation"}):null),br=a.forwardRef((t,r)=>{let{progress:s,children:l,label:o="Loading...",...i}=t;return a.createElement(ge.div,{ref:r,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Je(t,h=>a.createElement("div",{"aria-hidden":!0},h)))}),oe=Object.assign(rs,{List:jr,Item:pr,Input:vr,Group:xr,Separator:gr,Dialog:yr,Empty:Nr,Loading:br});function wr(t,r){let s=t.nextElementSibling;for(;s;){if(s.matches(r))return s;s=s.nextElementSibling}}function kr(t,r){let s=t.previousElementSibling;for(;s;){if(s.matches(r))return s;s=s.previousElementSibling}}function as(t){let r=a.useRef(t);return we(()=>{r.current=t}),r}var we=typeof window>"u"?a.useEffect:a.useLayoutEffect;function Re(t){let r=a.useRef();return r.current===void 0&&(r.current=t()),r}function ve(t){let r=ft(),s=()=>t(r.snapshot());return a.useSyncExternalStore(r.subscribe,s,s)}function ns(t,r,s,l=[]){let o=a.useRef(),i=ze();return we(()=>{var h;let d=(()=>{var p;for(let j of s){if(typeof j=="string")return j.trim();if(typeof j=="object"&&"current"in j)return j.current?(p=j.current.textContent)==null?void 0:p.trim():o.current}})(),y=l.map(p=>p.trim());i.value(t,d,y),(h=r.current)==null||h.setAttribute(Pe,d),o.current=d}),o}var Cr=()=>{let[t,r]=a.useState(),s=Re(()=>new Map);return we(()=>{s.current.forEach(l=>l()),s.current=new Map},[t]),(l,o)=>{s.current.set(l,o),r({})}};function Sr(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function Je({asChild:t,children:r},s){return t&&a.isValidElement(r)?a.cloneElement(Sr(r),{ref:r.ref},s(r.props.children)):s(r)}var Er={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ls=a.forwardRef(({className:t,...r},s)=>e.jsx(oe,{ref:s,className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-white text-zinc-950 dark:bg-zinc-950 dark:text-zinc-50",t),...r}));ls.displayName=oe.displayName;const Pr=a.forwardRef(({className:t,...r},s)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(dt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(oe.Input,{ref:s,className:V("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-zinc-500 disabled:cursor-not-allowed disabled:opacity-50 dark:placeholder:text-zinc-400",t),...r})]}));Pr.displayName=oe.Input.displayName;const is=a.forwardRef(({className:t,...r},s)=>e.jsx(oe.List,{ref:s,className:V("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...r}));is.displayName=oe.List.displayName;const os=a.forwardRef((t,r)=>e.jsx(oe.Empty,{ref:r,className:"py-6 text-center text-sm",...t}));os.displayName=oe.Empty.displayName;const He=a.forwardRef(({className:t,...r},s)=>e.jsx(oe.Group,{ref:s,className:V("overflow-hidden p-1 text-zinc-950 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-zinc-500 dark:text-zinc-50 dark:[&_[cmdk-group-heading]]:text-zinc-400",t),...r}));He.displayName=oe.Group.displayName;const Rr=a.forwardRef(({className:t,...r},s)=>e.jsx(oe.Separator,{ref:s,className:V("-mx-1 h-px bg-zinc-200 dark:bg-zinc-800",t),...r}));Rr.displayName=oe.Separator.displayName;const Ae=a.forwardRef(({className:t,...r},s)=>e.jsx(oe.Item,{ref:s,className:V("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-zinc-100 data-[selected=true]:text-zinc-900 data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:data-[selected=true]:bg-zinc-800 dark:data-[selected=true]:text-zinc-50",t),...r}));Ae.displayName=oe.Item.displayName;const rt="hr-dashboard-search-history";function _r({data:t,searchFields:r,onSearchResults:s,onSearchChange:l,placeholder:o="Search...",className:i,enableHistory:h=!0,enableSuggestions:d=!0,maxHistoryItems:y=10,maxSuggestions:p=5,debounceMs:j=300}){const[g,m]=a.useState(""),[c,N]=a.useState(""),[D,I]=a.useState(!1),[C,Y]=a.useState([]),[T,G]=a.useState([]),[J,A]=a.useState(!1),F=a.useRef(null);a.useEffect(()=>{h&&v()},[h]),a.useEffect(()=>{const k=setTimeout(()=>{N(g)},j);return()=>clearTimeout(k)},[g,j]),a.useEffect(()=>{c?Q(c):s==null||s([]),l==null||l(c)},[c,t]),a.useEffect(()=>{d&&g&&ie(g)},[g,d]);const v=()=>{try{const k=localStorage.getItem(rt);if(k){const L=JSON.parse(k).map(te=>({...te,lastUsed:new Date(te.lastUsed)}));Y(L)}}catch(k){console.error("Failed to load search history:",k)}},H=k=>{if(!(!h||!k.trim()))try{const te=[{text:k.trim(),type:"history",lastUsed:new Date,count:1},...C.filter(ue=>ue.text!==k.trim())].slice(0,y);Y(te),localStorage.setItem(rt,JSON.stringify(te))}catch(L){console.error("Failed to save search history:",L)}},P=()=>{Y([]),localStorage.removeItem(rt)},ie=k=>{if(!k.trim()){G([]);return}const L=k.toLowerCase(),te=new Set;t.forEach(se=>{r.forEach(u=>{if(u.searchable!==!1){const E=cs(se,u.key);E&&typeof E=="string"&&E.toLowerCase().split(/\s+/).forEach(w=>{w.includes(L)&&w!==L&&w.length>2&&te.add(w)})}})});const ue=Array.from(te).slice(0,p).map(se=>({text:se,type:"suggestion"}));G(ue)},Q=k=>{if(!k.trim()){s==null||s([]);return}A(!0);try{const L=Ir(t,k,r);s==null||s(L)}finally{A(!1)}},z=k=>{var L;m(k),I(!1),H(k),(L=F.current)==null||L.focus()},W=()=>{var k;m(""),N(""),s==null||s([]),l==null||l(""),(k=F.current)==null||k.focus()},ce=k=>{var L;k.key==="Escape"?(I(!1),(L=F.current)==null||L.blur()):k.key==="Enter"&&z(g)},de=a.useMemo(()=>{const k=[];if(g){const L=C.filter(te=>te.text.toLowerCase().includes(g.toLowerCase())).slice(0,3);k.push(...L),k.push(...T.slice(0,p-L.length))}else k.push(...C.slice(0,5));return k},[g,C,T,p]);return e.jsx("div",{className:V("relative",i),children:e.jsxs(ht,{open:D,onOpenChange:I,children:[e.jsx(mt,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(le,{ref:F,placeholder:o,value:g,onChange:k=>m(k.target.value),onFocus:()=>I(!0),onKeyDown:ce,className:"pl-10 pr-10"}),g&&e.jsx(K,{variant:"ghost",size:"sm",onClick:W,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0 hover:bg-gray-100",children:e.jsx(_e,{className:"h-3 w-3"})}),J&&e.jsx("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})}),e.jsx(Ke,{className:"w-80 p-0",align:"start",children:e.jsx(ls,{children:e.jsx(is,{children:de.length===0?e.jsx(os,{children:g?"No suggestions found":"No search history"}):e.jsxs(e.Fragment,{children:[C.length>0&&!g&&e.jsxs(He,{heading:"Recent Searches",children:[C.slice(0,5).map((k,L)=>e.jsxs(Ae,{onSelect:()=>z(k.text),className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1",children:k.text}),e.jsx(lt,{variant:"secondary",className:"text-xs",children:k.count||1})]},`history-${L}`)),e.jsxs(Ae,{onSelect:P,className:"text-red-600 hover:text-red-700",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Clear history"]})]}),T.length>0&&g&&e.jsx(He,{heading:"Suggestions",children:T.map((k,L)=>e.jsxs(Ae,{onSelect:()=>z(k.text),className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1",children:k.text})]},`suggestion-${L}`))}),C.length>0&&g&&e.jsx(He,{heading:"From History",children:C.filter(k=>k.text.toLowerCase().includes(g.toLowerCase())).slice(0,3).map((k,L)=>e.jsxs(Ae,{onSelect:()=>z(k.text),className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1",children:k.text})]},`filtered-history-${L}`))})]})})})})]})})}function cs(t,r){return r.split(".").reduce((s,l)=>s==null?void 0:s[l],t)}function Ir(t,r,s){if(!r.trim())return[];const o=r.toLowerCase().split(/\s+/).filter(h=>h.length>0),i=[];return t.forEach(h=>{let d=0;const y=[];s.forEach(p=>{if(p.searchable===!1)return;const j=cs(h,p.key);if(!j)return;const g=String(j).toLowerCase(),m=p.weight||1;let c=0;const N=[];o.forEach(D=>{var C;const I=g.indexOf(D);if(I!==-1)c+=10*m,N.push([I,I+D.length]),I===0&&(c+=5*m),(I===0||g[I-1]===" ")&&(c+=3*m);else{let Y=0;for(let T=0;T<D.length;T++){const G=D[T],J=g.indexOf(G,T>0&&((C=N[N.length-1])==null?void 0:C[1])||0);J!==-1&&(Y+=1,(N.length===0||J>N[N.length-1][1])&&N.push([J,J+1]))}c+=Y/D.length*2*m}}),c>0&&(d+=c,y.push({field:p.key,value:String(j),indices:N}))}),d>0&&i.push({item:h,score:d,matches:y})}),i.sort((h,d)=>d.score-h.score)}function Dr(t,r){const[s,l]=a.useState([]),[o,i]=a.useState(""),[h,d]=a.useState(!1),y=a.useCallback(m=>{l(m),d(!1)},[]),p=a.useCallback(m=>{i(m),d(!!m)},[]),j=a.useMemo(()=>o?s.map(m=>m.item):t,[o,s,t]),g=a.useCallback((m,c)=>{if(!o)return m;const N=s.find(T=>T.matches.some(G=>G.field===c));if(!N)return m;const D=N.matches.find(T=>T.field===c);if(!D||D.indices.length===0)return m;const I=[...D.indices].sort((T,G)=>T[0]-G[0]);let C="",Y=0;return I.forEach(([T,G])=>{C+=m.slice(Y,T),C+=`<mark class="bg-yellow-200 px-1 rounded">${m.slice(T,G)}</mark>`,Y=G}),C+=m.slice(Y),C},[o,s]);return{searchResults:s,searchQuery:o,isSearching:h,filteredData:j,handleSearchResults:y,handleSearchChange:p,highlightText:g}}function at({text:t,highlight:r,className:s,highlightClassName:l="bg-yellow-200 px-0.5 rounded",caseSensitive:o=!1}){if(!r||!t)return e.jsx("span",{className:s,children:t});const i=o?t:t.toLowerCase(),d=(o?r:r.toLowerCase()).split(/\s+/).filter(m=>m.length>0);if(d.length===0)return e.jsx("span",{className:s,children:t});const y=[];d.forEach(m=>{let c=0;for(;;){const N=i.indexOf(m,c);if(N===-1)break;y.push({start:N,end:N+m.length,word:m}),c=N+1}});const p=y.sort((m,c)=>m.start-c.start).reduce((m,c)=>{if(m.length===0)return[c];const N=m[m.length-1];return c.start<=N.end?(N.end=Math.max(N.end,c.end),m):[...m,c]},[]);if(p.length===0)return e.jsx("span",{className:s,children:t});const j=[];let g=0;return p.forEach((m,c)=>{m.start>g&&j.push(e.jsx("span",{children:t.slice(g,m.start)},`text-${c}`)),j.push(e.jsx("mark",{className:l,children:t.slice(m.start,m.end)},`highlight-${c}`)),g=m.end}),g<t.length&&j.push(e.jsx("span",{children:t.slice(g)},"text-end")),e.jsx("span",{className:s,children:j})}const Or={text:["equals","not_equals","contains","not_contains","starts_with","ends_with","is_empty","is_not_empty"],number:["equals","not_equals","greater_than","less_than","greater_equal","less_equal","between","is_empty","is_not_empty"],date:["equals","not_equals","greater_than","less_than","greater_equal","less_equal","between","is_empty","is_not_empty"],select:["equals","not_equals","in","not_in","is_empty","is_not_empty"],multiselect:["in","not_in","is_empty","is_not_empty"],boolean:["equals","not_equals"]},Ar={equals:"Equals",not_equals:"Not equals",contains:"Contains",not_contains:"Does not contain",starts_with:"Starts with",ends_with:"Ends with",greater_than:"Greater than",less_than:"Less than",greater_equal:"Greater than or equal",less_equal:"Less than or equal",between:"Between",in:"In",not_in:"Not in",is_empty:"Is empty",is_not_empty:"Is not empty"},wt="hr-dashboard-filter-presets",kt="hr-dashboard-last-filter-state";function Fr({fields:t,onFiltersChange:r,onSortChange:s,onPresetSave:l,onPresetLoad:o,presets:i,className:h,enablePresets:d=!0,enableMultiSort:y=!0,maxRules:p=10}){const[j,g]=a.useState(!1),[m,c]=a.useState([]),[N,D]=a.useState([]),[I,C]=a.useState([]),[Y,T]=a.useState(!1),[G,J]=a.useState(""),[A,F]=a.useState(null);a.useEffect(()=>{d&&(v(),P())},[d]),a.useEffect(()=>{i&&C(i)},[i]),a.useEffect(()=>{d&&ie(),r==null||r(m)},[m,d,r]),a.useEffect(()=>{d&&ie(),s==null||s(N)},[N,d,s]);const v=()=>{try{const n=localStorage.getItem(wt);if(n){const x=JSON.parse(n).map(b=>({...b,createdAt:new Date(b.createdAt),lastUsed:b.lastUsed?new Date(b.lastUsed):void 0}));C(x)}}catch(n){console.error("Failed to load filter presets:",n)}},H=n=>{try{localStorage.setItem(wt,JSON.stringify(n)),C(n)}catch(x){console.error("Failed to save filter presets:",x)}},P=()=>{try{const n=localStorage.getItem(kt);if(n){const x=JSON.parse(n);x.rules&&c(x.rules),x.sortConfig&&D(x.sortConfig)}}catch(n){console.error("Failed to load last filter state:",n)}},ie=()=>{try{const n={rules:m,sortConfig:N};localStorage.setItem(kt,JSON.stringify(n))}catch(n){console.error("Failed to save filter state:",n)}},Q=()=>{var x,b;if(m.length>=p)return;const n={id:`rule-${Date.now()}`,field:((x=t[0])==null?void 0:x.key)||"",operator:"equals",value:"",type:((b=t[0])==null?void 0:b.type)||"text"};c([...m,n]),F(null)},z=(n,x)=>{c(m.map(b=>b.id===n?{...b,...x}:b)),F(null)},W=n=>{c(m.filter(x=>x.id!==n)),F(null)},ce=()=>{c([]),D([]),F(null)},de=()=>{const n=N.map(b=>b.field),x=t.find(b=>!n.includes(b.key));if(x){const b={field:x.key,direction:"asc",priority:N.length};D([...N,b])}},k=(n,x)=>{D(N.map((b,X)=>X===n?{...b,...x}:b))},L=n=>{D(N.filter((x,b)=>b!==n).map((x,b)=>({...x,priority:b})))},te=n=>{if(n===0)return;const x=[...N];[x[n-1],x[n]]=[x[n],x[n-1]],x.forEach((b,X)=>b.priority=X),D(x)},ue=n=>{if(n===N.length-1)return;const x=[...N];[x[n],x[n+1]]=[x[n+1],x[n]],x.forEach((b,X)=>b.priority=X),D(x)},se=()=>{if(!G.trim())return;const n={id:`preset-${Date.now()}`,name:G.trim(),rules:[...m],sortConfig:[...N],createdAt:new Date},x=[...I,n];H(x),l==null||l(n),J(""),T(!1),F(n.id)},u=n=>{c([...n.rules]),D([...n.sortConfig||[]]),F(n.id),g(!1);const x={...n,lastUsed:new Date},b=I.map(X=>X.id===n.id?x:X);H(b),o==null||o(x)},E=n=>{const x=I.filter(b=>b.id!==n);H(x),A===n&&F(null)},_=n=>t.find(x=>x.key===n),w=n=>{const x=_(n);return x?x.operators||Or[x.type]||[]:[]},M=n=>{var b,X,Ve;const x=_(n.field);if(!x||["is_empty","is_not_empty"].includes(n.operator))return null;switch(x.type){case"text":return e.jsx(le,{placeholder:"Enter value...",value:n.value||"",onChange:$=>z(n.id,{value:$.target.value}),className:"w-full"});case"number":if(n.operator==="between"){const[$,O]=Array.isArray(n.value)?n.value:["",""];return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(le,{type:"number",placeholder:"Min",value:$,onChange:re=>z(n.id,{value:[re.target.value,O]}),className:"w-20"}),e.jsx("span",{className:"text-sm text-gray-500",children:"to"}),e.jsx(le,{type:"number",placeholder:"Max",value:O,onChange:re=>z(n.id,{value:[$,re.target.value]}),className:"w-20"})]})}return e.jsx(le,{type:"number",placeholder:"Enter number...",value:n.value||"",onChange:$=>z(n.id,{value:$.target.value}),className:"w-full"});case"date":if(n.operator==="between"){const[$,O]=Array.isArray(n.value)?n.value:["",""];return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(le,{type:"date",value:$,onChange:re=>z(n.id,{value:[re.target.value,O]}),className:"w-36"}),e.jsx("span",{className:"text-sm text-gray-500",children:"to"}),e.jsx(le,{type:"date",value:O,onChange:re=>z(n.id,{value:[$,re.target.value]}),className:"w-36"})]})}return e.jsx(le,{type:"date",value:n.value||"",onChange:$=>z(n.id,{value:$.target.value}),className:"w-full"});case"select":if(["in","not_in"].includes(n.operator)){const $=Array.isArray(n.value)?n.value:[];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(me,{onValueChange:O=>{$.includes(O)||z(n.id,{value:[...$,O]})},children:[e.jsx(fe,{className:"w-full",children:e.jsx(pe,{placeholder:"Select values..."})}),e.jsx(xe,{children:(b=x.options)==null?void 0:b.filter(O=>!$.includes(O.value)).map(O=>e.jsx(Z,{value:O.value,children:O.label},O.value))})]}),$.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:$.map(O=>{var ye;const re=(ye=x.options)==null?void 0:ye.find(ke=>ke.value===O);return e.jsxs(lt,{variant:"secondary",className:"text-xs",children:[(re==null?void 0:re.label)||O,e.jsx("button",{onClick:()=>z(n.id,{value:$.filter(ke=>ke!==O)}),className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",children:e.jsx(_e,{className:"h-2 w-2"})})]},O)})})]})}return e.jsxs(me,{value:n.value||"",onValueChange:$=>z(n.id,{value:$}),children:[e.jsx(fe,{className:"w-full",children:e.jsx(pe,{placeholder:"Select value..."})}),e.jsx(xe,{children:(X=x.options)==null?void 0:X.map($=>e.jsx(Z,{value:$.value,children:$.label},$.value))})]});case"boolean":return e.jsxs(me,{value:((Ve=n.value)==null?void 0:Ve.toString())||"",onValueChange:$=>z(n.id,{value:$==="true"}),children:[e.jsx(fe,{className:"w-full",children:e.jsx(pe,{placeholder:"Select value..."})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"true",children:"True"}),e.jsx(Z,{value:"false",children:"False"})]})]});default:return null}},q=m.filter(n=>n.value!==""&&n.value!==null&&n.value!==void 0).length,ee=N.length;return e.jsx("div",{className:V("relative",h),children:e.jsxs(ht,{open:j,onOpenChange:g,children:[e.jsx(mt,{asChild:!0,children:e.jsxs(K,{variant:"outline",className:"relative",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Advanced Filters",(q>0||ee>0)&&e.jsx(lt,{variant:"secondary",className:"ml-2 h-5 w-5 p-0 text-xs flex items-center justify-center",children:q+ee}),e.jsx(Ue,{className:"h-4 w-4 ml-2"})]})}),e.jsxs(Ke,{className:"w-96 p-0",align:"end",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Advanced Filters"}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsxs(It,{open:Y,onOpenChange:T,children:[e.jsx(Dt,{asChild:!0,children:e.jsx(K,{variant:"ghost",size:"sm",children:e.jsx(Fs,{className:"h-4 w-4"})})}),e.jsxs(Ot,{children:[e.jsx(At,{children:e.jsx(Ft,{children:"Save Filter Preset"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"preset-name",children:"Preset Name"}),e.jsx(le,{id:"preset-name",placeholder:"Enter preset name...",value:G,onChange:n=>J(n.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(K,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(K,{onClick:se,disabled:!G.trim(),children:"Save Preset"})]})]})]})]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:ce,disabled:m.length===0&&N.length===0,children:e.jsx(_e,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[d&&I.length>0&&e.jsxs("div",{className:"p-4 border-b",children:[e.jsx(ae,{className:"text-sm font-medium mb-2 block",children:"Saved Presets"}),e.jsx("div",{className:"space-y-1",children:I.map(n=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{variant:A===n.id?"secondary":"ghost",size:"sm",onClick:()=>u(n),className:"flex-1 justify-start",children:n.name}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>E(n.id),className:"p-1 h-6 w-6",children:e.jsx(Ms,{className:"h-3 w-3"})})]},n.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Filter Rules"}),e.jsxs(K,{variant:"ghost",size:"sm",onClick:Q,disabled:m.length>=p,children:[e.jsx(jt,{className:"h-4 w-4 mr-1"}),"Add Rule"]})]}),e.jsxs("div",{className:"space-y-3",children:[m.map((n,x)=>e.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(me,{value:n.field,onValueChange:b=>{const X=_(b);z(n.id,{field:b,type:(X==null?void 0:X.type)||"text",operator:"equals",value:""})},children:[e.jsx(fe,{className:"w-32",children:e.jsx(pe,{})}),e.jsx(xe,{children:t.map(b=>e.jsx(Z,{value:b.key,children:b.label},b.key))})]}),e.jsxs(me,{value:n.operator,onValueChange:b=>z(n.id,{operator:b,value:["between","in","not_in"].includes(b)?[]:""}),children:[e.jsx(fe,{className:"w-36",children:e.jsx(pe,{})}),e.jsx(xe,{children:w(n.field).map(b=>e.jsx(Z,{value:b,children:Ar[b]},b))})]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>W(n.id),className:"p-1 h-6 w-6",children:e.jsx(_e,{className:"h-3 w-3"})})]}),M(n)]},n.id)),m.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No filter rules. Click "Add Rule" to get started.'})]})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Sorting"}),e.jsxs(K,{variant:"ghost",size:"sm",onClick:de,disabled:N.length>=t.length,children:[e.jsx(jt,{className:"h-4 w-4 mr-1"}),"Add Sort"]})]}),e.jsxs("div",{className:"space-y-2",children:[N.map((n,x)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>te(x),disabled:x===0,className:"p-1 h-6 w-6",children:e.jsx(it,{className:"h-3 w-3"})}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>ue(x),disabled:x===N.length-1,className:"p-1 h-6 w-6",children:e.jsx(Ue,{className:"h-3 w-3"})})]}),e.jsxs(me,{value:n.field,onValueChange:b=>k(x,{field:b}),children:[e.jsx(fe,{className:"w-32",children:e.jsx(pe,{})}),e.jsx(xe,{children:t.map(b=>e.jsx(Z,{value:b.key,children:b.label},b.key))})]}),e.jsxs(me,{value:n.direction,onValueChange:b=>k(x,{direction:b}),children:[e.jsx(fe,{className:"w-24",children:e.jsx(pe,{})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"asc",children:"Asc"}),e.jsx(Z,{value:"desc",children:"Desc"})]})]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>L(x),className:"p-1 h-6 w-6",children:e.jsx(_e,{className:"h-3 w-3"})})]},x)),N.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No sorting applied. Click "Add Sort" to sort data.'})]})]})]})]})]})]})})}function Mr(t,r){const[s,l]=a.useState([]),[o,i]=a.useState([]);return{filteredData:a.useMemo(()=>{let d=[...t];return s.forEach(y=>{!y.value&&!["is_empty","is_not_empty"].includes(y.operator)||(d=d.filter(p=>{const j=nt(p,y.field);return Lr(j,y)}))}),o.length>0&&d.sort((y,p)=>{for(const j of o){const g=nt(y,j.field),m=nt(p,j.field),c=$r(g,m);if(c!==0)return j.direction==="asc"?c:-c}return 0}),d},[t,s,o]),rules:s,sortConfig:o,setRules:l,setSortConfig:i}}function nt(t,r){return r.split(".").reduce((s,l)=>s==null?void 0:s[l],t)}function Lr(t,r){const{operator:s,value:l}=r;switch(s){case"equals":return t===l;case"not_equals":return t!==l;case"contains":return String(t||"").toLowerCase().includes(String(l||"").toLowerCase());case"not_contains":return!String(t||"").toLowerCase().includes(String(l||"").toLowerCase());case"starts_with":return String(t||"").toLowerCase().startsWith(String(l||"").toLowerCase());case"ends_with":return String(t||"").toLowerCase().endsWith(String(l||"").toLowerCase());case"greater_than":return Number(t)>Number(l);case"less_than":return Number(t)<Number(l);case"greater_equal":return Number(t)>=Number(l);case"less_equal":return Number(t)<=Number(l);case"between":if(Array.isArray(l)&&l.length===2){const[o,i]=l;return Number(t)>=Number(o)&&Number(t)<=Number(i)}return!1;case"in":return Array.isArray(l)?l.includes(t):!1;case"not_in":return Array.isArray(l)?!l.includes(t):!0;case"is_empty":return t==null||t==="";case"is_not_empty":return t!=null&&t!=="";default:return!0}}function $r(t,r){return t==null?r==null?0:-1:r==null?1:typeof t=="string"&&typeof r=="string"?t.localeCompare(r):typeof t=="number"&&typeof r=="number"?t-r:String(t).localeCompare(String(r))}function Tr({data:t,columns:r,filename:s="export",title:l="Data Export",className:o,onExport:i,enableCustomReports:h=!0,enableDateFilter:d=!0,dateFields:y=[]}){var G,J,A,F;const[p,j]=a.useState(!1),[g,m]=a.useState(!1),[c,N]=a.useState({format:"csv",filename:s,columns:r.map(v=>v.key),includeHeaders:!0,title:l,orientation:"portrait",pageSize:"a4"}),D=v=>{const H={...c,format:v,filename:`${s}-${new Date().toISOString().split("T")[0]}`};v==="csv"?Ct(t,r,H):v==="pdf"&&St(t,r,H),i==null||i(H),j(!1)},I=()=>{const v={...c,filename:c.filename||`${s}-${new Date().toISOString().split("T")[0]}`};c.format==="csv"?Ct(t,r,v):c.format==="pdf"?St(t,r,v):c.format==="json"&&zr(t,r,v),i==null||i(v),m(!1),j(!1)},C=v=>{N(H=>({...H,...v}))},Y=v=>{const H=c.columns.includes(v)?c.columns.filter(P=>P!==v):[...c.columns,v];C({columns:H})},T=a.useMemo(()=>{let v=[...t];if(c.dateRange&&c.dateRange.field){const{start:H,end:P,field:ie}=c.dateRange;(H||P)&&(v=v.filter(Q=>{const z=Le(Q,ie),W=new Date(z);return!(H&&W<new Date(H)||P&&W>new Date(P))}))}return c.filters&&Object.entries(c.filters).forEach(([H,P])=>{P!=null&&P!==""&&(v=v.filter(ie=>{const Q=Le(ie,H);return String(Q).toLowerCase().includes(String(P).toLowerCase())}))}),v},[t,c.dateRange,c.filters]);return e.jsx("div",{className:V("relative",o),children:e.jsxs(ht,{open:p,onOpenChange:j,children:[e.jsx(mt,{asChild:!0,children:e.jsxs(K,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Export"]})}),e.jsxs(Ke,{className:"w-64 p-0",align:"end",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"font-medium",children:"Export Data"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[T.length," records available"]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Quick Export"}),e.jsxs(K,{variant:"ghost",className:"w-full justify-start",onClick:()=>D("csv"),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),e.jsxs(K,{variant:"ghost",className:"w-full justify-start",onClick:()=>D("pdf"),children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{}),e.jsxs(It,{open:g,onOpenChange:m,children:[e.jsx(Dt,{asChild:!0,children:e.jsxs(K,{variant:"ghost",className:"w-full justify-start",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Custom Report"]})}),e.jsxs(Ot,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(At,{children:e.jsx(Ft,{children:"Custom Report Builder"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"export-format",children:"Format"}),e.jsxs(me,{value:c.format,onValueChange:v=>C({format:v}),children:[e.jsx(fe,{children:e.jsx(pe,{})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"csv",children:"CSV"}),e.jsx(Z,{value:"pdf",children:"PDF"}),e.jsx(Z,{value:"json",children:"JSON"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"export-filename",children:"Filename"}),e.jsx(le,{id:"export-filename",value:c.filename,onChange:v=>C({filename:v.target.value}),placeholder:"Enter filename..."})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"export-title",children:"Report Title"}),e.jsx(le,{id:"export-title",value:c.title,onChange:v=>C({title:v.target.value}),placeholder:"Enter report title..."})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"export-description",children:"Description"}),e.jsx(le,{id:"export-description",value:c.description||"",onChange:v=>C({description:v.target.value}),placeholder:"Enter report description..."})]})]}),c.format==="pdf"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"PDF Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Orientation"}),e.jsxs(me,{value:c.orientation,onValueChange:v=>C({orientation:v}),children:[e.jsx(fe,{children:e.jsx(pe,{})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"portrait",children:"Portrait"}),e.jsx(Z,{value:"landscape",children:"Landscape"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Page Size"}),e.jsxs(me,{value:c.pageSize,onValueChange:v=>C({pageSize:v}),children:[e.jsx(fe,{children:e.jsx(pe,{})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"a4",children:"A4"}),e.jsx(Z,{value:"letter",children:"Letter"}),e.jsx(Z,{value:"legal",children:"Legal"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Columns"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>C({columns:r.map(v=>v.key)}),children:"Select All"}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>C({columns:[]}),children:"Clear All"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:r.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{id:`column-${v.key}`,checked:c.columns.includes(v.key),onCheckedChange:()=>Y(v.key)}),e.jsx(ae,{htmlFor:`column-${v.key}`,className:"text-sm font-normal",children:v.label})]},v.key))}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.columns.length," of ",r.length," columns selected"]})]}),d&&y.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Date Range Filter"}),e.jsxs("div",{children:[e.jsx(ae,{children:"Date Field"}),e.jsxs(me,{value:((G=c.dateRange)==null?void 0:G.field)||"",onValueChange:v=>C({dateRange:{...c.dateRange,field:v,start:"",end:""}}),children:[e.jsx(fe,{children:e.jsx(pe,{placeholder:"Select date field..."})}),e.jsxs(xe,{children:[e.jsx(Z,{value:"",children:"No date filter"}),y.map(v=>e.jsx(Z,{value:v.key,children:v.label},v.key))]})]})]}),((J=c.dateRange)==null?void 0:J.field)&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Start Date"}),e.jsx(le,{type:"date",value:c.dateRange.start||"",onChange:v=>C({dateRange:{...c.dateRange,start:v.target.value}})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"End Date"}),e.jsx(le,{type:"date",value:c.dateRange.end||"",onChange:v=>C({dateRange:{...c.dateRange,end:v.target.value}})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Options"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{id:"include-headers",checked:c.includeHeaders,onCheckedChange:v=>C({includeHeaders:v})}),e.jsx(ae,{htmlFor:"include-headers",children:"Include column headers"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Export Summary"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Format: ",c.format.toUpperCase()]}),e.jsxs("div",{children:["Records: ",T.length]}),e.jsxs("div",{children:["Columns: ",c.columns.length]}),((A=c.dateRange)==null?void 0:A.field)&&e.jsxs("div",{children:["Date Filter: ",(F=y.find(v=>{var H;return v.key===((H=c.dateRange)==null?void 0:H.field)}))==null?void 0:F.label]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(K,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(K,{onClick:I,disabled:c.columns.length===0,children:"Export Report"})]})]})]})]})]})]})]})]})})}function Le(t,r){return r.split(".").reduce((s,l)=>s==null?void 0:s[l],t)}function Ct(t,r,s){const l=r.filter(d=>s.columns.includes(d.key));let o="";s.includeHeaders&&(o+=l.map(d=>`"${d.label}"`).join(",")+`
`),t.forEach(d=>{const y=l.map(p=>{const j=Le(d,p.key);return`"${(p.format?p.format(j):String(j||"")).replace(/"/g,'""')}"`});o+=y.join(",")+`
`});const i=new Blob([o],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(i),h.download=`${s.filename}.csv`,h.click(),URL.revokeObjectURL(h.href)}function St(t,r,s){const l=r.filter(h=>s.columns.includes(h.key));let o=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${s.title||"Report"}</title>
      <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; margin-bottom: 10px; }
        .description { color: #666; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f5f5f5; font-weight: bold; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .footer { margin-top: 20px; font-size: 12px; color: #666; }
      </style>
    </head>
    <body>
      <h1>${s.title||"Report"}</h1>
      ${s.description?`<div class="description">${s.description}</div>`:""}
      
      <table>
        <thead>
          <tr>
            ${l.map(h=>`<th>${h.label}</th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${t.map(h=>`
            <tr>
              ${l.map(d=>{const y=Le(h,d.key);return`<td>${d.format?d.format(y):String(y||"")}</td>`}).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
      
      <div class="footer">
        Generated on ${new Date().toLocaleString()} | ${t.length} records
      </div>
    </body>
    </html>
  `;const i=window.open("","_blank");i&&(i.document.write(o),i.document.close(),i.focus(),setTimeout(()=>{i.print()},250))}function zr(t,r,s){const l=r.filter(y=>s.columns.includes(y.key)),o=t.map(y=>{const p={};return l.forEach(j=>{const g=Le(y,j.key);p[j.key]=j.format?j.format(g):g}),p}),i=JSON.stringify({title:s.title,description:s.description,exportedAt:new Date().toISOString(),recordCount:t.length,data:o},null,2),h=new Blob([i],{type:"application/json;charset=utf-8;"}),d=document.createElement("a");d.href=URL.createObjectURL(h),d.download=`${s.filename}.json`,d.click(),URL.revokeObjectURL(d.href)}function da({data:t,columns:r,searchable:s=!1,searchPlaceholder:l="Search...",searchFields:o,enableAdvancedSearch:i=!1,enableAdvancedFilter:h=!1,filterFields:d,enableExport:y=!1,exportColumns:p,exportFilename:j="data-export",exportTitle:g="Data Export",sortable:m=!0,pagination:c=!0,pageSize:N=10,selectable:D=!1,onSelectionChange:I,onRowClick:C,className:Y,emptyMessage:T="No data available",loading:G=!1,loadingRows:J=5,mobileCardView:A=!0,mobileBreakpoint:F="md"}){const[v,H]=a.useState(""),[P,ie]=a.useState(null),[Q,z]=a.useState(1),[W,ce]=a.useState(new Set),[de,k]=a.useState("table"),L=a.useMemo(()=>r.map(f=>({key:f.key,weight:1,searchable:!0,highlightable:!0})),[r]),te=o||L,{filteredData:ue,searchQuery:se,handleSearchResults:u,handleSearchChange:E}=Dr(t),_=a.useMemo(()=>r.map(f=>({key:f.key,label:f.label,type:"text"})),[r]),w=d||_,{filteredData:M,setRules:q,setSortConfig:ee}=Mr(t),n=a.useMemo(()=>r.filter(f=>f.key!=="actions").map(f=>({key:f.key,label:f.label,type:"text",format:R=>R==null?"":typeof R=="object"?JSON.stringify(R):String(R)})),[r]),x=p||n,b=a.useMemo(()=>x.filter(f=>f.type==="date"||f.key.includes("date")||f.key.includes("at")).map(f=>({key:f.key,label:f.label})),[x]),[X,Ve]=a.useState("");a.useEffect(()=>{if(!i){const f=setTimeout(()=>{Ve(v),z(1)},300);return()=>clearTimeout(f)}},[v,i]),a.useEffect(()=>{i&&z(1)},[se,i]);const $=a.useMemo(()=>h?M:i?ue:X?t.filter(f=>r.some(R=>{const U=R.key.includes(".")?R.key.split(".").reduce((B,S)=>B==null?void 0:B[S],f):f[R.key];return String(U||"").toLowerCase().includes(X.toLowerCase())})):t,[t,X,r,i,ue,h,M]),O=a.useMemo(()=>P?[...$].sort((f,R)=>{const U=P.key.includes(".")?P.key.split(".").reduce((S,ne)=>S==null?void 0:S[ne],f):f[P.key],B=P.key.includes(".")?P.key.split(".").reduce((S,ne)=>S==null?void 0:S[ne],R):R[P.key];return U==null?1:B==null?-1:U<B?P.direction==="asc"?-1:1:U>B?P.direction==="asc"?1:-1:0}):$,[$,P]),re=a.useMemo(()=>{if(!c)return O;const f=(Q-1)*N;return O.slice(f,f+N)},[O,Q,N,c]),ye=Math.ceil(O.length/N),ke=f=>{m&&ie(R=>(R==null?void 0:R.key)===f?R.direction==="asc"?{key:f,direction:"desc"}:null:{key:f,direction:"asc"})},Qe=(f,R)=>{const U=new Set(W);if(R?U.add(f):U.delete(f),ce(U),I){const B=Array.from(U).map(S=>O[S]);I(B)}},pt=f=>{if(f){const R=new Set(O.map((U,B)=>B));ce(R),I&&I(O)}else ce(new Set),I&&I([])},xt=W.size===O.length&&O.length>0,ds=()=>{const f=[];let U=Math.max(1,Q-Math.floor(2.5)),B=Math.min(ye,U+5-1);B-U+1<5&&(U=Math.max(1,B-5+1));for(let S=U;S<=B;S++)f.push(S);return f},us=()=>e.jsx(e.Fragment,{children:Array.from({length:J}).map((f,R)=>e.jsxs(Ce,{children:[D&&e.jsx(Ee,{children:e.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})}),r.map((U,B)=>e.jsx(Ee,{children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},`loading-${R}-${B}`))]},`loading-${R}`))}),hs=()=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:J}).map((f,R)=>e.jsx(gt,{className:"animate-pulse",children:e.jsxs(vt,{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},`loading-card-${R}`))}),ms=()=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map((f,R)=>{const U=O.indexOf(f),B=W.has(U);return e.jsx(gt,{className:V("cursor-pointer hover:shadow-md transition-shadow",B&&"ring-2 ring-blue-500 bg-blue-50"),onClick:()=>C==null?void 0:C(f,R),children:e.jsxs(vt,{className:"p-4 space-y-3",children:[D&&e.jsx("div",{className:"flex justify-end",onClick:S=>S.stopPropagation(),children:e.jsx(Ne,{checked:B,onCheckedChange:S=>Qe(U,S),"aria-label":`Select item ${R+1}`})}),r.map(S=>{const ne=S.key.includes(".")?String(S.key).split(".").reduce((he,De)=>he==null?void 0:he[De],f):f[S.key];return e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:S.label}),e.jsx("div",{className:"text-sm text-gray-900",children:S.render?S.render(ne,f,R):i&&se?e.jsx(at,{text:String(ne||""),highlight:se}):String(ne||"")})]},String(S.key))})]})},R)})}),We={sm:"sm",md:"md",lg:"lg"}[F];return e.jsxs("div",{className:V("space-y-4",Y),children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s&&e.jsx("div",{className:"flex-1 max-w-sm",children:i?e.jsx(_r,{data:t,searchFields:te,onSearchResults:u,onSearchChange:E,placeholder:l,enableHistory:!0,enableSuggestions:!0}):e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(le,{placeholder:l,value:v,onChange:f=>H(f.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[W.size>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[W.size," of ",O.length," selected"]}),h&&e.jsx(Fr,{fields:w,onFiltersChange:q,onSortChange:ee,enablePresets:!0,enableMultiSort:!0}),y&&e.jsx(Tr,{data:$,columns:x,filename:j,title:g,enableCustomReports:!0,enableDateFilter:b.length>0,dateFields:b}),A&&e.jsxs("div",{className:`flex items-center gap-1 ${We}:hidden`,children:[e.jsx(K,{variant:de==="table"?"default":"outline",size:"sm",onClick:()=>k("table"),className:"p-2",children:e.jsx(Us,{className:"h-4 w-4"})}),e.jsx(K,{variant:de==="cards"?"default":"outline",size:"sm",onClick:()=>k("cards"),className:"p-2",children:e.jsx(qs,{className:"h-4 w-4"})})]})]})]}),G?A&&de==="cards"?e.jsx(hs,{}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(Ye,{children:[e.jsx(Xe,{children:e.jsxs(Ce,{children:[D&&e.jsx(Se,{className:"w-12"}),r.map(f=>e.jsx(Se,{children:f.label},String(f.key)))]})}),e.jsx(Ze,{children:e.jsx(us,{})})]})}):re.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 border rounded-lg",children:T}):e.jsxs(e.Fragment,{children:[A&&e.jsx("div",{className:`${We}:hidden`,children:de==="cards"?e.jsx(ms,{}):e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(Ye,{children:[e.jsx(Xe,{children:e.jsxs(Ce,{children:[D&&e.jsx(Se,{className:"w-12",children:e.jsx(Ne,{checked:xt,onCheckedChange:pt,"aria-label":"Select all rows"})}),r.map(f=>e.jsx(Se,{className:V(f.headerClassName,"whitespace-nowrap",m&&f.sortable!==!1&&"cursor-pointer hover:bg-gray-50 select-none"),onClick:()=>f.sortable!==!1&&ke(String(f.key)),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:f.label}),m&&f.sortable!==!1&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx(it,{className:V("h-3 w-3 -mb-1",(P==null?void 0:P.key)===f.key&&P.direction==="asc"?"text-gray-900":"text-gray-400")}),e.jsx(Ue,{className:V("h-3 w-3",(P==null?void 0:P.key)===f.key&&P.direction==="desc"?"text-gray-900":"text-gray-400")})]})]})},String(f.key)))]})}),e.jsx(Ze,{children:re.map((f,R)=>{const U=O.indexOf(f),B=W.has(U);return e.jsxs(Ce,{className:V(C&&"cursor-pointer hover:bg-gray-50",B&&"bg-blue-50"),onClick:()=>C==null?void 0:C(f,R),children:[D&&e.jsx(Ee,{onClick:S=>S.stopPropagation(),children:e.jsx(Ne,{checked:B,onCheckedChange:S=>Qe(U,S),"aria-label":`Select row ${R+1}`})}),r.map(S=>{const ne=S.key.includes(".")?String(S.key).split(".").reduce((he,De)=>he==null?void 0:he[De],f):f[S.key];return e.jsx(Ee,{className:V(S.className,"whitespace-nowrap"),children:S.render?S.render(ne,f,R):i&&se?e.jsx(at,{text:String(ne||""),highlight:se}):String(ne||"")},String(S.key))})]},R)})})]})})}),e.jsx("div",{className:A?`hidden ${We}:block`:"",children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(Ye,{children:[e.jsx(Xe,{children:e.jsxs(Ce,{children:[D&&e.jsx(Se,{className:"w-12",children:e.jsx(Ne,{checked:xt,onCheckedChange:pt,"aria-label":"Select all rows"})}),r.map(f=>e.jsx(Se,{className:V(f.headerClassName,m&&f.sortable!==!1&&"cursor-pointer hover:bg-gray-50 select-none"),onClick:()=>f.sortable!==!1&&ke(String(f.key)),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:f.label}),m&&f.sortable!==!1&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx(it,{className:V("h-3 w-3 -mb-1",(P==null?void 0:P.key)===f.key&&P.direction==="asc"?"text-gray-900":"text-gray-400")}),e.jsx(Ue,{className:V("h-3 w-3",(P==null?void 0:P.key)===f.key&&P.direction==="desc"?"text-gray-900":"text-gray-400")})]})]})},String(f.key)))]})}),e.jsx(Ze,{children:re.map((f,R)=>{const U=O.indexOf(f),B=W.has(U);return e.jsxs(Ce,{className:V(C&&"cursor-pointer hover:bg-gray-50",B&&"bg-blue-50"),onClick:()=>C==null?void 0:C(f,R),children:[D&&e.jsx(Ee,{onClick:S=>S.stopPropagation(),children:e.jsx(Ne,{checked:B,onCheckedChange:S=>Qe(U,S),"aria-label":`Select row ${R+1}`})}),r.map(S=>{const ne=S.key.includes(".")?String(S.key).split(".").reduce((he,De)=>he==null?void 0:he[De],f):f[S.key];return e.jsx(Ee,{className:S.className,children:S.render?S.render(ne,f,R):i&&se?e.jsx(at,{text:String(ne||""),highlight:se}):String(ne||"")},String(S.key))})]},R)})})]})})})]}),c&&ye>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 text-center sm:text-left",children:["Showing ",(Q-1)*N+1," to ",Math.min(Q*N,O.length)," of ",O.length," results"]}),e.jsx(Lt,{children:e.jsxs($t,{children:[e.jsx(qe,{children:e.jsx(Tt,{onClick:()=>z(Math.max(1,Q-1)),className:V(Q===1&&"pointer-events-none opacity-50")})}),ds().map(f=>e.jsx(qe,{children:e.jsx(Be,{onClick:()=>z(f),isActive:Q===f,children:f})},f)),e.jsx(qe,{children:e.jsx(zt,{onClick:()=>z(Math.min(ye,Q+1)),className:V(Q===ye&&"pointer-events-none opacity-50")})})]})})]})]})}export{da as D,Vs as F};
